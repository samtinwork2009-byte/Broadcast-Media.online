<!DOCTYPE html><html lang="zh-Hant"><head><meta name="x-poe-datastore-behavior" content="local_only"><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>ProCast Studio | 電視台級播客製作平台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&amp;family=Exo+2:wght@300;400;600&amp;family=Noto+Sans+TC:wght@300;400;700&amp;display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f3ff;
            --primary-dark: #00a8b5;
            --secondary: #00ff9d;
            --accent: #9d4edd;
            --accent-light: #c77dff;
            --dark: #0a0a16;
            --dark-card: #121225;
            --darker: #050510;
            --light: #e8fefe;
            --gray: #8a8aa3;
            --danger: #ff4757;
            --success: #2ed573;
            --warning: #ffa502;
            --info: #1e90ff;
            --tv-blue: #0066ff;
            --tv-red: #ff0033;
            --tv-yellow: #ffcc00;
            --tv-green: #00cc66;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Exo 2', 'Noto Sans TC', sans-serif;
            background-color: var(--darker);
            color: var(--light);
            overflow-x: hidden;
            line-height: 1.6;
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(9, 24, 51, 0.9) 0%, transparent 25%),
                radial-gradient(circle at 90% 80%, rgba(0, 102, 255, 0.2) 0%, transparent 25%),
                linear-gradient(45deg, transparent 49%, rgba(0, 243, 255, 0.03) 50%, transparent 51%),
                linear-gradient(-45deg, transparent 49%, rgba(0, 243, 255, 0.03) 50%, transparent 51%);
            background-size: 100% 100%, 100% 100%, 50px 50px, 50px 50px;
        }

        h1, h2, h3, h4, .logo, .nav-brand {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .container {
            width: 100%;
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* 首頁樣式 */
        #homepage {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .tv-static {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                radial-gradient(circle at 80% 70%, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 30px 30px;
            animation: static 20s infinite linear;
            z-index: -2;
            opacity: 0.3;
        }

        @keyframes static {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 30px); }
        }

        .scanlines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                to bottom,
                transparent 50%,
                rgba(0, 0, 0, 0.1) 51%
            );
            background-size: 100% 4px;
            z-index: -1;
            opacity: 0.2;
        }

        /* 導航欄 */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 0;
            position: relative;
            z-index: 100;
            flex-wrap: wrap;
            border-bottom: 1px solid rgba(0, 243, 255, 0.2);
        }

        .nav-brand {
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 15px;
            text-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
        }

        .nav-brand i {
            color: var(--tv-red);
            font-size: 2.5rem;
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            0% { text-shadow: 0 0 5px var(--tv-red), 0 0 10px var(--tv-red); }
            100% { text-shadow: 0 0 10px var(--tv-red), 0 0 20px var(--tv-red); }
        }

        .nav-tagline {
            font-size: 0.9rem;
            color: var(--gray);
            margin-top: 5px;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        .nav-controls {
            display: flex;
            gap: 15px;
        }

        .nav-btn {
            background: rgba(10, 15, 35, 0.9);
            border: 2px solid rgba(0, 243, 255, 0.4);
            color: var(--primary);
            padding: 14px 28px;
            border-radius: 10px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 243, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn:hover {
            background: rgba(0, 243, 255, 0.15);
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0, 243, 255, 0.3);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: 2px solid rgba(0, 243, 255, 0.4);
            color: var(--primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            width: 50px;
            height: 50px;
            align-items: center;
            justify-content: center;
        }

        /* 主頁內容 */
        .hero {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px 0 100px;
            position: relative;
            z-index: 10;
        }

        .hero h1 {
            font-size: clamp(2.8rem, 6vw, 5rem);
            margin-bottom: 25px;
            background: linear-gradient(90deg, var(--tv-red), var(--tv-blue), var(--tv-yellow));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            line-height: 1.1;
            text-shadow: 0 0 30px rgba(0, 102, 255, 0.5);
            position: relative;
            padding-bottom: 20px;
        }

        .hero h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--primary), transparent);
        }

        .hero-subtitle {
            font-size: clamp(1.3rem, 3vw, 2rem);
            color: var(--secondary);
            margin-bottom: 15px;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .hero-description {
            max-width: 900px;
            margin: 0 auto 50px;
            color: #b0b0f0;
            font-size: 1.2rem;
            line-height: 1.8;
            padding: 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            border-left: 4px solid var(--tv-red);
            border-right: 4px solid var(--tv-blue);
        }

        /* 平台指南 */
        .platform-guide {
            background: rgba(10, 15, 35, 0.9);
            border-radius: 20px;
            padding: 40px;
            margin: 60px auto;
            max-width: 1200px;
            border: 2px solid rgba(0, 243, 255, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
        }

        .guide-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .guide-title {
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .guide-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .guide-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .guide-category {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(0, 243, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .guide-category::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--tv-red), var(--tv-blue));
        }

        .guide-category:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 15px 30px rgba(0, 243, 255, 0.2);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .category-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(0, 102, 255, 0.2), rgba(255, 0, 51, 0.2));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 1.8rem;
        }

        .category-title {
            font-size: 1.5rem;
            color: var(--light);
        }

        .category-steps {
            list-style: none;
        }

        .category-steps li {
            padding: 8px 0;
            color: #c0c0e0;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .category-steps li:last-child {
            border-bottom: none;
        }

        .category-steps li i {
            color: var(--secondary);
            font-size: 0.9rem;
        }

        .guide-cta {
            text-align: center;
            margin-top: 40px;
        }

        /* 主按鈕 */
        .cta-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 40px;
            margin-top: 50px;
        }

        .main-cta {
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            color: white;
            border: none;
            padding: 25px 60px;
            font-size: 1.5rem;
            font-weight: 700;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 10px 30px rgba(255, 0, 51, 0.4);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
        }

        .main-cta::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .main-cta:hover::before {
            left: 100%;
        }

        .main-cta:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 15px 40px rgba(255, 0, 51, 0.6);
        }

        .main-cta i {
            font-size: 1.8rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                text-shadow: 0 0 5px white;
            }
            50% {
                transform: scale(1.2);
                text-shadow: 0 0 15px white;
            }
        }

        .cta-description {
            color: var(--gray);
            max-width: 700px;
            text-align: center;
            font-size: 1rem;
            line-height: 1.7;
        }

        /* 模擬器主容器 */
        #simulator {
            display: none;
            min-height: 100vh;
            padding: 20px 0;
            position: relative;
        }

        .simulator-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(0, 102, 255, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 70% 70%, rgba(255, 0, 51, 0.1) 0%, transparent 50%);
            z-index: -1;
        }

        /* 層級導航 */
        .level-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(10, 15, 35, 0.9);
            border-radius: 15px;
            border: 2px solid rgba(0, 243, 255, 0.3);
            flex-wrap: wrap;
            gap: 20px;
        }

        .nav-path {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-path-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--gray);
            font-size: 0.9rem;
        }

        .nav-path-item.active {
            color: var(--primary);
            font-weight: 600;
        }

        .nav-path-separator {
            color: var(--gray);
            margin: 0 5px;
        }

        .level-controls {
            display: flex;
            gap: 15px;
        }

        /* 頁面頭部 */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 25px;
            border-bottom: 2px solid rgba(0, 243, 255, 0.3);
            flex-wrap: wrap;
            gap: 25px;
        }

        .page-title {
            font-size: 2.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 20px;
            text-shadow: 0 0 10px rgba(0, 243, 255, 0.3);
        }

        .page-title i {
            color: var(--tv-red);
            font-size: 2.5rem;
        }

        .page-subtitle {
            color: var(--gray);
            font-size: 1.1rem;
            margin-top: 10px;
            max-width: 800px;
        }

        .page-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .page-btn {
            background: rgba(10, 15, 35, 0.9);
            border: 2px solid rgba(0, 243, 255, 0.4);
            color: var(--primary);
            padding: 14px 28px;
            border-radius: 10px;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }

        .page-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 243, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .page-btn:hover::before {
            left: 100%;
        }

        .page-btn:hover {
            background: rgba(0, 243, 255, 0.15);
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        .btn-danger {
            border-color: rgba(255, 71, 87, 0.6);
            color: var(--danger);
        }

        .btn-danger:hover {
            background: rgba(255, 71, 87, 0.1);
        }

        .btn-success {
            border-color: rgba(46, 213, 115, 0.6);
            color: var(--success);
        }

        .btn-success:hover {
            background: rgba(46, 213, 115, 0.1);
        }

        .btn-warning {
            border-color: rgba(255, 165, 2, 0.6);
            color: var(--warning);
        }

        .btn-warning:hover {
            background: rgba(255, 165, 2, 0.1);
        }

        /* 工作模式選擇 */
        .workflow-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .mode-card {
            background: linear-gradient(145deg, rgba(10, 15, 35, 0.9), rgba(5, 10, 25, 0.9));
            border-radius: 20px;
            padding: 35px;
            border: 2px solid rgba(0, 243, 255, 0.2);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            height: 100%;
        }

        .mode-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--tv-red), var(--tv-blue), var(--tv-yellow));
        }

        .mode-card:hover {
            transform: translateY(-10px);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(0, 243, 255, 0.2);
        }

        .mode-card.active {
            border-color: var(--tv-red);
            box-shadow: 0 0 30px rgba(255, 0, 51, 0.3);
        }

        .mode-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
        }

        .mode-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
        }

        .mode-title {
            font-size: 1.8rem;
            color: var(--light);
        }

        .mode-badge {
            background: var(--tv-red);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: inline-block;
            margin-bottom: 15px;
        }

        .mode-description {
            color: var(--gray);
            margin-bottom: 25px;
            line-height: 1.7;
        }

        .mode-features {
            list-style: none;
            margin-bottom: 25px;
        }

        .mode-features li {
            padding: 8px 0;
            color: #c0c0e0;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .mode-features li:last-child {
            border-bottom: none;
        }

        .mode-features li i {
            color: var(--secondary);
            font-size: 0.9rem;
        }

        .mode-action {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }

        .mode-status {
            font-size: 0.9rem;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
        }

        .status-ready {
            background: rgba(46, 213, 115, 0.2);
            color: var(--success);
            border: 1px solid rgba(46, 213, 115, 0.3);
        }

        .status-premium {
            background: rgba(255, 165, 2, 0.2);
            color: var(--warning);
            border: 1px solid rgba(255, 165, 2, 0.3);
        }

        .mode-btn {
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .mode-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 0, 51, 0.3);
        }

        /* 工具分類 - 專業級設計 */
        .tools-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 35px;
            margin-bottom: 60px;
        }

        .category-card {
            background: linear-gradient(165deg, rgba(15, 20, 45, 0.95), rgba(8, 12, 30, 0.98));
            border-radius: 24px;
            padding: 0;
            border: 1px solid rgba(0, 243, 255, 0.15);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05);
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--primary));
            background-size: 200% 100%;
            animation: gradientShift 3s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .category-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at top right, rgba(0, 243, 255, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .category-card:hover {
            border-color: rgba(0, 243, 255, 0.4);
            transform: translateY(-8px) scale(1.01);
            box-shadow: 0 25px 60px rgba(0, 243, 255, 0.2), 0 10px 30px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 30px 30px 20px;
            background: linear-gradient(180deg, rgba(0, 243, 255, 0.05), transparent);
            position: relative;
        }

        .category-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 30px;
            right: 30px;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(0, 243, 255, 0.3), transparent);
        }

        .category-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, rgba(0, 102, 255, 0.3), rgba(0, 243, 255, 0.2));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 2rem;
            box-shadow: 0 8px 25px rgba(0, 243, 255, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .category-icon::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 18px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            z-index: -1;
            opacity: 0.3;
        }

        .category-title {
            font-size: 1.7rem;
            color: var(--light);
            font-weight: 600;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .category-level {
            display: inline-block;
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 20px;
            margin-top: 5px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .category-level.beginner { background: linear-gradient(90deg, #27ae60, #2ecc71); color: white; }
        .category-level.intermediate { background: linear-gradient(90deg, #f39c12, #e67e22); color: white; }
        .category-level.professional { background: linear-gradient(90deg, #8e44ad, #9b59b6); color: white; }
        .category-level.expert { background: linear-gradient(90deg, #e74c3c, #c0392b); color: white; }

        .category-content {
            padding: 25px 30px 30px;
            position: relative;
            z-index: 1;
        }

        .category-description {
            color: var(--gray);
            margin-bottom: 25px;
            line-height: 1.8;
            font-size: 0.95rem;
            padding: 0 30px;
        }

        .category-tools {
            list-style: none;
            padding: 0 30px;
        }

        .category-tools li {
            padding: 14px 18px;
            color: #c0c0e0;
            display: flex;
            align-items: center;
            gap: 14px;
            border: 1px solid rgba(0, 243, 255, 0.12);
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.25), rgba(0, 0, 0, 0.15));
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
        }

        .category-tools li::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 243, 255, 0.15), transparent);
            transition: 0.6s;
        }

        .category-tools li:hover::before {
            left: 100%;
        }

        .category-tools li:hover {
            color: var(--primary);
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.15), rgba(0, 102, 255, 0.1));
            border-color: rgba(0, 243, 255, 0.5);
            transform: translateX(8px);
            box-shadow: 0 5px 20px rgba(0, 243, 255, 0.25), inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .category-tools li:last-child {
            margin-bottom: 0;
        }

        .category-tools li i {
            color: var(--secondary);
            font-size: 1.1rem;
            width: 28px;
            text-align: center;
            filter: drop-shadow(0 0 5px rgba(255, 0, 51, 0.3));
        }

        .category-tools li:hover i {
            color: var(--primary);
            filter: drop-shadow(0 0 8px rgba(0, 243, 255, 0.5));
        }

        .category-tools li .tool-arrow {
            margin-left: auto;
            color: var(--gray);
            opacity: 0;
            transition: all 0.4s ease;
            transform: translateX(-5px);
        }

        .category-tools li:hover .tool-arrow {
            opacity: 1;
            color: var(--primary);
            transform: translateX(0);
        }

        /* 工具分類卡片按鈕 - 專業級 */
        .category-actions {
            display: flex;
            gap: 12px;
            margin-top: 25px;
            padding: 25px 30px 30px;
            border-top: 1px solid rgba(0, 243, 255, 0.2);
        }

        .category-btn {
            flex: 1;
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(0, 102, 255, 0.2), rgba(255, 0, 51, 0.2));
            border: 2px solid rgba(0, 243, 255, 0.4);
            color: var(--primary);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .category-btn:hover {
            background: linear-gradient(135deg, rgba(0, 102, 255, 0.4), rgba(255, 0, 51, 0.4));
            border-color: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 243, 255, 0.3);
        }

        .category-btn.primary {
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            border-color: transparent;
            color: white;
        }

        .category-btn.primary:hover {
            box-shadow: 0 8px 25px rgba(255, 0, 51, 0.4);
        }

        /* 自定義對話框 */
        .custom-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .custom-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .custom-modal {
            background: linear-gradient(145deg, rgba(18, 18, 37, 0.98), rgba(10, 10, 22, 0.98));
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 35px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 243, 255, 0.3);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .custom-modal-overlay.show .custom-modal {
            transform: scale(1);
        }

        .custom-modal-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
        }

        .custom-modal-header i {
            font-size: 2rem;
            color: var(--warning);
        }

        .custom-modal-header h3 {
            color: var(--light);
            font-size: 1.3rem;
        }

        .custom-modal-body {
            color: var(--gray);
            line-height: 1.7;
            margin-bottom: 25px;
        }

        .custom-modal-footer {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .modal-btn-cancel {
            background: transparent;
            border: 2px solid var(--gray);
            color: var(--gray);
        }

        .modal-btn-cancel:hover {
            border-color: var(--light);
            color: var(--light);
        }

        .modal-btn-confirm {
            background: linear-gradient(135deg, var(--tv-red), var(--danger));
            border: none;
            color: white;
        }

        .modal-btn-confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4);
        }

        .modal-btn-success {
            background: linear-gradient(135deg, var(--success), var(--tv-green));
            border: none;
            color: white;
        }

        .modal-btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 213, 115, 0.4);
        }

        /* 工具詳情面板 */
        .tool-detail-panel {
            position: fixed;
            top: 0;
            right: -450px;
            width: 450px;
            height: 100vh;
            background: linear-gradient(145deg, rgba(18, 18, 37, 0.98), rgba(10, 10, 22, 0.98));
            border-left: 3px solid var(--primary);
            z-index: 9999;
            transition: right 0.4s ease;
            overflow-y: auto;
            padding: 30px;
        }

        .tool-detail-panel.show {
            right: 0;
        }

        .tool-detail-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0, 243, 255, 0.3);
        }

        .tool-detail-title {
            font-size: 1.5rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .tool-detail-close {
            background: none;
            border: 2px solid var(--gray);
            color: var(--gray);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .tool-detail-close:hover {
            border-color: var(--danger);
            color: var(--danger);
        }

        .tool-detail-content {
            color: var(--light);
        }

        .tool-feature-list {
            list-style: none;
            margin: 20px 0;
        }

        .tool-feature-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .tool-feature-list li i {
            color: var(--success);
        }

        .tool-action-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 30px;
        }

        .tool-action-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            border: none;
            color: white;
            border-radius: 12px;
            cursor: pointer;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .tool-action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 0, 51, 0.4);
        }

        .tool-action-btn.secondary {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .tool-action-btn.secondary:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        @media (max-width: 768px) {
            .tool-detail-panel {
                width: 100%;
                right: -100%;
            }
        }

        /* 平台簡介卡片 */
        .platform-intro {
            max-width: 1000px;
            margin: 40px auto;
        }

        .intro-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .intro-card {
            background: linear-gradient(145deg, rgba(10, 15, 35, 0.9), rgba(5, 10, 25, 0.9));
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 16px;
            padding: 25px 20px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .intro-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--tv-red), var(--tv-blue));
        }

        .intro-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: 0 15px 35px rgba(0, 243, 255, 0.2);
        }

        .intro-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(0, 102, 255, 0.3), rgba(255, 0, 51, 0.3));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .intro-card h3 {
            color: var(--light);
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .intro-card p {
            color: var(--gray);
            font-size: 0.9rem;
            margin: 0;
        }

        /* CTA 按鈕區 */
        .hero-cta-section {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .guide-cta-btn {
            background: rgba(10, 15, 35, 0.9);
            border: 2px solid rgba(0, 243, 255, 0.5);
            color: var(--primary);
            padding: 20px 45px;
            font-size: 1.2rem;
            font-weight: 600;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Orbitron', sans-serif;
            display: flex;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(10px);
        }

        .guide-cta-btn:hover {
            background: rgba(0, 243, 255, 0.1);
            border-color: var(--primary);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 243, 255, 0.3);
        }

        .cta-hint {
            text-align: center;
            color: var(--gray);
            margin-top: 25px;
            font-size: 0.95rem;
        }

        /* 平台指南彈窗 */
        .guide-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
            padding: 20px;
        }

        .guide-modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .guide-modal {
            background: linear-gradient(145deg, rgba(18, 18, 37, 0.98), rgba(10, 10, 22, 0.98));
            border: 2px solid var(--primary);
            border-radius: 25px;
            max-width: 1100px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.9) translateY(30px);
            transition: all 0.4s ease;
            box-shadow: 0 30px 80px rgba(0, 243, 255, 0.3);
        }

        .guide-modal-overlay.show .guide-modal {
            transform: scale(1) translateY(0);
        }

        .guide-modal-header {
            position: sticky;
            top: 0;
            background: linear-gradient(145deg, rgba(18, 18, 37, 1), rgba(10, 10, 22, 1));
            padding: 30px;
            border-bottom: 2px solid rgba(0, 243, 255, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .guide-modal-title {
            font-size: 1.8rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
            font-family: 'Orbitron', sans-serif;
        }

        .guide-modal-close {
            background: none;
            border: 2px solid var(--gray);
            color: var(--gray);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .guide-modal-close:hover {
            border-color: var(--danger);
            color: var(--danger);
            transform: rotate(90deg);
        }

        .guide-modal-content {
            padding: 30px;
        }

        .guide-section {
            margin-bottom: 35px;
        }

        .guide-section-title {
            font-size: 1.3rem;
            color: var(--secondary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 255, 157, 0.3);
        }

        .guide-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .guide-item {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .guide-item:hover {
            border-color: var(--primary);
            background: rgba(0, 243, 255, 0.05);
        }

        .guide-item-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .guide-item-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .guide-item-title {
            font-size: 1.1rem;
            color: var(--light);
            font-weight: 600;
        }

        .guide-item-desc {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .guide-workflow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            padding: 25px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-top: 20px;
        }

        .workflow-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .workflow-step-num {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .workflow-step-label {
            color: var(--light);
            font-size: 0.85rem;
            text-align: center;
        }

        .workflow-arrow {
            color: var(--primary);
            font-size: 1.2rem;
        }

        /* 類別工具頁面樣式 */
        .category-tool-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .tool-panel {
            background: linear-gradient(145deg, rgba(10, 15, 35, 0.95), rgba(5, 10, 25, 0.95));
            border: 2px solid rgba(0, 243, 255, 0.25);
            border-radius: 18px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .tool-panel:hover {
            border-color: var(--primary);
            box-shadow: 0 10px 35px rgba(0, 243, 255, 0.2);
        }

        .tool-panel.full-width {
            grid-column: 1 / -1;
        }

        .tool-panel-header {
            background: linear-gradient(90deg, rgba(0, 102, 255, 0.2), rgba(255, 0, 51, 0.2));
            padding: 18px 22px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid rgba(0, 243, 255, 0.2);
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--light);
        }

        .tool-panel-header i:first-child {
            color: var(--primary);
            font-size: 1.3rem;
        }

        .tool-panel-header span:first-of-type {
            flex: 1;
        }

        .tool-status {
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .tool-status.live {
            background: var(--danger);
            color: white;
            animation: pulse-status 1.5s infinite;
        }

        @keyframes pulse-status {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .tool-panel-content {
            padding: 22px;
        }

        /* 場景網格 */
        .scene-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .scene-item {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(0, 243, 255, 0.2);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .scene-item:hover {
            border-color: var(--primary);
            background: rgba(0, 243, 255, 0.1);
        }

        .scene-item.active {
            border-color: var(--tv-red);
            background: rgba(255, 0, 51, 0.2);
            box-shadow: 0 0 20px rgba(255, 0, 51, 0.3);
        }

        .scene-preview {
            width: 50px;
            height: 35px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            color: var(--primary);
        }

        .scene-item span {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .scene-item.active span {
            color: var(--light);
        }

        /* 轉場控制 */
        .transition-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 243, 255, 0.15);
        }

        .transition-controls label {
            color: var(--gray);
            font-size: 0.85rem;
        }

        .tool-select {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--light);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .tool-slider {
            flex: 1;
            min-width: 80px;
            accent-color: var(--primary);
        }

        /* 開關按鈕 */
        .tool-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }

        .tool-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .switch-slider {
            position: absolute;
            cursor: pointer;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 26px;
            transition: 0.3s;
        }

        .switch-slider::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            left: 3px;
            bottom: 2px;
            background: var(--gray);
            border-radius: 50%;
            transition: 0.3s;
        }

        .tool-switch input:checked + .switch-slider {
            background: rgba(0, 243, 255, 0.3);
            border-color: var(--primary);
        }

        .tool-switch input:checked + .switch-slider::before {
            transform: translateX(22px);
            background: var(--primary);
        }

        /* 統計項目 */
        .stream-stats {
            display: grid;
            gap: 15px;
        }

        .stat-item {
            display: grid;
            grid-template-columns: 100px 1fr auto;
            align-items: center;
            gap: 15px;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .stat-value {
            color: var(--primary);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .stat-bar {
            height: 8px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 4px;
            overflow: hidden;
        }

        .stat-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--tv-blue), var(--primary));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .stat-bar.success .stat-bar-fill {
            background: linear-gradient(90deg, var(--success), var(--tv-green));
        }

        .stat-bar.warning .stat-bar-fill {
            background: linear-gradient(90deg, var(--warning), #ff8c00);
        }

        .stat-trend {
            font-size: 0.85rem;
            font-weight: 600;
        }

        .stat-trend.up {
            color: var(--success);
        }

        /* 平台狀態 */
        .platform-status {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 243, 255, 0.15);
        }

        .platform-item {
            padding: 8px 15px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--gray);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .platform-item.connected {
            border-color: var(--success);
            color: var(--success);
        }

        /* 多軌混音器 */
        .track-mixer {
            display: flex;
            gap: 20px;
            justify-content: center;
            padding: 20px 0;
        }

        .track-channel {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 12px;
            min-width: 80px;
        }

        .track-channel.master {
            border-color: var(--tv-red);
            background: rgba(255, 0, 51, 0.1);
        }

        .channel-label {
            font-size: 0.75rem;
            color: var(--gray);
            text-align: center;
            max-width: 70px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .channel-meter {
            display: flex;
            gap: 4px;
            height: 120px;
        }

        .meter-bar {
            width: 12px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .meter-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, var(--success), var(--warning), var(--danger));
            border-radius: 6px;
            transition: height 0.1s ease;
        }

        .volume-fader {
            writing-mode: vertical-lr;
            direction: rtl;
            height: 100px;
            accent-color: var(--primary);
        }

        .channel-controls {
            display: flex;
            gap: 6px;
        }

        .channel-btn {
            width: 30px;
            height: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .channel-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .channel-btn.active {
            background: var(--danger);
            border-color: var(--danger);
            color: white;
        }

        .channel-btn.mute.active {
            background: var(--warning);
            border-color: var(--warning);
        }

        .channel-btn.solo.active {
            background: var(--tv-blue);
            border-color: var(--tv-blue);
        }

        /* EQ 頻段 */
        .eq-display {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .eq-display canvas {
            width: 100%;
            height: 150px;
            border-radius: 8px;
        }

        .eq-bands {
            display: flex;
            justify-content: space-around;
            gap: 10px;
        }

        .eq-band {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .band-label {
            font-size: 0.75rem;
            color: var(--gray);
        }

        .eq-slider {
            writing-mode: vertical-lr;
            direction: rtl;
            height: 80px;
            accent-color: var(--secondary);
        }

        .band-value {
            font-size: 0.7rem;
            color: var(--primary);
            font-weight: 600;
        }

        /* 壓縮器顯示 */
        .compressor-display {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }

        .gain-reduction-meter {
            width: 40px;
            height: 120px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .gr-fill {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to bottom, var(--danger), var(--warning));
            border-radius: 8px;
        }

        .gr-label {
            position: absolute;
            bottom: 5px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: var(--gray);
        }

        .compressor-controls,
        .reverb-controls,
        .limiter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
        }

        .knob-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .knob-group label {
            font-size: 0.75rem;
            color: var(--gray);
        }

        .knob-group span {
            font-size: 0.8rem;
            color: var(--primary);
            font-weight: 600;
        }

        /* 預設按鈕 */
        .reverb-presets {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .preset-btn {
            padding: 8px 16px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--gray);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.85rem;
        }

        .preset-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .preset-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: var(--dark);
        }

        /* 進階時間軸 */
        .advanced-timeline {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 15px;
            position: relative;
        }

        .timeline-ruler-advanced {
            display: flex;
            justify-content: space-between;
            padding: 8px 60px 8px 80px;
            border-bottom: 1px solid rgba(0, 243, 255, 0.2);
            margin-bottom: 10px;
        }

        .timeline-ruler-advanced span {
            font-size: 0.75rem;
            color: var(--gray);
        }

        .timeline-track-advanced {
            display: flex;
            align-items: center;
            height: 50px;
            margin-bottom: 8px;
        }

        .track-info {
            width: 70px;
            padding-right: 10px;
        }

        .track-info span {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .track-content {
            flex: 1;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            position: relative;
        }

        .audio-clip {
            position: absolute;
            top: 5px;
            bottom: 5px;
            background: linear-gradient(180deg, rgba(0, 243, 255, 0.4), rgba(0, 243, 255, 0.2));
            border: 1px solid var(--primary);
            border-radius: 4px;
            display: flex;
            align-items: center;
            padding: 0 8px;
            cursor: pointer;
            overflow: hidden;
        }

        .audio-clip.music {
            background: linear-gradient(180deg, rgba(157, 78, 221, 0.4), rgba(157, 78, 221, 0.2));
            border-color: var(--accent);
        }

        .audio-clip.sfx {
            background: linear-gradient(180deg, rgba(255, 165, 2, 0.4), rgba(255, 165, 2, 0.2));
            border-color: var(--warning);
        }

        .clip-name {
            font-size: 0.7rem;
            color: var(--light);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .playhead {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--tv-red);
            z-index: 10;
        }

        .playhead::before {
            content: '';
            position: absolute;
            top: -8px;
            left: -6px;
            border-left: 7px solid transparent;
            border-right: 7px solid transparent;
            border-top: 10px solid var(--tv-red);
        }

        .timeline-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(0, 243, 255, 0.15);
        }

        .transport-btn {
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 50%;
            color: var(--primary);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .transport-btn:hover {
            background: rgba(0, 243, 255, 0.1);
            border-color: var(--primary);
        }

        .transport-btn.play {
            background: var(--tv-red);
            border-color: var(--tv-red);
            color: white;
        }

        .timecode {
            font-family: 'Orbitron', monospace;
            font-size: 1.1rem;
            color: var(--primary);
            background: rgba(0, 0, 0, 0.4);
            padding: 8px 15px;
            border-radius: 6px;
            border: 1px solid rgba(0, 243, 255, 0.2);
        }

        .zoom-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: auto;
            color: var(--gray);
        }

        .timeline-toolbar {
            display: flex;
            gap: 5px;
            margin-left: auto;
        }

        .toolbar-btn {
            width: 32px;
            height: 32px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toolbar-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* 工具按鈕 */
        .tool-btn {
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--primary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .tool-btn:hover {
            background: rgba(0, 243, 255, 0.1);
            border-color: var(--primary);
        }

        .tool-btn.primary {
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            border: none;
            color: white;
        }

        .tool-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 51, 0.3);
        }

        .tool-btn.full-width {
            width: 100%;
            justify-content: center;
        }

        .tool-input {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--light);
            padding: 10px 15px;
            border-radius: 8px;
            font-size: 1rem;
            width: 100%;
        }

        .tool-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .tool-input.small {
            width: 80px;
            padding: 8px 10px;
        }

        .tool-textarea {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--light);
            padding: 12px 15px;
            border-radius: 8px;
            font-size: 0.95rem;
            width: 100%;
            resize: vertical;
            font-family: inherit;
        }

        .tool-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* 錄音時間顯示 */
        .recording-time {
            font-family: 'Orbitron', monospace;
            font-size: 1rem;
            color: var(--danger);
            padding: 5px 12px;
            background: rgba(255, 71, 87, 0.2);
            border-radius: 6px;
            margin-left: auto;
        }

        /* AI 徽章 */
        .ai-badge {
            padding: 3px 10px;
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 700;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* 通知徽章 */
        .notification-badge {
            padding: 2px 10px;
            background: var(--danger);
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
            margin-left: auto;
        }

        /* 團隊成員 */
        .team-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .team-member {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .team-member.online {
            border-color: rgba(46, 213, 115, 0.3);
        }

        .member-avatar {
            width: 42px;
            height: 42px;
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 0.9rem;
        }

        .member-info {
            flex: 1;
        }

        .member-name {
            display: block;
            color: var(--light);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .member-role {
            display: block;
            color: var(--gray);
            font-size: 0.8rem;
        }

        .member-status {
            font-size: 0.8rem;
            color: var(--success);
            padding: 4px 10px;
            background: rgba(46, 213, 115, 0.1);
            border-radius: 12px;
        }

        .team-member.offline .member-status {
            color: var(--gray);
            background: rgba(138, 138, 163, 0.1);
        }

        .online-count {
            padding: 4px 12px;
            background: rgba(46, 213, 115, 0.2);
            border-radius: 12px;
            font-size: 0.8rem;
            color: var(--success);
            margin-left: auto;
        }

        /* 表單元素 */
        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            color: var(--gray);
            font-size: 0.85rem;
            margin-bottom: 6px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* 聊天訊息 */
        .chat-messages {
            height: 200px;
            overflow-y: auto;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .chat-msg {
            display: flex;
            gap: 8px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.9rem;
        }

        .msg-author {
            color: var(--primary);
            font-weight: 600;
        }

        .msg-text {
            color: var(--light);
            flex: 1;
        }

        .msg-time {
            color: var(--gray);
            font-size: 0.75rem;
        }

        .chat-input-area {
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex: 1;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 8px;
            padding: 10px 15px;
            color: var(--light);
            font-size: 0.9rem;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .send-btn {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        /* 任務看板 */
        .task-columns {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .task-column {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 12px;
        }

        .column-header {
            color: var(--gray);
            font-size: 0.85rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .task-count {
            background: rgba(0, 243, 255, 0.2);
            color: var(--primary);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.75rem;
        }

        .task-item {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 8px;
        }

        .task-item.active {
            border-color: var(--primary);
        }

        .task-item.done {
            opacity: 0.6;
        }

        .task-title {
            display: block;
            color: var(--light);
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .task-assignee {
            font-size: 0.75rem;
            color: var(--gray);
        }

        .header-btn {
            background: none;
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--primary);
            width: 28px;
            height: 28px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .header-btn:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        /* 版本控制 */
        .version-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .version-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border-left: 3px solid var(--gray);
        }

        .version-item.current {
            border-left-color: var(--primary);
        }

        .version-marker {
            width: 12px;
            height: 12px;
            background: var(--gray);
            border-radius: 50%;
        }

        .version-item.current .version-marker {
            background: var(--primary);
            box-shadow: 0 0 10px var(--primary);
        }

        .version-info {
            flex: 1;
        }

        .version-name {
            display: block;
            color: var(--light);
            font-size: 0.9rem;
            margin-bottom: 3px;
        }

        .version-meta {
            font-size: 0.75rem;
            color: var(--gray);
        }

        .version-btn {
            background: none;
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--primary);
            width: 32px;
            height: 32px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .version-btn:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        /* 分析數據 */
        .analytics-overview {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .analytics-stat {
            text-align: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .stat-number {
            display: block;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
        }

        .stat-change {
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stat-change.up {
            color: var(--success);
        }

        .analytics-chart {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
        }

        .chart-placeholder {
            height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            gap: 10px;
        }

        .chart-placeholder i {
            font-size: 2rem;
            color: var(--primary);
        }

        /* SEO 檢查清單 */
        .seo-checklist {
            margin-bottom: 20px;
        }

        .seo-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: var(--gray);
            font-size: 0.9rem;
        }

        .seo-item.done {
            color: var(--success);
        }

        .seo-item.done i {
            color: var(--success);
        }

        .seo-item.warning {
            color: var(--warning);
        }

        .seo-item.warning i {
            color: var(--warning);
        }

        .seo-score {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .score-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--success), var(--tv-green));
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .score-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            font-family: 'Orbitron', sans-serif;
        }

        .score-label {
            color: var(--gray);
            font-size: 0.85rem;
        }

        /* 平台選擇網格 */
        .platform-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .platform-checkbox {
            cursor: pointer;
        }

        .platform-checkbox input {
            display: none;
        }

        .platform-card {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(0, 243, 255, 0.2);
            border-radius: 12px;
            padding: 20px 15px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .platform-card i {
            font-size: 1.8rem;
            color: var(--gray);
            margin-bottom: 10px;
            display: block;
        }

        .platform-card span {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .platform-checkbox input:checked + .platform-card {
            border-color: var(--primary);
            background: rgba(0, 243, 255, 0.1);
        }

        .platform-checkbox input:checked + .platform-card i,
        .platform-checkbox input:checked + .platform-card span {
            color: var(--primary);
        }

        /* AI 轉錄 */
        .transcription-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .transcription-controls {
            display: flex;
            gap: 10px;
        }

        .transcription-preview {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 15px;
            max-height: 150px;
            overflow-y: auto;
        }

        .transcript-line {
            padding: 8px 0;
            color: var(--gray);
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .transcript-line.active {
            color: var(--primary);
            font-weight: 600;
        }

        .transcription-actions {
            display: flex;
            gap: 10px;
        }

        /* AI 降噪比較 */
        .denoise-comparison {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .comparison-side {
            text-align: center;
        }

        .comparison-label {
            display: block;
            font-size: 0.8rem;
            color: var(--gray);
            margin-bottom: 8px;
        }

        .waveform-mini {
            width: 100px;
            height: 40px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 6px;
            margin-bottom: 8px;
            position: relative;
            overflow: hidden;
        }

        .waveform-mini::before {
            content: '';
            position: absolute;
            inset: 5px;
            background: repeating-linear-gradient(90deg,
                var(--primary) 0px, var(--primary) 2px,
                transparent 2px, transparent 6px);
            opacity: 0.6;
        }

        .waveform-mini.noisy::before {
            background: repeating-linear-gradient(90deg,
                var(--warning) 0px, var(--warning) 2px,
                var(--danger) 4px, var(--danger) 5px,
                transparent 5px, transparent 8px);
        }

        .comparison-arrow {
            color: var(--primary);
            font-size: 1.5rem;
        }

        .play-btn {
            width: 35px;
            height: 35px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 50%;
            color: var(--primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .play-btn:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        .denoise-settings {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .setting-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .setting-row label {
            width: 80px;
            color: var(--gray);
            font-size: 0.85rem;
        }

        .noise-types {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .noise-type {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--gray);
            font-size: 0.85rem;
            cursor: pointer;
        }

        .noise-type.active {
            color: var(--primary);
        }

        /* 音樂生成 */
        .music-generator {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .mood-selector label {
            display: block;
            color: var(--gray);
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .mood-options {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .mood-btn {
            padding: 8px 16px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 20px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.85rem;
        }

        .mood-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .mood-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: var(--dark);
        }

        .music-params {
            display: flex;
            gap: 20px;
        }

        .param-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .param-group label {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .generated-preview {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .music-wave-placeholder {
            flex: 1;
            height: 40px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
        }

        .preview-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .duration {
            font-size: 0.85rem;
            color: var(--gray);
        }

        /* 建議列表 */
        .suggestion-input {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .suggestion-input textarea {
            flex: 1;
        }

        .suggestions-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .suggestion-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .suggestion-item i {
            color: var(--warning);
            font-size: 1.1rem;
            margin-top: 2px;
        }

        .suggestion-content {
            flex: 1;
        }

        .suggestion-content strong {
            display: block;
            color: var(--light);
            font-size: 0.85rem;
            margin-bottom: 3px;
        }

        .suggestion-content span {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* 設備列表 */
        .device-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

        .device-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .device-item.connected {
            border-color: rgba(46, 213, 115, 0.3);
        }

        .device-item i:first-child {
            font-size: 1.3rem;
            color: var(--gray);
            width: 30px;
            text-align: center;
        }

        .device-item.connected i:first-child {
            color: var(--success);
        }

        .device-info {
            flex: 1;
        }

        .device-name {
            display: block;
            color: var(--light);
            font-size: 0.9rem;
            margin-bottom: 2px;
        }

        .device-status {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .device-item.connected .device-status {
            color: var(--success);
        }

        .device-btn {
            background: none;
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--primary);
            width: 32px;
            height: 32px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .device-btn:hover {
            background: rgba(0, 243, 255, 0.1);
        }

        /* 快捷鍵列表 */
        .hotkey-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .hotkey-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .hotkey-action {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .hotkey-key {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 243, 255, 0.3);
            padding: 5px 12px;
            border-radius: 6px;
            color: var(--primary);
            font-size: 0.85rem;
            font-family: 'Orbitron', monospace;
        }

        /* 主題設定 */
        .theme-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .theme-option {
            flex: 1;
            text-align: center;
            cursor: pointer;
            padding: 15px;
            border: 2px solid rgba(0, 243, 255, 0.2);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .theme-option:hover {
            border-color: var(--primary);
        }

        .theme-option.active {
            border-color: var(--primary);
            background: rgba(0, 243, 255, 0.1);
        }

        .theme-preview {
            width: 100%;
            height: 40px;
            border-radius: 6px;
            margin-bottom: 10px;
        }

        .dark-preview {
            background: linear-gradient(135deg, #1a1a2e, #0a0a16);
        }

        .light-preview {
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
        }

        .auto-preview {
            background: linear-gradient(135deg, #1a1a2e 50%, #f0f0f0 50%);
        }

        .theme-option span {
            color: var(--gray);
            font-size: 0.85rem;
        }

        .theme-option.active span {
            color: var(--primary);
        }

        .accent-color label {
            display: block;
            color: var(--gray);
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .color-options {
            display: flex;
            gap: 10px;
        }

        .color-option {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.2s ease;
        }

        .color-option:hover {
            transform: scale(1.1);
        }

        .color-option.active {
            border-color: white;
            box-shadow: 0 0 15px currentColor;
        }

        /* 效能監控 */
        .performance-stats {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .perf-item {
            display: grid;
            grid-template-columns: 100px 1fr auto;
            align-items: center;
            gap: 12px;
        }

        .perf-label {
            font-size: 0.85rem;
            color: var(--gray);
        }

        .perf-bar {
            height: 10px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            overflow: hidden;
        }

        .perf-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--tv-green));
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .perf-fill.warning {
            background: linear-gradient(90deg, var(--warning), #ff8c00);
        }

        .perf-fill.success {
            background: linear-gradient(90deg, var(--success), var(--tv-green));
        }

        .perf-value {
            font-size: 0.85rem;
            color: var(--primary);
            font-weight: 600;
            min-width: 80px;
            text-align: right;
        }

        /* 母帶處理鏈 */
        .mastering-chain {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .chain-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--gray);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .chain-item:hover {
            border-color: var(--primary);
        }

        .chain-item.active {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(0, 243, 255, 0.1);
        }

        .chain-arrow {
            color: var(--gray);
        }

        .loudness-meter {
            display: flex;
            align-items: center;
            gap: 30px;
            justify-content: center;
        }

        .lufs-display {
            text-align: center;
        }

        .lufs-value {
            display: block;
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--success);
            font-family: 'Orbitron', sans-serif;
        }

        .lufs-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .target-select {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .target-select label {
            color: var(--gray);
            font-size: 0.85rem;
        }

        /* 波形容器 */
        .waveform-container {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .waveform-container canvas {
            width: 100%;
            height: 150px;
            display: block;
        }

        .waveform-info {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .info-item {
            font-size: 0.85rem;
        }

        .info-item span {
            color: var(--gray);
        }

        .info-item strong {
            color: var(--primary);
        }

        /* 字幕系統 */
        .caption-preview {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 15px;
        }

        .caption-text {
            font-size: 1.2rem;
            color: var(--light);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .caption-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .caption-history {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 10px;
            max-height: 100px;
            overflow-y: auto;
        }

        .history-item {
            padding: 5px 0;
            color: var(--gray);
            font-size: 0.8rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* 聊天與投票 */
        .chat-feed {
            height: 120px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .chat-message {
            padding: 6px 0;
            font-size: 0.85rem;
            color: var(--gray);
        }

        .chat-message.highlight {
            color: var(--warning);
        }

        .chat-user {
            color: var(--primary);
            font-weight: 600;
        }

        .poll-section {
            border-top: 1px solid rgba(0, 243, 255, 0.15);
            padding-top: 15px;
        }

        .poll-title {
            font-size: 0.9rem;
            color: var(--light);
            margin-bottom: 10px;
        }

        .poll-option {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .poll-option span {
            width: 60px;
            font-size: 0.85rem;
            color: var(--gray);
        }

        .poll-bar {
            flex: 1;
            height: 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            overflow: hidden;
        }

        .poll-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--tv-red), var(--tv-blue));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            font-size: 0.75rem;
            color: white;
            font-weight: 600;
        }

        /* 麥克風設定 */
        .mic-selector {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .mic-selector label {
            color: var(--gray);
            font-size: 0.85rem;
        }

        .mic-settings-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 15px;
        }

        .setting-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .setting-item label {
            width: 80px;
            color: var(--gray);
            font-size: 0.85rem;
        }

        .setting-item span {
            width: 50px;
            text-align: right;
            color: var(--primary);
            font-size: 0.85rem;
        }

        .mic-features {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .feature-toggle {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--gray);
            font-size: 0.85rem;
            cursor: pointer;
        }

        .feature-toggle input {
            accent-color: var(--primary);
        }

        /* 頻譜分析 */
        #spectrumCanvas {
            width: 100%;
            height: 200px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .spectrum-info {
            display: flex;
            gap: 30px;
        }

        .freq-display {
            font-size: 0.9rem;
        }

        .freq-display span {
            color: var(--gray);
        }

        .freq-display strong {
            color: var(--primary);
        }

        /* 限制器顯示 */
        .limiter-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .output-meter {
            width: 30px;
            height: 120px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .ceiling-line {
            position: absolute;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--danger);
        }

        .limiter-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .info-row {
            display: flex;
            gap: 10px;
            font-size: 0.9rem;
        }

        .info-row span {
            color: var(--gray);
        }

        .info-row strong {
            color: var(--primary);
        }

        /* 響應式調整 */
        @media (max-width: 768px) {
            .category-tool-grid {
                grid-template-columns: 1fr;
            }

            .track-mixer {
                flex-wrap: wrap;
            }

            .scene-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .guide-modal {
                max-height: 95vh;
            }

            .guide-grid {
                grid-template-columns: 1fr;
            }

            .hero-cta-section {
                flex-direction: column;
                align-items: center;
            }

            .guide-cta-btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* 快速模式切換面板 */
        .quick-mode-panel {
            position: fixed;
            bottom: 100px;
            right: 20px;
            z-index: 1000;
            display: none;
        }

        #simulator:not([style*="display: none"]) ~ .quick-mode-panel,
        body:has(#simulator[style*="display: block"]) .quick-mode-panel {
            display: block;
        }

        .quick-mode-toggle {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--tv-blue), var(--accent));
            border: 3px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.4rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0, 102, 255, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quick-mode-toggle:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 6px 30px rgba(0, 102, 255, 0.6);
        }

        .quick-mode-toggle.active {
            background: linear-gradient(135deg, var(--tv-red), var(--accent));
            transform: rotate(45deg);
        }

        .quick-mode-menu {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 320px;
            background: rgba(10, 15, 35, 0.98);
            border-radius: 16px;
            border: 2px solid rgba(0, 243, 255, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px) scale(0.9);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(20px);
            overflow: hidden;
        }

        .quick-mode-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0) scale(1);
        }

        .quick-mode-header {
            padding: 15px 20px;
            background: linear-gradient(90deg, rgba(0, 102, 255, 0.2), rgba(157, 78, 221, 0.2));
            border-bottom: 1px solid rgba(0, 243, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: var(--primary);
        }

        .quick-mode-hint {
            font-size: 0.75rem;
            color: var(--gray);
            background: rgba(0, 0, 0, 0.3);
            padding: 4px 8px;
            border-radius: 4px;
        }

        .quick-mode-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            padding: 15px;
        }

        .quick-mode-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 12px 6px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 10px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.7rem;
        }

        .quick-mode-btn i {
            font-size: 1.2rem;
            transition: transform 0.2s ease;
        }

        .quick-mode-btn:hover {
            background: rgba(0, 243, 255, 0.15);
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-2px);
        }

        .quick-mode-btn:hover i {
            transform: scale(1.2);
        }

        .quick-mode-btn.active {
            background: linear-gradient(135deg, rgba(0, 102, 255, 0.3), rgba(157, 78, 221, 0.3));
            border-color: var(--primary);
            color: var(--primary);
        }

        .quick-mode-shortcuts {
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(0, 243, 255, 0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            font-size: 0.7rem;
            color: var(--gray);
        }

        .shortcut-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .shortcut-item kbd {
            background: rgba(0, 243, 255, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.65rem;
            font-family: monospace;
            color: var(--primary);
        }

        /* 快捷操作工具列 */
        .quick-toolbar {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(10, 15, 35, 0.95);
            border: 2px solid rgba(0, 243, 255, 0.3);
            border-radius: 50px;
            padding: 8px 20px;
            display: none;
            align-items: center;
            gap: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(20px);
            z-index: 999;
        }

        #simulator[style*="display: block"] ~ .quick-toolbar {
            display: flex;
        }

        .quick-tool-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(0, 243, 255, 0.3);
            color: var(--gray);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .quick-tool-btn i {
            font-size: 0.9rem;
        }

        .quick-tool-label {
            font-size: 0.5rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            margin-top: 2px;
        }

        .quick-tool-btn:hover {
            background: rgba(0, 243, 255, 0.2);
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-3px);
        }

        .quick-tool-btn.recording {
            background: rgba(255, 71, 87, 0.3);
            border-color: var(--danger);
            color: var(--danger);
            animation: pulse-rec 1s infinite;
        }

        .quick-tool-btn.streaming {
            background: rgba(255, 0, 51, 0.3);
            border-color: var(--tv-red);
            color: var(--tv-red);
            animation: pulse-live 1s infinite;
        }

        .quick-tool-btn.playing {
            background: rgba(46, 213, 115, 0.3);
            border-color: var(--success);
            color: var(--success);
        }

        @keyframes pulse-rec {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(255, 71, 87, 0); }
        }

        @keyframes pulse-live {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 0, 51, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(255, 0, 51, 0); }
        }

        .quick-tool-divider {
            width: 1px;
            height: 30px;
            background: rgba(0, 243, 255, 0.3);
        }

        .quick-meter {
            display: flex;
            gap: 3px;
            height: 36px;
            padding: 4px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 6px;
        }

        .meter-channel {
            width: 8px;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }

        .meter-fill-quick {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, var(--success), var(--warning) 70%, var(--danger));
            height: 60%;
            transition: height 0.1s ease;
            border-radius: 3px;
        }

        .quick-time {
            font-family: 'Orbitron', monospace;
            font-size: 0.9rem;
            color: var(--primary);
            padding: 0 10px;
            min-width: 80px;
            text-align: center;
        }

        /* 操作提示氣泡 */
        .action-tooltip {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 20px 40px;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            border: 2px solid var(--primary);
            box-shadow: 0 10px 40px rgba(0, 243, 255, 0.3);
        }

        .action-tooltip.show {
            opacity: 1;
            visibility: visible;
            animation: tooltip-pop 0.3s ease;
        }

        @keyframes tooltip-pop {
            0% { transform: translate(-50%, -50%) scale(0.8); }
            50% { transform: translate(-50%, -50%) scale(1.1); }
            100% { transform: translate(-50%, -50%) scale(1); }
        }

        /* 響應式調整 - 快速面板 */
        @media (max-width: 768px) {
            .quick-mode-menu {
                width: 280px;
                right: -10px;
            }

            .quick-mode-grid {
                grid-template-columns: repeat(4, 1fr);
            }

            .quick-toolbar {
                padding: 6px 12px;
                gap: 8px;
            }

            .quick-tool-btn {
                width: 38px;
                height: 38px;
            }

            .quick-time {
                display: none;
            }
        }

        /* 實時錄音工作室 */
        .recording-studio {
            background: linear-gradient(145deg, rgba(10, 15, 35, 0.95), rgba(5, 10, 25, 0.95));
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 40px;
            border: 3px solid rgba(0, 243, 255, 0.3);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }

        .studio-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0, 243, 255, 0.2);
            flex-wrap: wrap;
            gap: 20px;
        }

        .studio-title {
            font-size: 2rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .studio-title i {
            color: var(--tv-red);
            font-size: 2.2rem;
        }

        .studio-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 243, 255, 0.4);
            color: var(--primary);
            padding: 14px 28px;
            border-radius: 10px;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .control-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 243, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .control-btn:hover::before {
            left: 100%;
        }

        .control-btn:hover {
            background: rgba(0, 243, 255, 0.1);
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        .btn-record {
            background: linear-gradient(135deg, rgba(255, 0, 51, 0.2), rgba(255, 71, 87, 0.2));
            border-color: rgba(255, 71, 87, 0.6);
            color: var(--danger);
        }

        .btn-record:hover {
            background: linear-gradient(135deg, rgba(255, 0, 51, 0.3), rgba(255, 71, 87, 0.3));
        }

        .btn-record.recording {
            animation: recordingPulse 1.5s infinite;
        }

        @keyframes recordingPulse {
            0%, 100% { 
                box-shadow: 0 0 10px rgba(255, 71, 87, 0.5),
                           0 0 20px rgba(255, 71, 87, 0.3);
            }
            50% { 
                box-shadow: 0 0 20px rgba(255, 71, 87, 0.8),
                           0 0 40px rgba(255, 71, 87, 0.5);
            }
        }

        /* 音頻可視化 */
        .audio-visualization {
            height: 200px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(0, 243, 255, 0.2);
        }

        .visualizer-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .visualizer-bar {
            position: absolute;
            bottom: 0;
            width: 4px;
            background: linear-gradient(to top, var(--primary), var(--secondary));
            border-radius: 2px 2px 0 0;
            transform-origin: bottom;
        }

        .spectrum-analyzer {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, rgba(0, 243, 255, 0.1), transparent);
            opacity: 0.5;
        }

        /* 錄音控制面板 */
        .recording-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .control-group {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(0, 243, 255, 0.2);
        }

        .control-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            color: var(--gray);
        }

        .control-value {
            color: var(--primary);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .control-slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: linear-gradient(90deg, var(--dark-card), rgba(0, 243, 255, 0.3));
            border-radius: 4px;
            outline: none;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: 3px solid var(--dark);
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
        }

        .control-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            border: 3px solid var(--dark);
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
        }

        /* 錄音軌道管理 */
        .track-management {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border: 2px solid rgba(0, 243, 255, 0.2);
        }

        .track-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .track-item {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(0, 243, 255, 0.2);
            transition: all 0.3s ease;
        }

        .track-item:hover {
            border-color: var(--primary);
            transform: translateY(-3px);
        }

        .track-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .track-name {
            font-size: 1.2rem;
            color: var(--light);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .track-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .track-waveform {
            height: 60px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }

        .waveform-bar {
            position: absolute;
            bottom: 0;
            background: linear-gradient(to top, var(--primary), var(--secondary));
            border-radius: 2px 2px 0 0;
        }

        .track-controls {
            display: flex;
            gap: 10px;
        }

        .track-btn {
            flex: 1;
            padding: 8px 15px;
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--primary);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9rem;
        }

        .track-btn:hover {
            background: rgba(0, 243, 255, 0.2);
        }

        /* 實時直播模擬 */
        .live-simulation {
            background: linear-gradient(145deg, rgba(10, 15, 35, 0.95), rgba(5, 10, 25, 0.95));
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 40px;
            border: 3px solid var(--tv-red);
            position: relative;
            overflow: hidden;
        }

        .live-simulation::before {
            content: 'LIVE';
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--tv-red);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 900;
            font-size: 1.2rem;
            letter-spacing: 2px;
            animation: liveBlink 2s infinite;
        }

        @keyframes liveBlink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .live-preview {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-top: 25px;
        }

        @media (max-width: 1024px) {
            .live-preview {
                grid-template-columns: 1fr;
            }
        }

        .preview-screen {
            background: #000;
            border-radius: 15px;
            padding: 20px;
            min-height: 400px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .screen-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 49%, rgba(255, 255, 255, 0.02) 50%, transparent 51%);
            background-size: 10px 10px;
            opacity: 0.1;
            pointer-events: none;
        }

        .live-stats {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid rgba(255, 0, 51, 0.3);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: var(--gray);
        }

        .stat-value {
            color: var(--light);
            font-weight: 600;
            font-size: 1.1rem;
        }

        /* 後期製作工作室 */
        .post-production {
            background: linear-gradient(145deg, rgba(10, 15, 35, 0.95), rgba(5, 10, 25, 0.95));
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 40px;
            border: 3px solid var(--tv-blue);
            position: relative;
            overflow: hidden;
        }

        .timeline-container {
            height: 400px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            border: 2px solid rgba(0, 243, 255, 0.2);
            margin-top: 25px;
            position: relative;
            overflow: hidden;
        }

        .timeline-ruler {
            height: 40px;
            background: rgba(0, 0, 0, 0.6);
            border-bottom: 2px solid rgba(0, 243, 255, 0.3);
            position: relative;
            display: flex;
            align-items: center;
            padding: 0 20px;
        }

        .timeline-track {
            height: 80px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
        }

        .audio-clip {
            position: absolute;
            height: 60px;
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.3), rgba(157, 78, 221, 0.3));
            border: 2px solid rgba(0, 243, 255, 0.5);
            border-radius: 8px;
            top: 10px;
            cursor: move;
            display: flex;
            align-items: center;
            padding: 0 15px;
            color: var(--light);
            font-size: 0.9rem;
            overflow: hidden;
            user-select: none;
        }

        /* 進度指示器 */
        .progress-container {
            margin: 50px 0;
            background: linear-gradient(145deg, rgba(10, 15, 35, 0.9), rgba(5, 10, 25, 0.9));
            border-radius: 20px;
            padding: 35px;
            border: 2px solid rgba(0, 243, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .progress-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--tv-red), var(--tv-blue), var(--tv-yellow), var(--tv-green));
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .progress-title {
            font-size: 1.8rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .progress-stats {
            color: var(--gray);
            font-size: 1rem;
        }

        .progress-bar {
            height: 20px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 2px solid rgba(0, 243, 255, 0.2);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--tv-red), var(--tv-blue), var(--tv-yellow));
            border-radius: 10px;
            width: 0%;
            transition: width 1s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 17px;
            left: 17px;
            right: 17px;
            height: 3px;
            background: rgba(0, 243, 255, 0.2);
            z-index: 1;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            margin-bottom: 20px;
        }

        .step-indicator {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--dark-card);
            border: 3px solid rgba(0, 243, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            font-weight: 900;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid rgba(0, 243, 255, 0.1);
            animation: ripple 2s infinite;
        }

        @keyframes ripple {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(1.2); opacity: 0; }
        }

        .step-indicator.active {
            border-color: var(--primary);
            background: var(--primary);
            color: var(--dark);
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.5);
        }

        .step-indicator.active::before {
            border-color: var(--primary);
        }

        .step-indicator.completed {
            border-color: var(--tv-green);
            background: var(--tv-green);
            color: var(--dark);
        }

        .step-label {
            color: var(--gray);
            font-size: 0.95rem;
            text-align: center;
            max-width: 150px;
            font-weight: 600;
        }

        .step-label.active {
            color: var(--primary);
        }

        /* 工具頁面 */
        .tool-page {
            display: none;
        }

        .tool-page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tool-back-btn {
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 243, 255, 0.4);
            color: var(--primary);
            padding: 14px 28px;
            border-radius: 10px;
            font-family: 'Exo 2', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .tool-back-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 243, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .tool-back-btn:hover::before {
            left: 100%;
        }

        .tool-back-btn:hover {
            background: rgba(0, 243, 255, 0.1);
            transform: translateX(-5px);
        }

        /* 模擬器狀態通知 */
        .simulator-status {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(145deg, rgba(10, 15, 35, 0.95), rgba(5, 10, 25, 0.95));
            border-radius: 15px;
            padding: 25px;
            border: 2px solid rgba(0, 243, 255, 0.4);
            max-width: 400px;
            z-index: 1000;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.5s ease;
        }

        .simulator-status.show {
            transform: translateY(0);
            opacity: 1;
        }

        .status-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
        }

        .status-title {
            color: var(--primary);
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-close {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .status-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--light);
        }

        .status-message {
            color: var(--light);
            font-size: 1rem;
            line-height: 1.6;
        }

        /* 提示框 */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip-text {
            visibility: hidden;
            position: absolute;
            z-index: 1001;
            background: linear-gradient(145deg, rgba(10, 15, 35, 0.95), rgba(5, 10, 25, 0.95));
            color: var(--light);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid rgba(0, 243, 255, 0.4);
            width: 250px;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
            line-height: 1.5;
            opacity: 0;
            transition: opacity 0.3s;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .tooltip-text::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-width: 8px;
            border-style: solid;
            border-color: rgba(0, 243, 255, 0.4) transparent transparent transparent;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* 幫助面板 */
        .help-panel {
            position: fixed;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
            background: linear-gradient(145deg, rgba(10, 15, 35, 0.95), rgba(5, 10, 25, 0.95));
            border-radius: 15px 0 0 15px;
            padding: 20px;
            border: 2px solid rgba(0, 243, 255, 0.4);
            border-right: none;
            max-width: 300px;
            z-index: 999;
            box-shadow: -10px 0 30px rgba(0, 0, 0, 0.5);
            display: none;
        }

        .help-panel.show {
            display: block;
            animation: slideInRight 0.5s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%) translateY(-50%); }
            to { transform: translateX(0) translateY(-50%); }
        }

        .help-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
        }

        .help-title {
            color: var(--primary);
            font-size: 1.2rem;
            font-weight: 600;
        }

        .help-close {
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 1.2rem;
        }

        .help-content {
            color: var(--light);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .help-tip {
            background: rgba(0, 243, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            border-left: 3px solid var(--primary);
        }

        /* 響應式設計 */
        @media (max-width: 1400px) {
            .container {
                max-width: 1200px;
            }
            
            .workflow-modes {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            }
        }

        @media (max-width: 1200px) {
            .tools-categories {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
            
            .guide-categories {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .navbar {
                flex-wrap: wrap;
            }
            
            .mobile-menu-btn {
                display: flex;
            }
            
            .nav-controls {
                display: none;
                width: 100%;
                flex-direction: column;
                margin-top: 20px;
            }
            
            .nav-controls.active {
                display: flex;
            }
            
            .hero h1 {
                font-size: 3rem;
            }
            
            .page-title {
                font-size: 2rem;
            }
            
            .mode-card {
                padding: 25px;
            }
            
            .recording-controls {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.5rem;
            }
            
            .main-cta {
                padding: 20px 40px;
                font-size: 1.3rem;
            }
            
            .page-controls {
                width: 100%;
            }
            
            .page-btn {
                flex: 1;
                justify-content: center;
            }
            
            .progress-steps {
                justify-content: center;
                gap: 30px;
            }
            
            .simulator-status {
                left: 20px;
                right: 20px;
                max-width: none;
                bottom: 20px;
            }
            
            .help-panel {
                display: none !important;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero-description {
                font-size: 1rem;
                padding: 15px;
            }
            
            .nav-btn, .page-btn, .control-btn, .tool-back-btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
            
            .mode-card {
                padding: 20px;
            }
            
            .category-card {
                padding: 20px;
            }
            
            .recording-studio {
                padding: 25px;
            }
            
            .progress-container {
                padding: 25px;
            }
        }

        /* 導航提示 */
        .navigation-hint {
            position: fixed;
            bottom: 100px;
            right: 30px;
            background: rgba(0, 0, 0, 0.8);
            color: var(--primary);
            padding: 10px 15px;
            border-radius: 10px;
            border: 2px solid rgba(0, 243, 255, 0.4);
            font-size: 0.9rem;
            z-index: 999;
            display: none;
        }

        .navigation-hint.show {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 載入動畫 */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--darker);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 5px solid rgba(0, 243, 255, 0.3);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 30px;
        }

        .loading-text {
            color: var(--primary);
            font-size: 1.2rem;
            font-family: 'Orbitron', sans-serif;
            letter-spacing: 2px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 音檔庫樣式 */
        .audio-file-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .audio-file-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .audio-file-item:hover {
            border-color: var(--primary);
            background: rgba(0, 243, 255, 0.05);
            transform: translateX(5px);
        }

        .file-icon {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, var(--tv-blue), var(--primary));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .file-icon.recording {
            background: linear-gradient(135deg, var(--tv-red), var(--danger));
            animation: recordingPulse 1.5s infinite;
        }

        .file-info {
            flex: 1;
            min-width: 0;
        }

        .file-name {
            display: block;
            color: var(--light);
            font-weight: 600;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .file-meta {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .file-waveform-mini {
            width: 120px;
            height: 30px;
            background: linear-gradient(90deg,
                rgba(0, 243, 255, 0.3) 0%,
                rgba(0, 243, 255, 0.6) 25%,
                rgba(0, 243, 255, 0.4) 50%,
                rgba(0, 243, 255, 0.7) 75%,
                rgba(0, 243, 255, 0.3) 100%);
            border-radius: 5px;
            position: relative;
            overflow: hidden;
        }

        .file-waveform-mini::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                90deg,
                transparent 0px,
                transparent 2px,
                rgba(0, 0, 0, 0.3) 2px,
                rgba(0, 0, 0, 0.3) 4px
            );
        }

        .file-actions {
            display: flex;
            gap: 8px;
        }

        .file-action-btn {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 1px solid rgba(0, 243, 255, 0.3);
            background: rgba(0, 0, 0, 0.3);
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .file-action-btn:hover {
            background: rgba(0, 243, 255, 0.2);
            border-color: var(--primary);
            transform: scale(1.1);
        }

        .file-action-btn.play-btn:hover {
            background: rgba(46, 213, 115, 0.2);
            border-color: var(--success);
            color: var(--success);
        }

        .file-action-btn.delete-btn:hover {
            background: rgba(255, 71, 87, 0.2);
            border-color: var(--danger);
            color: var(--danger);
        }

        .file-filter {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        .tool-input {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 8px;
            padding: 8px 12px;
            color: var(--light);
            font-size: 0.9rem;
            min-width: 150px;
        }

        .tool-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* 播放控制器樣式 */
        .playback-display {
            margin-bottom: 25px;
        }

        .now-playing {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .now-playing-label {
            color: var(--gray);
        }

        .now-playing-name {
            color: var(--primary);
            font-weight: 600;
        }

        .playback-waveform {
            position: relative;
            height: 80px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .playback-cursor {
            position: absolute;
            top: 0;
            left: 25%;
            width: 2px;
            height: 100%;
            background: var(--tv-red);
            z-index: 10;
        }

        .playback-time {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .playback-time span {
            font-family: 'Orbitron', monospace;
            color: var(--primary);
            font-size: 0.9rem;
        }

        .playback-progress {
            flex: 1;
        }

        .playback-progress input {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, var(--primary) 25%, rgba(0, 243, 255, 0.2) 25%);
            border-radius: 4px;
            cursor: pointer;
        }

        .playback-progress input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
        }

        .playback-controls {
            display: flex;
            align-items: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .transport-controls {
            display: flex;
            gap: 10px;
        }

        .transport-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid rgba(0, 243, 255, 0.4);
            background: rgba(0, 0, 0, 0.4);
            color: var(--primary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }

        .transport-btn:hover {
            border-color: var(--primary);
            background: rgba(0, 243, 255, 0.1);
            transform: scale(1.1);
        }

        .transport-btn.play {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            border: none;
            color: white;
            font-size: 1.3rem;
        }

        .transport-btn.play:hover {
            box-shadow: 0 0 20px rgba(255, 0, 51, 0.5);
        }

        .speed-control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .speed-control-group label {
            color: var(--gray);
            font-size: 0.85rem;
        }

        .speed-buttons {
            display: flex;
            gap: 5px;
        }

        .speed-btn {
            padding: 6px 12px;
            border: 1px solid rgba(0, 243, 255, 0.3);
            background: rgba(0, 0, 0, 0.3);
            color: var(--gray);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
        }

        .speed-btn:hover, .speed-btn.active {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(0, 243, 255, 0.1);
        }

        .speed-slider, .volume-slider {
            width: 150px;
            height: 6px;
            -webkit-appearance: none;
            background: rgba(0, 243, 255, 0.2);
            border-radius: 3px;
        }

        .speed-slider::-webkit-slider-thumb, .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
        }

        .speed-value {
            color: var(--primary);
            font-weight: 600;
            min-width: 50px;
        }

        .volume-control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-control-group label {
            color: var(--gray);
        }

        .playback-options {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .option-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--gray);
            cursor: pointer;
        }

        .option-checkbox input {
            accent-color: var(--primary);
            width: 18px;
            height: 18px;
        }

        /* 快速編輯按鈕 */
        .quick-edit-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
        }

        .quick-edit-btn {
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--primary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .quick-edit-btn:hover {
            background: rgba(0, 243, 255, 0.1);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        /* 格式轉換器 */
        .converter-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .format-select, .quality-select {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .format-select label, .quality-select label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* 直播準備頁面樣式 */
        .status-badge {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-badge.success {
            background: rgba(46, 213, 115, 0.2);
            color: var(--success);
            border: 1px solid rgba(46, 213, 115, 0.3);
        }

        .status-badge.warning {
            background: rgba(255, 165, 2, 0.2);
            color: var(--warning);
            border: 1px solid rgba(255, 165, 2, 0.3);
        }

        .equipment-check-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }

        .check-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border-left: 3px solid var(--gray);
        }

        .check-item.success {
            border-left-color: var(--success);
        }

        .check-item.warning {
            border-left-color: var(--warning);
        }

        .check-item.error {
            border-left-color: var(--danger);
        }

        .check-item i:first-child {
            color: var(--gray);
            width: 20px;
            text-align: center;
        }

        .check-name {
            color: var(--light);
            font-weight: 600;
            min-width: 80px;
        }

        .check-status {
            color: var(--gray);
            font-size: 0.85rem;
            flex: 1;
        }

        .status-icon {
            font-size: 1.1rem;
        }

        .check-item.success .status-icon {
            color: var(--success);
        }

        .check-item.warning .status-icon {
            color: var(--warning);
        }

        /* 幕前/幕後控制 */
        .stage-toggle {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stage-btn {
            padding: 20px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(0, 243, 255, 0.3);
            border-radius: 12px;
            color: var(--gray);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .stage-btn i {
            font-size: 2rem;
            display: block;
            margin-bottom: 10px;
        }

        .stage-btn span {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .stage-btn small {
            font-size: 0.75rem;
            opacity: 0.7;
        }

        .stage-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .stage-btn.active {
            border-color: var(--tv-red);
            background: rgba(255, 0, 51, 0.1);
            color: var(--light);
        }

        .stage-btn.active i {
            color: var(--tv-red);
        }

        .stage-btn[data-stage="frontstage"].active {
            border-color: var(--success);
            background: rgba(46, 213, 115, 0.1);
        }

        .stage-btn[data-stage="frontstage"].active i {
            color: var(--success);
        }

        .stage-status {
            margin-bottom: 20px;
        }

        .stage-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
        }

        .stage-indicator.backstage {
            background: rgba(255, 0, 51, 0.1);
            border: 1px solid rgba(255, 0, 51, 0.3);
            color: var(--tv-red);
        }

        .stage-indicator.frontstage {
            background: rgba(46, 213, 115, 0.1);
            border: 1px solid rgba(46, 213, 115, 0.3);
            color: var(--success);
        }

        .stage-preview {
            margin-bottom: 20px;
        }

        .preview-label {
            color: var(--gray);
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .preview-screen-mini {
            height: 150px;
            background: #000;
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .backstage-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--gray);
        }

        .backstage-overlay i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--tv-red);
        }

        .transition-options {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .transition-options label {
            color: var(--gray);
        }

        /* 提詞器 */
        .teleprompter-screen {
            background: #000;
            border-radius: 10px;
            padding: 20px;
            height: 150px;
            overflow: hidden;
            margin-bottom: 15px;
            border: 2px solid rgba(0, 243, 255, 0.2);
        }

        .script-content {
            color: #fff;
            font-size: 1.2rem;
            line-height: 1.8;
            text-align: center;
        }

        .teleprompter-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .scroll-speed, .font-size-control {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .scroll-speed label, .font-size-control label {
            color: var(--gray);
            min-width: 80px;
        }

        .scroll-speed input, .font-size-control input {
            flex: 1;
        }

        /* 倒數計時器 */
        .countdown-display {
            text-align: center;
            padding: 30px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .countdown-time {
            font-family: 'Orbitron', monospace;
            font-size: 3rem;
            color: var(--primary);
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.5);
        }

        .countdown-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .time-preset-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .preset-btn {
            padding: 10px 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: var(--gray);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .preset-btn:hover, .preset-btn.active {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(0, 243, 255, 0.1);
        }

        .countdown-actions {
            display: flex;
            gap: 10px;
        }

        /* 直播清單 */
        .checklist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid rgba(0, 243, 255, 0.1);
            transition: all 0.3s ease;
        }

        .checklist-item:hover {
            border-color: rgba(0, 243, 255, 0.3);
        }

        .checklist-item.checked {
            border-left: 3px solid var(--success);
        }

        .checklist-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--success);
        }

        .checklist-item label {
            color: var(--light);
            cursor: pointer;
            flex: 1;
        }

        .checklist-item.checked label {
            color: var(--gray);
            text-decoration: line-through;
        }

        .checklist-progress {
            background: rgba(46, 213, 115, 0.2);
            color: var(--success);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .checklist-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        /* 響應式調整 */
        @media (max-width: 768px) {
            .audio-file-item {
                flex-wrap: wrap;
            }

            .file-waveform-mini {
                display: none;
            }

            .playback-controls {
                flex-direction: column;
                align-items: flex-start;
            }

            .speed-buttons {
                flex-wrap: wrap;
            }

            .stage-toggle {
                grid-template-columns: 1fr;
            }

            .countdown-time {
                font-size: 2rem;
            }

            .checklist-grid {
                grid-template-columns: 1fr;
            }
        }

        /* 增強模擬預覽面板樣式 */
        .simulation-preview-container {
            background: linear-gradient(165deg, rgba(10, 15, 35, 0.98), rgba(5, 8, 20, 0.99));
            border: 2px solid rgba(0, 243, 255, 0.3);
            border-radius: 20px;
            padding: 25px;
            margin-top: 30px;
            position: relative;
            overflow: hidden;
        }

        .simulation-preview-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--tv-red), var(--primary), var(--tv-yellow), var(--secondary));
            background-size: 300% 100%;
            animation: gradientFlow 4s ease infinite;
        }

        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .simulation-preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 243, 255, 0.2);
        }

        .simulation-preview-title {
            font-size: 1.4rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Orbitron', sans-serif;
        }

        .simulation-preview-title i {
            font-size: 1.6rem;
            color: var(--tv-red);
            animation: pulse 2s infinite;
        }

        .preview-status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(46, 213, 115, 0.15);
            border: 1px solid rgba(46, 213, 115, 0.4);
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--success);
        }

        .preview-status-indicator.active {
            background: rgba(255, 71, 87, 0.15);
            border-color: rgba(255, 71, 87, 0.4);
            color: var(--danger);
            animation: statusPulse 1.5s infinite;
        }

        @keyframes statusPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .preview-status-indicator::before {
            content: '';
            width: 8px;
            height: 8px;
            background: currentColor;
            border-radius: 50%;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .simulation-preview-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }

        @media (max-width: 900px) {
            .simulation-preview-content {
                grid-template-columns: 1fr;
            }
        }

        /* 控制面板區域 */
        .control-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(0, 243, 255, 0.15);
        }

        .control-section-title {
            font-size: 1.1rem;
            color: var(--light);
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .control-section-title i {
            color: var(--primary);
        }

        .control-group {
            margin-bottom: 18px;
        }

        .control-group:last-child {
            margin-bottom: 0;
        }

        .control-label {
            display: block;
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .control-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 10px;
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .control-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.2);
        }

        .control-input::placeholder {
            color: var(--gray);
            opacity: 0.6;
        }

        .control-slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .control-slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 4px;
            outline: none;
        }

        .control-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.5);
            transition: transform 0.2s ease;
        }

        .control-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .control-slider-value {
            min-width: 60px;
            text-align: center;
            padding: 6px 12px;
            background: rgba(0, 243, 255, 0.1);
            border-radius: 8px;
            color: var(--primary);
            font-family: 'Orbitron', monospace;
            font-size: 0.9rem;
        }

        .control-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-btn {
            flex: 1;
            min-width: 100px;
            padding: 12px 18px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 10px;
            color: var(--light);
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .control-btn:hover {
            background: rgba(0, 243, 255, 0.15);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .control-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--dark);
            border-color: transparent;
            font-weight: 600;
        }

        .control-btn.danger {
            border-color: rgba(255, 71, 87, 0.5);
            color: var(--danger);
        }

        .control-btn.danger:hover {
            background: rgba(255, 71, 87, 0.15);
        }

        .control-btn.danger.active {
            background: linear-gradient(135deg, var(--danger), #ff6b7a);
            color: white;
        }

        /* 預覽顯示區域 */
        .preview-display {
            background: linear-gradient(145deg, rgba(5, 8, 20, 0.95), rgba(10, 15, 35, 0.9));
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(0, 243, 255, 0.15);
            min-height: 300px;
            display: flex;
            flex-direction: column;
        }

        .preview-display-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .preview-display-title {
            font-size: 1rem;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .preview-display-time {
            font-family: 'Orbitron', monospace;
            color: var(--primary);
            font-size: 0.9rem;
        }

        .preview-output {
            flex: 1;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            overflow: auto;
            font-family: 'Exo 2', monospace;
            font-size: 0.95rem;
            line-height: 1.6;
            color: var(--light);
            position: relative;
        }

        .preview-output.empty {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            font-style: italic;
        }

        .preview-output.empty::before {
            content: '請配置上方設定後點擊執行以查看結果...';
        }

        /* 音頻波形視覺化 */
        .audio-waveform-preview {
            height: 80px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .waveform-bars {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2px;
            height: 100%;
            padding: 10px;
        }

        .waveform-bar {
            width: 4px;
            background: linear-gradient(to top, var(--primary), var(--secondary));
            border-radius: 2px;
            transition: height 0.1s ease;
        }

        /* 頻譜分析器 */
        .spectrum-analyzer {
            height: 100px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            display: flex;
            align-items: flex-end;
            padding: 10px;
            gap: 3px;
            margin-bottom: 15px;
        }

        .spectrum-bar {
            flex: 1;
            background: linear-gradient(to top, var(--tv-green), var(--tv-yellow), var(--tv-red));
            border-radius: 2px 2px 0 0;
            transition: height 0.15s ease;
            min-height: 5px;
        }

        /* 即時數據面板 */
        .realtime-data-panel {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 15px;
        }

        .data-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 10px;
            border: 1px solid rgba(0, 243, 255, 0.1);
            text-align: center;
        }

        .data-item-label {
            font-size: 0.75rem;
            color: var(--gray);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .data-item-value {
            font-family: 'Orbitron', monospace;
            font-size: 1.2rem;
            color: var(--primary);
        }

        .data-item-value.danger {
            color: var(--danger);
        }

        .data-item-value.success {
            color: var(--success);
        }

        .data-item-value.warning {
            color: var(--warning);
        }

        /* 執行按鈕 */
        .execute-btn {
            width: 100%;
            padding: 15px 25px;
            background: linear-gradient(135deg, var(--tv-red), var(--tv-blue));
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            font-family: 'Orbitron', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-top: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .execute-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .execute-btn:hover::before {
            left: 100%;
        }

        .execute-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 0, 51, 0.4);
        }

        .execute-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .execute-btn.running {
            background: linear-gradient(135deg, var(--danger), #ff6b7a);
            animation: pulseBtn 1.5s infinite;
        }

        @keyframes pulseBtn {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(255, 71, 87, 0); }
        }

        /* 模擬結果日誌 */
        .simulation-log {
            margin-top: 15px;
            max-height: 150px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 12px;
        }

        .log-entry {
            padding: 6px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.85rem;
            display: flex;
            gap: 10px;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-time {
            color: var(--gray);
            font-family: 'Orbitron', monospace;
            font-size: 0.75rem;
            min-width: 70px;
        }

        .log-message {
            color: var(--light);
        }

        .log-message.success {
            color: var(--success);
        }

        .log-message.error {
            color: var(--danger);
        }

        .log-message.info {
            color: var(--info);
        }

        /* 電平儀表增強 */
        .level-meter-enhanced {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }

        .level-meter-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .level-meter-label {
            min-width: 30px;
            font-size: 0.8rem;
            color: var(--gray);
            text-align: right;
        }

        .level-meter-bar {
            flex: 1;
            height: 12px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .level-meter-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--tv-green), var(--tv-yellow) 70%, var(--tv-red) 90%);
            border-radius: 6px;
            transition: width 0.1s ease;
        }

        .level-meter-peak {
            position: absolute;
            top: 0;
            width: 3px;
            height: 100%;
            background: var(--tv-red);
            border-radius: 1px;
            transition: left 0.05s ease;
        }

        .level-meter-value {
            min-width: 50px;
            font-family: 'Orbitron', monospace;
            font-size: 0.75rem;
            color: var(--primary);
            text-align: right;
        }
    </style>
</head>
<body>
    <!-- 載入畫面 -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">初始化專業播客模擬平台...</div>
    </div>

    <!-- 首頁 -->
    <section id="homepage">
        <div class="tv-static"></div>
        <div class="scanlines"></div>
        
        <div class="container">
            <nav class="navbar">
                <div>
                    <a href="#" class="nav-brand">
                        <i class="fas fa-tower-broadcast"></i>
                        <div>
                            <div>ProCast Studio</div>
                            <div class="nav-tagline">電視台級專業播客製作平台</div>
                        </div>
                    </a>
                </div>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="nav-controls" id="navControls">
                    <button class="nav-btn" id="guideBtn">
                        <i class="fas fa-map"></i> 流程指南
                    </button>
                    <button class="nav-btn" id="demoBtn">
                        <i class="fas fa-play-circle"></i> 快速演示
                    </button>
                    <button class="nav-btn" id="tutorialBtn">
                        <i class="fas fa-graduation-cap"></i> 互動教學
                    </button>
                    <button class="nav-btn" id="helpBtn">
                        <i class="fas fa-question-circle"></i> 即時幫助
                    </button>
                </div>
            </nav>
            
            <div class="hero">
                <h1>播客 Podcast 及多媒體製作模擬平台</h1>
                <div class="hero-subtitle">專業級音視頻製作工作流程完整模擬體驗</div>
                <p class="hero-description">
                    這是一個全方位的播客及多媒體製作模擬平台，完整模擬從前期策劃、實時直播、錄音收音、混音後期到發佈推廣的專業工作流程。
                    無論您是初學者還是專業製作人，都能在此體驗電視台級別的製作環境，熟悉各種專業工具的操作方式。
                </p>

                <!-- 平台簡介卡片 -->
                <div class="platform-intro">
                    <div class="intro-cards">
                        <div class="intro-card">
                            <div class="intro-icon"><i class="fas fa-podcast"></i></div>
                            <h3>播客製作</h3>
                            <p>完整錄音、編輯、混音流程</p>
                        </div>
                        <div class="intro-card">
                            <div class="intro-icon"><i class="fas fa-broadcast-tower"></i></div>
                            <h3>直播串流</h3>
                            <p>多平台同步串流控制</p>
                        </div>
                        <div class="intro-card">
                            <div class="intro-icon"><i class="fas fa-video"></i></div>
                            <h3>視頻製作</h3>
                            <p>多機位切換與後期剪輯</p>
                        </div>
                        <div class="intro-card">
                            <div class="intro-icon"><i class="fas fa-brain"></i></div>
                            <h3>AI 輔助</h3>
                            <p>智能降噪、轉錄、音樂生成</p>
                        </div>
                    </div>
                </div>

                <!-- CTA 按鈕區 -->
                <div class="hero-cta-section">
                    <button class="main-cta" id="launchSimulator">
                        <i class="fas fa-rocket"></i>
                        啟動模擬平台
                    </button>
                    <button class="guide-cta-btn" id="openGuideModal">
                        <i class="fas fa-book-open"></i>
                        平台運作指南
                    </button>
                </div>
                <p class="cta-hint">點擊「啟動模擬平台」進入完整製作環境，或查看「平台運作指南」了解功能詳情</p>
            </div>
        </div>

        <!-- 版權資訊 -->
        <footer style="margin-top:80px;padding:40px 20px;background:linear-gradient(180deg,transparent,rgba(0,0,0,0.5));text-align:center;">
            <div style="max-width:800px;margin:0 auto;">
                <div style="margin-bottom:20px;">
                    <i class="fas fa-podcast" style="font-size:2.5rem;color:var(--primary);"></i>
                </div>
                <p style="font-size:1.1rem;color:var(--text);margin-bottom:15px;font-weight:500;">
                    © 2025 Create By【 Sam. T 】
                </p>
                <p style="font-size:0.9rem;color:var(--gray);margin-bottom:10px;">
                    Copyright © 2025 Sam. T. All rights reserved.
                </p>
                <p style="font-size:0.85rem;color:var(--gray);margin-bottom:20px;">
                    版權所有 © 2025 Sam. T
                </p>
                <div style="border-top:1px solid rgba(255,255,255,0.1);padding-top:20px;margin-top:20px;">
                    <p style="font-size:0.8rem;color:var(--gray);">
                        <i class="fas fa-shield-alt"></i> 此平台已受版權保護，未經授權不得複製或分發
                    </p>
                    <div style="display:flex;justify-content:center;gap:20px;margin-top:15px;flex-wrap:wrap;">
                        <span style="font-size:0.75rem;color:var(--gray);"><i class="fas fa-microphone"></i> 專業錄音</span>
                        <span style="font-size:0.75rem;color:var(--gray);"><i class="fas fa-broadcast-tower"></i> 直播串流</span>
                        <span style="font-size:0.75rem;color:var(--gray);"><i class="fas fa-robot"></i> AI 工具</span>
                        <span style="font-size:0.75rem;color:var(--gray);"><i class="fas fa-video"></i> 多機位製作</span>
                    </div>
                </div>
            </div>
        </footer>
    </section>

    <!-- 模擬器主容器 -->
    <section id="simulator">
        <div class="simulator-bg"></div>
        
        <div class="container">
            <!-- 層級導航 -->
            <div class="level-navigation">
                <div class="nav-path" id="navPath">
                    <div class="nav-path-item active">
                        <i class="fas fa-home"></i>
                        <span>主控制台</span>
                    </div>
                </div>
                <div class="level-controls">
                    <button class="page-btn" id="backToHome">
                        <i class="fas fa-sign-out-alt"></i> 返回首頁
                    </button>
                    <button class="page-btn btn-success" id="quickSave">
                        <i class="fas fa-save"></i> 快速儲存
                    </button>
                </div>
            </div>

            <!-- 主控制台頁面 -->
            <div class="tool-page active" id="mainConsolePage">
                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-tv"></i>
                            <span>專業播客製作控制台</span>
                        </div>
                        <div class="page-subtitle">
                            選擇工作模式開始製作，或直接進入特定工具。系統支援實時錄音、直播串流與完整後期製作。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn" id="systemSettings">
                            <i class="fas fa-cogs"></i> 系統設定
                        </button>
                        <button class="page-btn btn-warning" id="emergencyStop">
                            <i class="fas fa-stop-circle"></i> 緊急停止
                        </button>
                    </div>
                </div>

                <!-- 工作模式選擇 -->
                <div class="workflow-modes">
                    <div class="mode-card active" data-mode="tv">
                        <div class="mode-badge">電視台級</div>
                        <div class="mode-header">
                            <div class="mode-icon">
                                <i class="fas fa-tv"></i>
                            </div>
                            <div class="mode-title">電視台專業模式</div>
                        </div>
                        <p class="mode-description">
                            全功能專業工作流程，包含前期策劃、實時直播、多機位切換、專業混音與後期製作。
                            適用於專業播客製作團隊與電視台級別製作需求。
                        </p>
                        <ul class="mode-features">
                            <li><i class="fas fa-check"></i> 多機位即時切換 (最高 8 機位)</li>
                            <li><i class="fas fa-check"></i> 專業導播控制台介面</li>
                            <li><i class="fas fa-check"></i> 即時字幕與圖文疊加系統</li>
                            <li><i class="fas fa-check"></i> 多軌同步錄音與混音</li>
                            <li><i class="fas fa-check"></i> 虛擬攝影棚與綠幕合成</li>
                        </ul>
                        <div class="mode-action">
                            <div class="mode-status status-premium">專業級</div>
                            <button class="mode-btn" data-enter-mode="tv">
                                <i class="fas fa-play"></i> 進入專業模式
                            </button>
                        </div>
                    </div>
                    
                    <div class="mode-card" data-mode="kol">
                        <div class="mode-badge">KOL/網紅級</div>
                        <div class="mode-header">
                            <div class="mode-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="mode-title">網紅直播模式</div>
                        </div>
                        <p class="mode-description">
                            專為內容創作者設計的簡化工作流程，專注於直播互���、美顏效果、即時特效與社群整合。
                            適合單人操作與實時觀眾互動。
                        </p>
                        <ul class="mode-features">
                            <li><i class="fas fa-check"></i> 美顏濾鏡與即時特效</li>
                            <li><i class="fas fa-check"></i> 觀眾互動與即時回應</li>
                            <li><i class="fas fa-check"></i> 社群媒體整合發佈</li>
                            <li><i class="fas fa-check"></i> 簡化導播控制介面</li>
                            <li><i class="fas fa-check"></i> 贊助商訊息整合</li>
                        </ul>
                        <div class="mode-action">
                            <div class="mode-status status-ready">就緒</div>
                            <button class="mode-btn" data-enter-mode="kol">
                                <i class="fas fa-play"></i> 進入直播模式
                            </button>
                        </div>
                    </div>
                    
                    <div class="mode-card" data-mode="standard">
                        <div class="mode-badge">標準製作級</div>
                        <div class="mode-header">
                            <div class="mode-icon">
                                <i class="fas fa-podcast"></i>
                            </div>
                            <div class="mode-title">標準播客製作模式</div>
                        </div>
                        <p class="mode-description">
                            傳統播客製作完整流程，專注於音訊品質與內容製作。
                            包含完整錄音、編輯、混音與發佈工具鏈。
                        </p>
                        <ul class="mode-features">
                            <li><i class="fas fa-check"></i> 專業多軌錄音工作室</li>
                            <li><i class="fas fa-check"></i> 完整音訊編輯工具組</li>
                            <li><i class="fas fa-check"></i> 效果處理與母帶製作</li>
                            <li><i class="fas fa-check"></i> RSS 摘要自動生成</li>
                            <li><i class="fas fa-check"></i> 多平台發佈管理</li>
                        </ul>
                        <div class="mode-action">
                            <div class="mode-status status-ready">就緒</div>
                            <button class="mode-btn" data-enter-mode="standard">
                                <i class="fas fa-play"></i> 進入標準模式
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 工具分類 -->
                <h2 style="color: var(--primary); margin: 60px 0 30px; font-size: 2rem;">
                    <i class="fas fa-toolbox"></i> 專業工具分類
                </h2>
                
                <div class="tools-categories">
                    <div class="category-card" data-category="broadcast">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-broadcast-tower"></i>
                            </div>
                            <div>
                                <div class="category-title">直播與廣播</div>
                                <span class="category-level expert">專家級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            專業直播串流工具組，包含場景管理、來源控制、串流設定與即時監控。適合電視台級製作需求。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="obs-director"><i class="fas fa-camera"></i> OBS 場景導播控制台 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="stream-manager"><i class="fas fa-satellite-dish"></i> 多平台串流管理器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="virtual-camera"><i class="fas fa-video"></i> 虛擬攝�����機工作室 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="live-caption"><i class="fas fa-closed-captioning"></i> 即時字幕系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="stream-analytics"><i class="fas fa-chart-line"></i> 串流數據分析儀 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="multi-cam"><i class="fas fa-th-large"></i> 多機位切換控制器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="stream-deck"><i class="fas fa-gamepad"></i> Stream Deck 控制面板 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="broadcast"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="broadcast"><i class="fas fa-rocket"></i> 進入工具</button>
                        </div>
                    </div>

                    <div class="category-card" data-category="recording">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-microphone-alt"></i>
                            </div>
                            <div>
                                <div class="category-title">錄音與收音</div>
                                <span class="category-level professional">專業級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            專業錄音設備模擬，支援多軌錄音、麥克風陣列、監聽控制與音質優化。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="multitrack-studio"><i class="fas fa-wave-square"></i> 多軌錄音工作室 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="monitor-console"><i class="fas fa-headphones"></i> 專業監聽控制台 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="noise-reduction"><i class="fas fa-filter"></i> 即時噪音消除系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="ai-enhance"><i class="fas fa-robot"></i> AI 音訊增強實驗室 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="recording-scheduler"><i class="fas fa-clock"></i> 錄音排程管理器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="mic-array"><i class="fas fa-border-all"></i> 麥克風陣列模擬器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="voice-changer"><i class="fas fa-theater-masks"></i> 變聲器與音色調整 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="recording"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="recording"><i class="fas fa-play"></i> 進入工具</button>
                        </div>
                    </div>

                    <div class="category-card" data-category="mixing">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-sliders-h"></i>
                            </div>
                            <div>
                                <div class="category-title">混音與效果</div>
                                <span class="category-level expert">專家級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            專業音訊處理工具，包含混音控制台、效果器、等化器與動態處理。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="digital-mixer"><i class="fas fa-sliders-h"></i> 32 軌數位混音台 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="effects-suite"><i class="fas fa-magic"></i> 專業效果器套裝 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="parametric-eq"><i class="fas fa-chart-bar"></i> 參數等化器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="dynamics-processor"><i class="fas fa-compress-alt"></i> 動態處理器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="effects-chain"><i class="fas fa-project-diagram"></i> 效果鏈設計器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="reverb-designer"><i class="fas fa-synagogue"></i> 空間混響設計器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="stereo-imager"><i class="fas fa-arrows-alt-h"></i> 立體聲成像工具 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="mixing"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="mixing"><i class="fas fa-play"></i> 進入工具</button>
                        </div>
                    </div>

                    <div class="category-card" data-category="editing">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-edit"></i>
                            </div>
                            <div>
                                <div class="category-title">編輯與後期</div>
                                <span class="category-level professional">專業級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            完整後期製作工具鏈，包含時間軸編輯、特效處理、母帶製作與匯出。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="timeline-editor"><i class="fas fa-cut"></i> 多軌時間軸編輯器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="time-stretch"><i class="fas fa-clock"></i> 時間伸縮與變調工具 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="spectrum-analyzer"><i class="fas fa-search"></i> 頻譜分析儀 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="mastering-studio"><i class="fas fa-file-export"></i> 母帶處理工作站 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="speech-to-text"><i class="fas fa-language"></i> 語音轉文字系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="batch-processor"><i class="fas fa-layer-group"></i> 批次處理引��� <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="audio-repair"><i class="fas fa-wrench"></i> 音訊修復工具 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="editing"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="editing"><i class="fas fa-play"></i> 進入工具</button>
                        </div>
                    </div>

                    <div class="category-card" data-category="settings">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-tools"></i>
                            </div>
                            <div>
                                <div class="category-title">設備與設定</div>
                                <span class="category-level beginner">入門級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            系統設定與設備管理工具，包含設備連接、系統優化與工作環境設定。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="device-manager"><i class="fas fa-plug"></i> 設備連接管理器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="performance-optimizer"><i class="fas fa-cogs"></i> 系統效能優化 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="hotkey-config"><i class="fas fa-keyboard"></i> 快捷鍵設定 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="theme-designer"><i class="fas fa-palette"></i> 介面主題設定 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="project-manager"><i class="fas fa-database"></i> 專案檔案管理 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="backup-system"><i class="fas fa-cloud"></i> 雲端備份系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="audio-driver"><i class="fas fa-microchip"></i> 音訊驅動設定 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="settings"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="settings"><i class="fas fa-play"></i> 進入工具</button>
                        </div>
                    </div>

                    <div class="category-card" data-category="publish">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <div>
                                <div class="category-title">發佈與分享</div>
                                <span class="category-level intermediate">進階級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            內容發佈與分享工具，支援多平台發佈、受眾分析與社群互動。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="rss-generator"><i class="fas fa-rss"></i> RSS 摘要生成器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="multi-publish"><i class="fas fa-share-alt"></i> 多平台發佈助手 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="audience-analytics"><i class="fas fa-chart-pie"></i> 聽眾數據分析 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="social-manager"><i class="fas fa-comments"></i> 社群互動管理器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="schedule-publisher"><i class="fas fa-calendar-alt"></i> 發佈排程系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="seo-optimizer"><i class="fas fa-search-dollar"></i> SEO 優化工具 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="monetization"><i class="fas fa-dollar-sign"></i> 收益管理與贊助 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="publish"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="publish"><i class="fas fa-play"></i> 進入工具</button>
                        </div>
                    </div>

                    <!-- 新增更多專業工具分類 -->
                    <div class="category-card" data-category="ai-tools">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div>
                                <div class="category-title">AI 智能工具</div>
                                <span class="category-level expert">專家級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            人工智能驅動的專業工具，自動化處理與智能輔助製作。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="ai-transcription"><i class="fas fa-file-alt"></i> AI 自動轉錄系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="ai-noise-remove"><i class="fas fa-volume-mute"></i> AI 智能降噪 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="ai-music-gen"><i class="fas fa-music"></i> AI 背景音樂生成 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="ai-voice-clone"><i class="fas fa-user-astronaut"></i> AI 聲音克隆 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="ai-content-suggest"><i class="fas fa-lightbulb"></i> AI 內容建議引擎 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="ai-auto-edit"><i class="fas fa-wand-magic-sparkles"></i> AI 自動剪輯 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="ai-translation"><i class="fas fa-globe"></i> AI 多語言翻譯 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="ai-tools"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="ai-tools"><i class="fas fa-play"></i> 進入工具</button>
                        </div>
                    </div>

                    <div class="category-card" data-category="collaboration">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div>
                                <div class="category-title">協作與團隊</div>
                                <span class="category-level intermediate">進階級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            團隊協作與遠端製作工具，支援多人同步編輯與專案管理。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="remote-studio"><i class="fas fa-globe-americas"></i> 遠端錄音工作室 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="team-chat"><i class="fas fa-comment-dots"></i> 團隊即時通訊 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="version-control"><i class="fas fa-code-branch"></i> 版本控制系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="task-manager"><i class="fas fa-tasks"></i> 任務分配管理 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="review-system"><i class="fas fa-clipboard-check"></i> 審核與回饋系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="guest-booking"><i class="fas fa-user-plus"></i> 嘉賓預約系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="resource-sharing"><i class="fas fa-share-square"></i> 資源共享平台 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="collaboration"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="collaboration"><i class="fas fa-play"></i> 進入工具</button>
                        </div>
                    </div>

                    <!-- 音檔庫 -->
                    <div class="category-card" data-category="audio-library">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-folder-open"></i>
                            </div>
                            <div>
                                <div class="category-title">音檔庫管理</div>
                                <span class="category-level beginner">入門級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            專業音檔管理中心，儲存、回放、編輯錄音檔案，支援速度調整與音訊處理。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="recording-library"><i class="fas fa-microphone"></i> 錄音檔案庫 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="playback-control"><i class="fas fa-play-circle"></i> 進階播放控制 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="speed-control"><i class="fas fa-tachometer-alt"></i> 速度調整工具 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="audio-trimmer"><i class="fas fa-cut"></i> 音訊裁切器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="file-converter"><i class="fas fa-exchange-alt"></i> 格式轉換器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="audio-archive"><i class="fas fa-archive"></i> 歷史存檔管理 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="import-export"><i class="fas fa-file-import"></i> 匯入/匯出工具 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="audio-library"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="audio-library"><i class="fas fa-play"></i> 進入工具</button>
                        </div>
                    </div>

                    <!-- 直播準備 -->
                    <div class="category-card" data-category="live-prep">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-clipboard-check"></i>
                            </div>
                            <div>
                                <div class="category-title">直播前期準備</div>
                                <span class="category-level professional">專業級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            直播前的完整準備工具，包含設備測試、場景佈置、腳本準備與幕前幕後控制。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="equipment-check"><i class="fas fa-check-circle"></i> 設備自動檢測 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="scene-designer"><i class="fas fa-paint-brush"></i> 場景佈置設計 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="script-prompter"><i class="fas fa-scroll"></i> 提詞器系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="backstage-control"><i class="fas fa-theater-masks"></i> 幕前/幕後控制 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="countdown-timer"><i class="fas fa-stopwatch"></i> 倒數計時器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="checklist-manager"><i class="fas fa-tasks"></i> 直播清單管理 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="rehearsal-mode"><i class="fas fa-redo"></i> 排練模式 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="live-prep"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="live-prep"><i class="fas fa-play"></i> 進入���具</button>
                        </div>
                    </div>

                    <!-- 新聞主播設備 -->
                    <div class="category-card" data-category="news-anchor">
                        <div class="category-header">
                            <div class="category-icon">
                                <i class="fas fa-newspaper"></i>
                            </div>
                            <div>
                                <div class="category-title">新聞主播設備</div>
                                <span class="category-level expert">專家級</span>
                            </div>
                        </div>
                        <p class="category-description">
                            專業新聞直播設備模擬，包含提詞器、新聞圖表、即時連線、虛擬演播室等電視台級工具。
                        </p>
                        <ul class="category-tools">
                            <li data-tool="teleprompter-pro"><i class="fas fa-scroll"></i> 專業提詞器系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="news-ticker"><i class="fas fa-rss"></i> 即時新聞跑馬燈 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="virtual-studio"><i class="fas fa-vr-cardboard"></i> 虛擬演播室 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="live-connection"><i class="fas fa-satellite"></i> 即時連線系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="news-graphics"><i class="fas fa-chart-area"></i> 新聞圖表生成器 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="weather-map"><i class="fas fa-cloud-sun"></i> 天氣預報地圖 <i class="fas fa-chevron-right tool-arrow"></i></li>
                            <li data-tool="breaking-news"><i class="fas fa-exclamation-triangle"></i> 突發新聞系統 <i class="fas fa-chevron-right tool-arrow"></i></li>
                        </ul>
                        <div class="category-actions">
                            <button class="category-btn" data-action="info" data-category="news-anchor"><i class="fas fa-info-circle"></i> 詳細說明</button>
                            <button class="category-btn primary" data-action="enter" data-category="news-anchor"><i class="fas fa-rocket"></i> 進入工具</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 電視台專業模式頁面 -->
            <div class="tool-page" id="tvModePage">
                <button class="tool-back-btn" id="backToMain">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>
                
                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-tv"></i>
                            <span>電視台專業模式控制中心</span>
                        </div>
                        <div class="page-subtitle">
                            電視台級專業工作環境，包含導播控制、多機位切換、即時特效與完整製作流程。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn btn-success" id="startLive">
                            <i class="fas fa-broadcast-tower"></i> 開始直播
                        </button>
                        <button class="page-btn" id="tvSettings">
                            <i class="fas fa-cogs"></i> 導播設定
                        </button>
                    </div>
                </div>

                <!-- 實時直播模擬 -->
                <div class="live-simulation">
                    <div class="studio-header">
                        <div class="studio-title">
                            <i class="fas fa-satellite"></i>
                            實時直播控制中心
                        </div>
                        <div class="studio-controls">
                            <button class="control-btn" id="togglePreview">
                                <i class="fas fa-eye"></i> 預覽模式
                            </button>
                            <button class="control-btn" id="addGraphic">
                                <i class="fas fa-images"></i> 添加圖文
                            </button>
                            <button class="control-btn" id="switchCamera">
                                <i class="fas fa-camera-retro"></i> 切換機位
                            </button>
                        </div>
                    </div>
                    
                    <div class="live-preview">
                        <div class="preview-screen">
                            <div class="screen-overlay"></div>
                            <div id="livePreviewContent" style="width: 100%; height: 100%; position: relative;">
                                <video id="cameraPreview" autoplay="" muted="" playsinline="" style="width:100%;height:100%;object-fit:cover;display:none;"></video>
                                <video id="recordingPlayback" controls="" style="width:100%;height:100%;object-fit:cover;display:none;"></video>
                                <div id="cameraPlaceholder" style="width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#1a1a2e,#16213e);">
                                    <i class="fas fa-video" style="font-size:4rem;color:var(--primary);margin-bottom:20px;"></i>
                                    <p style="color:var(--gray);margin-bottom:20px;">點擊下方按鈕啟用攝像頭</p>
                                    <button id="enableCameraBtn" class="control-btn" style="padding:12px 24px;font-size:1rem;">
                                        <i class="fas fa-camera"></i> 啟用攝像頭
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="camera-controls" style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap;">
                            <button class="control-btn" id="startVideoRecording" style="flex:1;min-width:120px;">
                                <i class="fas fa-circle" style="color:var(--danger);"></i> 開始錄影
                            </button>
                            <button class="control-btn" id="stopVideoRecording" style="flex:1;min-width:120px;display:none;">
                                <i class="fas fa-stop"></i> 停止錄影
                            </button>
                            <button class="control-btn" id="playLastRecording" style="flex:1;min-width:120px;display:none;">
                                <i class="fas fa-play"></i> 播放錄影
                            </button>
                            <button class="control-btn" id="downloadVideo" style="flex:1;min-width:120px;display:none;">
                                <i class="fas fa-download"></i> 下載錄影
                            </button>
                        </div>
                        
                        <div class="live-stats">
                            <div class="stat-item">
                                <span class="stat-label">直播狀態</span>
                                <span class="stat-value" id="liveStatus" style="color: var(--success);">準備就緒</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">觀看人數</span>
                                <span class="stat-value" id="viewerCount">1,247</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">串流延遲</span>
                                <span class="stat-value" id="streamLatency">2.3 秒</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">位元率</span>
                                <span class="stat-value" id="streamBitrate">6,500 kbps</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">緩衝狀態</span>
                                <span class="stat-value" id="bufferStatus" style="color: var(--success);">良好</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 專業多機位切換控制台 -->
                <div class="multi-camera-control" style="margin-top:20px;background:var(--surface);border-radius:16px;padding:20px;border:1px solid var(--border);">
                    <div class="studio-header" style="margin-bottom:20px;">
                        <div class="studio-title">
                            <i class="fas fa-th-large"></i>
                            專業多機位切換控制台
                        </div>
                        <div class="studio-controls">
                            <button class="control-btn" id="addCameraSource"><i class="fas fa-plus"></i> 新增來源</button>
                            <button class="control-btn" id="toggleProgramPreview"><i class="fas fa-columns"></i> PGM/PVW</button>
                        </div>
                    </div>

                    <!-- 設備來源選擇 -->
                    <div class="equipment-sources" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;margin-bottom:20px;">
                        <button class="equipment-btn active" data-source="webcam" style="padding:15px;background:linear-gradient(135deg,#2d3436,#636e72);border:2px solid var(--primary);border-radius:12px;color:white;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:8px;">
                            <i class="fas fa-video" style="font-size:1.5rem;"></i>
                            <span>網路攝影機</span>
                            <small style="color:var(--success);font-size:0.7rem;">● 已連接</small>
                        </button>
                        <button class="equipment-btn" data-source="gopro" style="padding:15px;background:linear-gradient(135deg,#0984e3,#74b9ff);border:2px solid transparent;border-radius:12px;color:white;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:8px;">
                            <i class="fas fa-camera" style="font-size:1.5rem;"></i>
                            <span>GoPro Hero</span>
                            <small style="color:var(--gray);font-size:0.7rem;">○ 模擬</small>
                        </button>
                        <button class="equipment-btn" data-source="canon" style="padding:15px;background:linear-gradient(135deg,#d63031,#e17055);border:2px solid transparent;border-radius:12px;color:white;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:8px;">
                            <i class="fas fa-camera-retro" style="font-size:1.5rem;"></i>
                            <span>Canon EOS</span>
                            <small style="color:var(--gray);font-size:0.7rem;">○ 模擬</small>
                        </button>
                        <button class="equipment-btn" data-source="dji" style="padding:15px;background:linear-gradient(135deg,#00b894,#55efc4);border:2px solid transparent;border-radius:12px;color:white;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:8px;">
                            <i class="fas fa-helicopter" style="font-size:1.5rem;"></i>
                            <span>DJI Drone</span>
                            <small style="color:var(--gray);font-size:0.7rem;">○ 模擬</small>
                        </button>
                        <button class="equipment-btn" data-source="rode" style="padding:15px;background:linear-gradient(135deg,#fdcb6e,#f39c12);border:2px solid transparent;border-radius:12px;color:white;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:8px;">
                            <i class="fas fa-microphone" style="font-size:1.5rem;"></i>
                            <span>Rode Wireless</span>
                            <small style="color:var(--gray);font-size:0.7rem;">○ 模擬</small>
                        </button>
                        <button class="equipment-btn" data-source="sony" style="padding:15px;background:linear-gradient(135deg,#6c5ce7,#a29bfe);border:2px solid transparent;border-radius:12px;color:white;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:8px;">
                            <i class="fas fa-film" style="font-size:1.5rem;"></i>
                            <span>Sony A7S</span>
                            <small style="color:var(--gray);font-size:0.7rem;">○ 模擬</small>
                        </button>
                    </div>

                    <!-- 多機位預覽網格 -->
                    <div class="camera-grid" style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:20px;">
                        <div class="camera-source" data-cam="1" style="position:relative;aspect-ratio:16/9;background:linear-gradient(135deg,#1a1a2e,#16213e);border-radius:8px;overflow:hidden;cursor:pointer;border:3px solid var(--primary);">
                            <video id="camPreview1" autoplay="" muted="" playsinline="" style="width:100%;height:100%;object-fit:cover;"></video>
                            <div class="cam-overlay" style="position:absolute;top:0;left:0;right:0;padding:5px 8px;background:linear-gradient(180deg,rgba(0,0,0,0.8),transparent);display:flex;justify-content:space-between;align-items:center;">
                                <span style="font-size:0.7rem;font-weight:bold;color:var(--danger);">● CAM 1</span>
                                <span style="font-size:0.6rem;background:var(--primary);padding:2px 6px;border-radius:4px;">PGM</span>
                            </div>
                            <div class="cam-label" style="position:absolute;bottom:0;left:0;right:0;padding:5px 8px;background:linear-gradient(0deg,rgba(0,0,0,0.8),transparent);font-size:0.7rem;">主機位 - 網路攝影機</div>
                        </div>
                        <div class="camera-source" data-cam="2" style="position:relative;aspect-ratio:16/9;background:linear-gradient(135deg,#0984e3,#74b9ff);border-radius:8px;overflow:hidden;cursor:pointer;border:3px solid transparent;">
                            <div style="width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;">
                                <i class="fas fa-camera" style="font-size:2rem;opacity:0.8;"></i>
                                <small style="margin-top:5px;opacity:0.8;">GoPro 模擬</small>
                            </div>
                            <div class="cam-overlay" style="position:absolute;top:0;left:0;right:0;padding:5px 8px;background:linear-gradient(180deg,rgba(0,0,0,0.5),transparent);">
                                <span style="font-size:0.7rem;font-weight:bold;">● CAM 2</span>
                            </div>
                        </div>
                        <div class="camera-source" data-cam="3" style="position:relative;aspect-ratio:16/9;background:linear-gradient(135deg,#d63031,#e17055);border-radius:8px;overflow:hidden;cursor:pointer;border:3px solid transparent;">
                            <div style="width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;">
                                <i class="fas fa-camera-retro" style="font-size:2rem;opacity:0.8;"></i>
                                <small style="margin-top:5px;opacity:0.8;">Canon 模擬</small>
                            </div>
                            <div class="cam-overlay" style="position:absolute;top:0;left:0;right:0;padding:5px 8px;background:linear-gradient(180deg,rgba(0,0,0,0.5),transparent);">
                                <span style="font-size:0.7rem;font-weight:bold;">● CAM 3</span>
                            </div>
                        </div>
                        <div class="camera-source" data-cam="4" style="position:relative;aspect-ratio:16/9;background:linear-gradient(135deg,#00b894,#55efc4);border-radius:8px;overflow:hidden;cursor:pointer;border:3px solid transparent;">
                            <div style="width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;">
                                <i class="fas fa-helicopter" style="font-size:2rem;opacity:0.8;"></i>
                                <small style="margin-top:5px;opacity:0.8;">DJI 空拍</small>
                            </div>
                            <div class="cam-overlay" style="position:absolute;top:0;left:0;right:0;padding:5px 8px;background:linear-gradient(180deg,rgba(0,0,0,0.5),transparent);">
                                <span style="font-size:0.7rem;font-weight:bold;">● CAM 4</span>
                            </div>
                        </div>
                    </div>

                    <!-- 導播切換控制 -->
                    <div class="director-controls" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;">
                        <div class="control-panel" style="background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;">
                            <h4 style="margin-bottom:12px;font-size:0.9rem;color:var(--gray);"><i class="fas fa-exchange-alt"></i> 轉場效果</h4>
                            <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px;">
                                <button class="transition-btn active" data-transition="cut" style="padding:10px;background:var(--primary);border:none;border-radius:8px;color:white;cursor:pointer;font-size:0.8rem;">硬切 CUT</button>
                                <button class="transition-btn" data-transition="fade" style="padding:10px;background:rgba(255,255,255,0.1);border:none;border-radius:8px;color:white;cursor:pointer;font-size:0.8rem;">淡入淡出</button>
                                <button class="transition-btn" data-transition="wipe" style="padding:10px;background:rgba(255,255,255,0.1);border:none;border-radius:8px;color:white;cursor:pointer;font-size:0.8rem;">擦除 WIPE</button>
                                <button class="transition-btn" data-transition="slide" style="padding:10px;background:rgba(255,255,255,0.1);border:none;border-radius:8px;color:white;cursor:pointer;font-size:0.8rem;">滑動 SLIDE</button>
                            </div>
                            <div style="margin-top:10px;">
                                <label style="font-size:0.75rem;color:var(--gray);">轉場時間</label>
                                <input type="range" id="transitionDuration" min="100" max="2000" value="500" style="width:100%;">
                                <span id="transitionDurationValue" style="font-size:0.75rem;">500ms</span>
                            </div>
                        </div>

                        <div class="control-panel" style="background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;">
                            <h4 style="margin-bottom:12px;font-size:0.9rem;color:var(--gray);"><i class="fas fa-theater-masks"></i> 幕前/幕後</h4>
                            <div style="display:flex;gap:10px;margin-bottom:10px;">
                                <button id="goFrontstage" class="stage-btn active" style="flex:1;padding:12px;background:var(--success);border:none;border-radius:8px;color:white;cursor:pointer;font-weight:bold;">
                                    <i class="fas fa-broadcast-tower"></i> 幕前 LIVE
                                </button>
                                <button id="goBackstage" class="stage-btn" style="flex:1;padding:12px;background:rgba(255,255,255,0.1);border:none;border-radius:8px;color:white;cursor:pointer;">
                                    <i class="fas fa-eye-slash"></i> 幕後
                                </button>
                            </div>
                            <div id="stageStatus" style="text-align:center;padding:8px;background:rgba(0,255,0,0.1);border-radius:8px;font-size:0.8rem;color:var(--success);">
                                <i class="fas fa-circle"></i> 觀眾可見 - 直播中
                            </div>
                        </div>

                        <div class="control-panel" style="background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;">
                            <h4 style="margin-bottom:12px;font-size:0.9rem;color:var(--gray);"><i class="fas fa-layer-group"></i> 圖層覆蓋</h4>
                            <div style="display:flex;flex-direction:column;gap:8px;">
                                <label style="display:flex;align-items:center;gap:8px;font-size:0.85rem;cursor:pointer;">
                                    <input type="checkbox" id="overlayLogo" checked=""> <i class="fas fa-image"></i> 台標 Logo
                                </label>
                                <label style="display:flex;align-items:center;gap:8px;font-size:0.85rem;cursor:pointer;">
                                    <input type="checkbox" id="overlayLowerThird"> <i class="fas fa-closed-captioning"></i> 下三分一字幕
                                </label>
                                <label style="display:flex;align-items:center;gap:8px;font-size:0.85rem;cursor:pointer;">
                                    <input type="checkbox" id="overlayClock" checked=""> <i class="fas fa-clock"></i> 時間顯示
                                </label>
                                <label style="display:flex;align-items:center;gap:8px;font-size:0.85rem;cursor:pointer;">
                                    <input type="checkbox" id="overlayViewers"> <i class="fas fa-users"></i> 觀看人數
                                </label>
                            </div>
                        </div>

                        <div class="control-panel" style="background:rgba(0,0,0,0.3);border-radius:12px;padding:15px;">
                            <h4 style="margin-bottom:12px;font-size:0.9rem;color:var(--gray);"><i class="fas fa-volume-up"></i> 音訊監控</h4>
                            <div style="display:flex;gap:5px;height:80px;align-items:flex-end;margin-bottom:10px;">
                                <div class="audio-bar" style="flex:1;background:linear-gradient(to top,var(--success),var(--warning),var(--danger));height:70%;border-radius:3px;"></div>
                                <div class="audio-bar" style="flex:1;background:linear-gradient(to top,var(--success),var(--warning),var(--danger));height:85%;border-radius:3px;"></div>
                                <div class="audio-bar" style="flex:1;background:linear-gradient(to top,var(--success),var(--warning),var(--danger));height:60%;border-radius:3px;"></div>
                                <div class="audio-bar" style="flex:1;background:linear-gradient(to top,var(--success),var(--warning),var(--danger));height:75%;border-radius:3px;"></div>
                                <div class="audio-bar" style="flex:1;background:linear-gradient(to top,var(--success),var(--warning),var(--danger));height:50%;border-radius:3px;"></div>
                                <div class="audio-bar" style="flex:1;background:linear-gradient(to top,var(--success),var(--warning),var(--danger));height:65%;border-radius:3px;"></div>
                            </div>
                            <div style="display:flex;justify-content:space-between;font-size:0.7rem;color:var(--gray);">
                                <span>-60dB</span>
                                <span>-12dB</span>
                                <span>0dB</span>
                            </div>
                        </div>
                    </div>

                    <!-- 快捷鍵提示 -->
                    <div class="hotkey-hints" style="margin-top:15px;padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;display:flex;flex-wrap:wrap;gap:15px;justify-content:center;">
                        <span style="font-size:0.75rem;color:var(--gray);"><kbd style="background:var(--surface);padding:2px 6px;border-radius:4px;margin-right:3px;">1-4</kbd> 切換機位</span>
                        <span style="font-size:0.75rem;color:var(--gray);"><kbd style="background:var(--surface);padding:2px 6px;border-radius:4px;margin-right:3px;">Space</kbd> 執行轉場</span>
                        <span style="font-size:0.75rem;color:var(--gray);"><kbd style="background:var(--surface);padding:2px 6px;border-radius:4px;margin-right:3px;">F</kbd> 幕前/幕後</span>
                        <span style="font-size:0.75rem;color:var(--gray);"><kbd style="background:var(--surface);padding:2px 6px;border-radius:4px;margin-right:3px;">R</kbd> 開始錄製</span>
                    </div>
                </div>

                <!-- 觀眾預覽畫面 -->
                <div class="audience-preview" style="margin-top:20px;background:var(--surface);border-radius:16px;padding:20px;border:1px solid var(--border);">
                    <div class="studio-header" style="margin-bottom:15px;">
                        <div class="studio-title">
                            <i class="fas fa-tv"></i>
                            觀眾即時預覽 (Program Output)
                        </div>
                        <div class="studio-controls">
                            <button class="control-btn" id="fullscreenPreview"><i class="fas fa-expand"></i> 全螢幕</button>
                            <button class="control-btn" id="takeSnapshot"><i class="fas fa-camera"></i> 截圖</button>
                        </div>
                    </div>
                    <div id="audienceScreen" style="position:relative;aspect-ratio:16/9;background:#000;border-radius:12px;overflow:hidden;">
                        <video id="programOutput" autoplay="" muted="" playsinline="" style="width:100%;height:100%;object-fit:cover;"></video>
                        <!-- 覆蓋層 -->
                        <div id="logoOverlay" style="position:absolute;top:15px;right:15px;background:rgba(0,0,0,0.7);padding:8px 15px;border-radius:8px;font-weight:bold;font-size:0.9rem;">
                            <i class="fas fa-podcast" style="color:var(--primary);"></i> ProCast Studio
                        </div>
                        <div id="clockOverlay" style="position:absolute;top:15px;left:15px;background:rgba(0,0,0,0.7);padding:8px 15px;border-radius:8px;font-size:0.85rem;">
                            <i class="fas fa-clock"></i> <span id="liveClockDisplay">00:00:00</span>
                        </div>
                        <div id="viewerOverlay" style="position:absolute;bottom:15px;right:15px;background:rgba(255,0,0,0.8);padding:6px 12px;border-radius:20px;font-size:0.8rem;display:flex;align-items:center;gap:5px;">
                            <i class="fas fa-eye"></i> <span id="liveViewerDisplay">1,247</span>
                        </div>
                        <div id="lowerThirdOverlay" style="position:absolute;bottom:0;left:0;right:0;background:linear-gradient(90deg,var(--primary),transparent);padding:15px 20px;display:none;">
                            <div style="font-weight:bold;font-size:1.1rem;">節目標題</div>
                            <div style="font-size:0.85rem;opacity:0.9;">副標題或嘉賓資訊</div>
                        </div>
                        <!-- 直播狀態指示 -->
                        <div id="liveIndicator" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.8);padding:20px 40px;border-radius:12px;display:none;">
                            <div style="text-align:center;">
                                <i class="fas fa-pause-circle" style="font-size:3rem;color:var(--warning);margin-bottom:10px;"></i>
                                <div style="font-size:1.2rem;">幕後準備中</div>
                                <div style="font-size:0.85rem;color:var(--gray);">觀眾看到的是待機畫面</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 對講機通訊系統 -->
                <div class="walkie-talkie-system" style="margin-top:20px;background:linear-gradient(135deg,#1a1a2e,#0f0f1a);border-radius:16px;padding:20px;border:1px solid var(--border);">
                    <div class="studio-header" style="margin-bottom:15px;">
                        <div class="studio-title">
                            <i class="fas fa-walkie-talkie"></i>
                            專業對講機通訊系統
                        </div>
                        <div class="studio-controls">
                            <button class="control-btn" id="walkieTalkieConnect" style="background:var(--success);"><i class="fas fa-link"></i> 連接</button>
                        </div>
                    </div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:15px;">
                        <div class="channel-btn" data-channel="director" style="padding:20px;background:linear-gradient(135deg,#e74c3c,#c0392b);border-radius:12px;cursor:pointer;text-align:center;border:3px solid transparent;transition:all 0.3s;">
                            <i class="fas fa-bullhorn" style="font-size:2rem;margin-bottom:10px;display:block;"></i>
                            <div style="font-weight:bold;">導演頻道</div>
                            <small style="opacity:0.8;">Director CH</small>
                        </div>
                        <div class="channel-btn" data-channel="camera" style="padding:20px;background:linear-gradient(135deg,#3498db,#2980b9);border-radius:12px;cursor:pointer;text-align:center;border:3px solid transparent;transition:all 0.3s;">
                            <i class="fas fa-video" style="font-size:2rem;margin-bottom:10px;display:block;"></i>
                            <div style="font-weight:bold;">攝影頻道</div>
                            <small style="opacity:0.8;">Camera CH</small>
                        </div>
                        <div class="channel-btn" data-channel="audio" style="padding:20px;background:linear-gradient(135deg,#9b59b6,#8e44ad);border-radius:12px;cursor:pointer;text-align:center;border:3px solid transparent;transition:all 0.3s;">
                            <i class="fas fa-headphones" style="font-size:2rem;margin-bottom:10px;display:block;"></i>
                            <div style="font-weight:bold;">音控頻道</div>
                            <small style="opacity:0.8;">Audio CH</small>
                        </div>
                        <div class="channel-btn" data-channel="stage" style="padding:20px;background:linear-gradient(135deg,#f39c12,#e67e22);border-radius:12px;cursor:pointer;text-align:center;border:3px solid transparent;transition:all 0.3s;">
                            <i class="fas fa-lightbulb" style="font-size:2rem;margin-bottom:10px;display:block;"></i>
                            <div style="font-weight:bold;">燈光頻道</div>
                            <small style="opacity:0.8;">Lighting CH</small>
                        </div>
                    </div>
                    <div style="margin-top:15px;display:flex;gap:10px;flex-wrap:wrap;">
                        <button id="pttButton" style="flex:1;min-width:200px;padding:20px;background:linear-gradient(135deg,#27ae60,#2ecc71);border:none;border-radius:12px;color:white;font-size:1.1rem;font-weight:bold;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;">
                            <i class="fas fa-microphone"></i> 按住說話 (PTT)
                        </button>
                        <button id="aiVoiceBtn" style="padding:20px;background:linear-gradient(135deg,var(--primary),var(--secondary));border:none;border-radius:12px;color:white;cursor:pointer;">
                            <i class="fas fa-robot"></i> AI 語音
                        </button>
                    </div>
                    <div id="walkieStatus" style="margin-top:15px;padding:15px;background:rgba(0,0,0,0.3);border-radius:8px;display:flex;align-items:center;gap:10px;">
                        <div style="width:12px;height:12px;background:var(--success);border-radius:50%;animation:pulse 1.5s infinite;"></div>
                        <span>頻道就緒 - 等待通訊...</span>
                    </div>
                </div>

                <!-- 舞台燈光控制系統 -->
                <div class="stage-lighting-control" style="margin-top:20px;background:linear-gradient(135deg,#16213e,#0f0f1a);border-radius:16px;padding:20px;border:1px solid var(--border);">
                    <div class="studio-header" style="margin-bottom:15px;">
                        <div class="studio-title">
                            <i class="fas fa-lightbulb"></i>
                            舞台燈光控制系統
                        </div>
                        <div class="studio-controls">
                            <button class="control-btn" id="masterLightOn" style="background:var(--warning);"><i class="fas fa-power-off"></i> 主燈</button>
                            <button class="control-btn" id="blackoutBtn"><i class="fas fa-moon"></i> Blackout</button>
                        </div>
                    </div>

                    <!-- 燈光預覽 -->
                    <div id="stageLightPreview" style="height:120px;background:linear-gradient(180deg,#000,#1a1a2e);border-radius:12px;margin-bottom:15px;position:relative;overflow:hidden;display:flex;justify-content:space-around;align-items:flex-start;padding-top:10px;">
                        <div class="spotlight" data-light="1" style="width:60px;height:80px;background:radial-gradient(ellipse at top,rgba(255,100,100,0.8),transparent 70%);"></div>
                        <div class="spotlight" data-light="2" style="width:60px;height:80px;background:radial-gradient(ellipse at top,rgba(100,255,100,0.8),transparent 70%);"></div>
                        <div class="spotlight" data-light="3" style="width:60px;height:80px;background:radial-gradient(ellipse at top,rgba(100,100,255,0.8),transparent 70%);"></div>
                        <div class="spotlight" data-light="4" style="width:60px;height:80px;background:radial-gradient(ellipse at top,rgba(255,255,100,0.8),transparent 70%);"></div>
                        <div class="spotlight" data-light="5" style="width:60px;height:80px;background:radial-gradient(ellipse at top,rgba(255,100,255,0.8),transparent 70%);"></div>
                    </div>

                    <!-- 燈光控制 -->
                    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;margin-bottom:15px;">
                        <button class="light-ctrl-btn active" data-effect="spotlight" style="padding:15px;background:rgba(255,255,255,0.1);border:2px solid var(--primary);border-radius:10px;color:white;cursor:pointer;">
                            <i class="fas fa-sun"></i> 射燈
                        </button>
                        <button class="light-ctrl-btn" data-effect="rainbow" style="padding:15px;background:rgba(255,255,255,0.1);border:2px solid transparent;border-radius:10px;color:white;cursor:pointer;">
                            <i class="fas fa-rainbow"></i> 幻彩
                        </button>
                        <button class="light-ctrl-btn" data-effect="strobe" style="padding:15px;background:rgba(255,255,255,0.1);border:2px solid transparent;border-radius:10px;color:white;cursor:pointer;">
                            <i class="fas fa-bolt"></i> 閃爍
                        </button>
                        <button class="light-ctrl-btn" data-effect="fade" style="padding:15px;background:rgba(255,255,255,0.1);border:2px solid transparent;border-radius:10px;color:white;cursor:pointer;">
                            <i class="fas fa-adjust"></i> 漸變
                        </button>
                        <button class="light-ctrl-btn" data-effect="chase" style="padding:15px;background:rgba(255,255,255,0.1);border:2px solid transparent;border-radius:10px;color:white;cursor:pointer;">
                            <i class="fas fa-running"></i> 追蹤
                        </button>
                        <button class="light-ctrl-btn" data-effect="pulse" style="padding:15px;background:rgba(255,255,255,0.1);border:2px solid transparent;border-radius:10px;color:white;cursor:pointer;">
                            <i class="fas fa-heartbeat"></i> 脈動
                        </button>
                    </div>

                    <!-- 顏色選擇 -->
                    <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:15px;">
                        <div class="color-preset" data-color="#ff0000" style="width:40px;height:40px;background:#ff0000;border-radius:50%;cursor:pointer;border:3px solid white;"></div>
                        <div class="color-preset" data-color="#00ff00" style="width:40px;height:40px;background:#00ff00;border-radius:50%;cursor:pointer;border:3px solid transparent;"></div>
                        <div class="color-preset" data-color="#0000ff" style="width:40px;height:40px;background:#0000ff;border-radius:50%;cursor:pointer;border:3px solid transparent;"></div>
                        <div class="color-preset" data-color="#ffff00" style="width:40px;height:40px;background:#ffff00;border-radius:50%;cursor:pointer;border:3px solid transparent;"></div>
                        <div class="color-preset" data-color="#ff00ff" style="width:40px;height:40px;background:#ff00ff;border-radius:50%;cursor:pointer;border:3px solid transparent;"></div>
                        <div class="color-preset" data-color="#00ffff" style="width:40px;height:40px;background:#00ffff;border-radius:50%;cursor:pointer;border:3px solid transparent;"></div>
                        <div class="color-preset" data-color="#ffffff" style="width:40px;height:40px;background:#ffffff;border-radius:50%;cursor:pointer;border:3px solid transparent;"></div>
                        <input type="color" id="customLightColor" value="#00f3ff" style="width:40px;height:40px;border:none;border-radius:50%;cursor:pointer;">
                    </div>

                    <!-- 亮度控制 -->
                    <div style="display:flex;align-items:center;gap:15px;">
                        <span><i class="fas fa-sun"></i> 亮度</span>
                        <input type="range" id="lightBrightness" min="0" max="100" value="80" style="flex:1;">
                        <span id="brightnessValue">80%</span>
                    </div>
                </div>

                <!-- 錄音工作室 -->
                <div class="recording-studio">
                    <div class="studio-header">
                        <div class="studio-title">
                            <i class="fas fa-microphone-alt"></i>
                            專業錄音工作室
                        </div>
                        <div class="studio-controls">
                            <button class="control-btn" id="toggleMonitoring">
                                <i class="fas fa-headphones"></i> 監聽控制
                            </button>
                            <button class="control-btn" id="noiseReduction">
                                <i class="fas fa-filter"></i> 降噪設定
                            </button>
                            <button class="control-btn btn-record" id="startRecording">
                                <i class="fas fa-circle"></i> <span id="recordButtonText">開始錄音</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="audio-visualization">
                        <div class="visualizer-container" id="audioVisualizer">
                            <!-- 音頻可視化條將由 JavaScript 生成 -->
                        </div>
                        <div class="spectrum-analyzer"></div>
                    </div>
                    
                    <div class="recording-controls">
                        <div class="control-group">
                            <div class="control-label">
                                <span>主音量</span>
                                <span class="control-value" id="masterVolumeValue">-3 dB</span>
                            </div>
                            <input type="range" min="-60" max="12" value="-3" class="control-slider" id="masterVolume">
                        </div>
                        <div class="control-group">
                            <div class="control-label">
                                <span>高頻增強</span>
                                <span class="control-value" id="trebleValue">+2 dB</span>
                            </div>
                            <input type="range" min="-12" max="12" value="2" class="control-slider" id="trebleBoost">
                        </div>
                        <div class="control-group">
                            <div class="control-label">
                                <span>低頻增強</span>
                                <span class="control-value" id="bassValue">+1 dB</span>
                            </div>
                            <input type="range" min="-12" max="12" value="1" class="control-slider" id="bassBoost">
                        </div>
                        <div class="control-group">
                            <div class="control-label">
                                <span>壓縮強度</span>
                                <span class="control-value" id="compressionValue">4:1</span>
                            </div>
                            <input type="range" min="1" max="20" value="4" class="control-slider" id="compression">
                        </div>
                    </div>
                    
                    <div class="track-management">
                        <h3 style="color: var(--primary); margin-bottom: 20px;">
                            <i class="fas fa-layer-group"></i> 錄音軌道管理
                        </h3>
                        <div class="track-grid" id="trackGrid">
                            <!-- 軌道將由 JavaScript 動態生成 -->
                        </div>
                    </div>
                </div>

                <!-- 進度指示器 -->
                <div class="progress-container">
                    <div class="progress-header">
                        <div class="progress-title">
                            <i class="fas fa-tasks"></i>
                            電視台級製作進度
                        </div>
                        <div class="progress-stats">完成度: <span id="progressPercent">0</span>% | 階段: <span id="currentStage">前期準備</span></div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-steps">
                        <div class="progress-step">
                            <div class="step-indicator active" id="stage1">1</div>
                            <div class="step-label active">前期準備</div>
                        </div>
                        <div class="progress-step">
                            <div class="step-indicator" id="stage2">2</div>
                            <div class="step-label">設備設定</div>
                        </div>
                        <div class="progress-step">
                            <div class="step-indicator" id="stage3">3</div>
                            <div class="step-label">直播錄製</div>
                        </div>
                        <div class="progress-step">
                            <div class="step-indicator" id="stage4">4</div>
                            <div class="step-label">後期製作</div>
                        </div>
                        <div class="progress-step">
                            <div class="step-indicator" id="stage5">5</div>
                            <div class="step-label">發佈推廣</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 標準模式頁面 -->
            <div class="tool-page" id="standardModePage">
                <button class="tool-back-btn" id="backToMain2">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>
                
                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-podcast"></i>
                            <span>標準播客製作工作室</span>
                        </div>
                        <div class="page-subtitle">
                            專注於音訊品質的傳統播客製作環境，包含完整錄音、編輯與發佈工具鏈。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn btn-success" id="newProject">
                            <i class="fas fa-plus"></i> 新增專案
                        </button>
                        <button class="page-btn" id="openProject">
                            <i class="fas fa-folder-open"></i> 開啟專案
                        </button>
                    </div>
                </div>

                <!-- 後期製作工作室 -->
                <div class="post-production">
                    <div class="studio-header">
                        <div class="studio-title">
                            <i class="fas fa-cut"></i>
                            多軌時間軸編輯器
                        </div>
                        <div class="studio-controls">
                            <button class="control-btn" id="zoomIn">
                                <i class="fas fa-search-plus"></i> 放大
                            </button>
                            <button class="control-btn" id="zoomOut">
                                <i class="fas fa-search-minus"></i> 縮小
                            </button>
                            <button class="control-btn" id="toggleSnap">
                                <i class="fas fa-magnet"></i> 對齊網格
                            </button>
                        </div>
                    </div>
                    
                    <div class="timeline-container" id="timelineContainer">
                        <div class="timeline-ruler" id="timelineRuler">
                            <!-- 時間標尺將由 JavaScript 生成 -->
                        </div>
                        <div class="timeline-track" id="mainTrack">
                            <div class="track-label">主音軌</div>
                        </div>
                        <div class="timeline-track" id="musicTrack">
                            <div class="track-label">背景音樂</div>
                        </div>
                        <div class="timeline-track" id="effectsTrack">
                            <div class="track-label">音效軌</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 直播與廣播工具頁面 -->
            <div class="tool-page" id="broadcastToolsPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-broadcast-tower"></i>
                            <span>直播與廣播控制中心</span>
                        </div>
                        <div class="page-subtitle">
                            專業直播串流工具組，包含場景管理、多平台串流、即時監控與互動功能。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn btn-success" id="startBroadcast">
                            <i class="fas fa-broadcast-tower"></i> 開始廣播
                        </button>
                        <button class="page-btn" id="broadcastSettings">
                            <i class="fas fa-cogs"></i> 廣播設定
                        </button>
                    </div>
                </div>

                <div class="category-tool-grid">
                    <!-- 場景控制台 -->
                    <div class="tool-panel" data-tool-id="scene-controller">
                        <div class="tool-panel-header">
                            <i class="fas fa-th-large"></i>
                            <span>場景切換控制台</span>
                            <span class="tool-status live">LIVE</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="scene-grid">
                                <div class="scene-item active" data-scene="1">
                                    <div class="scene-preview"><i class="fas fa-user"></i></div>
                                    <span>主持人</span>
                                </div>
                                <div class="scene-item" data-scene="2">
                                    <div class="scene-preview"><i class="fas fa-users"></i></div>
                                    <span>雙人</span>
                                </div>
                                <div class="scene-item" data-scene="3">
                                    <div class="scene-preview"><i class="fas fa-desktop"></i></div>
                                    <span>螢幕分享</span>
                                </div>
                                <div class="scene-item" data-scene="4">
                                    <div class="scene-preview"><i class="fas fa-images"></i></div>
                                    <span>圖文展示</span>
                                </div>
                                <div class="scene-item" data-scene="5">
                                    <div class="scene-preview"><i class="fas fa-video"></i></div>
                                    <span>片頭動畫</span>
                                </div>
                                <div class="scene-item" data-scene="6">
                                    <div class="scene-preview"><i class="fas fa-pause"></i></div>
                                    <span>休息畫面</span>
                                </div>
                            </div>
                            <div class="transition-controls">
                                <label>轉場效果：</label>
                                <select class="tool-select" id="transitionType">
                                    <option value="cut">直切 (Cut)</option>
                                    <option value="fade">淡入淡出 (Fade)</option>
                                    <option value="slide">滑動 (Slide)</option>
                                    <option value="zoom">縮放 (Zoom)</option>
                                    <option value="wipe">擦除 (Wipe)</option>
                                </select>
                                <label>時長：</label>
                                <input type="range" min="100" max="2000" value="500" class="tool-slider" id="transitionDuration">
                                <span id="transitionDurationValue">500ms</span>
                            </div>
                        </div>
                    </div>

                    <!-- 串流狀態監控 -->
                    <div class="tool-panel" data-tool-id="stream-monitor">
                        <div class="tool-panel-header">
                            <i class="fas fa-chart-line"></i>
                            <span>串流狀態監控</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="stream-stats">
                                <div class="stat-item">
                                    <div class="stat-label">位元率</div>
                                    <div class="stat-value" id="bitrateValue">6000 kbps</div>
                                    <div class="stat-bar"><div class="stat-bar-fill" style="width: 80%"></div></div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">丟幀率</div>
                                    <div class="stat-value" id="dropFrameValue">0.2%</div>
                                    <div class="stat-bar success"><div class="stat-bar-fill" style="width: 5%"></div></div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">CPU 使用率</div>
                                    <div class="stat-value" id="cpuValue">45%</div>
                                    <div class="stat-bar warning"><div class="stat-bar-fill" style="width: 45%"></div></div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-label">觀眾人數</div>
                                    <div class="stat-value" id="viewerValue">1,234</div>
                                    <div class="stat-trend up"><i class="fas fa-arrow-up"></i> +12%</div>
                                </div>
                            </div>
                            <div class="platform-status">
                                <div class="platform-item connected"><i class="fab fa-youtube"></i> YouTube</div>
                                <div class="platform-item connected"><i class="fab fa-twitch"></i> Twitch</div>
                                <div class="platform-item"><i class="fab fa-facebook"></i> Facebook</div>
                            </div>
                        </div>
                    </div>

                    <!-- 即時字幕系統 -->
                    <div class="tool-panel" data-tool-id="live-caption-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-closed-captioning"></i>
                            <span>即時字幕系統</span>
                            <label class="tool-switch">
                                <input type="checkbox" id="captionEnabled">
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        <div class="tool-panel-content">
                            <div class="caption-preview">
                                <div class="caption-text" id="captionPreview">歡迎收看今天的節目...</div>
                            </div>
                            <div class="caption-controls">
                                <select class="tool-select" id="captionLanguage">
                                    <option value="zh-TW">繁體中文</option>
                                    <option value="zh-CN">簡體中文</option>
                                    <option value="en">English</option>
                                    <option value="ja">日本語</option>
                                    <option value="ko">한국어</option>
                                </select>
                                <button class="tool-btn" id="captionStyle"><i class="fas fa-palette"></i> 樣式</button>
                            </div>
                            <div class="caption-history" id="captionHistory">
                                <div class="history-item">00:00:05 - 大家好，歡迎收看...</div>
                                <div class="history-item">00:00:12 - 今天我們要討論的主題是...</div>
                            </div>
                        </div>
                    </div>

                    <!-- 互動面板 -->
                    <div class="tool-panel" data-tool-id="interaction-panel">
                        <div class="tool-panel-header">
                            <i class="fas fa-comments"></i>
                            <span>觀眾互動面板</span>
                            <span class="notification-badge" id="chatCount">25</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="chat-feed" id="chatFeed">
                                <div class="chat-message"><span class="chat-user">@User123:</span> 精彩！</div>
                                <div class="chat-message"><span class="chat-user">@Fan456:</span> 請問可以詳細說明嗎？</div>
                                <div class="chat-message highlight"><span class="chat-user">@Supporter:</span> 打賞 $100</div>
                            </div>
                            <div class="poll-section">
                                <div class="poll-title">即時投票</div>
                                <div class="poll-option">
                                    <span>選項 A</span>
                                    <div class="poll-bar"><div class="poll-fill" style="width: 65%">65%</div></div>
                                </div>
                                <div class="poll-option">
                                    <span>選項 B</span>
                                    <div class="poll-bar"><div class="poll-fill" style="width: 35%">35%</div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 增強模擬預覽面板 - 直播控制 -->
                <div class="simulation-preview-container" id="broadcastSimPreview">
                    <div class="simulation-preview-header">
                        <div class="simulation-preview-title">
                            <i class="fas fa-satellite-dish"></i>
                            <span>即時模���預���</span>
                        </div>
                        <div class="preview-status-indicator" id="broadcastStatusIndicator">
                            <span>待機中</span>
                        </div>
                    </div>
                    <div class="simulation-preview-content">
                        <!-- 控制面板 -->
                        <div class="control-section">
                            <div class="control-section-title">
                                <i class="fas fa-sliders-h"></i>
                                <span>串流參數配置</span>
                            </div>

                            <div class="control-group">
                                <label class="control-label">串流標題</label>
                                <input type="text" class="control-input" id="streamTitleInput" placeholder="輸入直播標題...">
                            </div>

                            <div class="control-group">
                                <label class="control-label">位元率 (kbps)</label>
                                <div class="control-slider-container">
                                    <input type="range" class="control-slider" id="bitrateSlider" min="1000" max="10000" value="6000">
                                    <span class="control-slider-value" id="bitrateSliderValue">6000</span>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">畫質預設</label>
                                <div class="control-buttons">
                                    <button class="control-btn" data-quality="720p">720p</button>
                                    <button class="control-btn active" data-quality="1080p">1080p</button>
                                    <button class="control-btn" data-quality="4k">4K</button>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">音訊增益</label>
                                <div class="control-slider-container">
                                    <input type="range" class="control-slider" id="audioGainSlider" min="0" max="100" value="75">
                                    <span class="control-slider-value" id="audioGainValue">75%</span>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">串流平台</label>
                                <div class="control-buttons">
                                    <button class="control-btn active" data-platform="youtube"><i class="fab fa-youtube"></i> YouTube</button>
                                    <button class="control-btn" data-platform="twitch"><i class="fab fa-twitch"></i> Twitch</button>
                                    <button class="control-btn" data-platform="facebook"><i class="fab fa-facebook"></i> FB</button>
                                </div>
                            </div>

                            <button class="execute-btn" id="startSimulationBtn">
                                <i class="fas fa-play"></i>
                                <span>開始模擬串流</span>
                            </button>
                        </div>

                        <!-- 預覽顯示區 -->
                        <div class="preview-display">
                            <div class="preview-display-header">
                                <div class="preview-display-title">
                                    <i class="fas fa-chart-area"></i>
                                    <span>即時輸出監控</span>
                                </div>
                                <div class="preview-display-time" id="simulationTimer">00:00:00</div>
                            </div>

                            <!-- 頻譜分析器 -->
                            <div class="spectrum-analyzer" id="spectrumAnalyzer">
                                <!-- 動態生成頻譜條 -->
                            </div>

                            <!-- 電平儀表 -->
                            <div class="level-meter-enhanced">
                                <div class="level-meter-row">
                                    <span class="level-meter-label">L</span>
                                    <div class="level-meter-bar">
                                        <div class="level-meter-fill" id="levelMeterL" style="width: 0%"></div>
                                        <div class="level-meter-peak" id="peakL" style="left: 0%"></div>
                                    </div>
                                    <span class="level-meter-value" id="levelValueL">-∞ dB</span>
                                </div>
                                <div class="level-meter-row">
                                    <span class="level-meter-label">R</span>
                                    <div class="level-meter-bar">
                                        <div class="level-meter-fill" id="levelMeterR" style="width: 0%"></div>
                                        <div class="level-meter-peak" id="peakR" style="left: 0%"></div>
                                    </div>
                                    <span class="level-meter-value" id="levelValueR">-∞ dB</span>
                                </div>
                            </div>

                            <!-- 即時數據 -->
                            <div class="realtime-data-panel">
                                <div class="data-item">
                                    <div class="data-item-label">位元率</div>
                                    <div class="data-item-value" id="realtimeBitrate">0 kbps</div>
                                </div>
                                <div class="data-item">
                                    <div class="data-item-label">丟幀率</div>
                                    <div class="data-item-value success" id="realtimeDropFrame">0.0%</div>
                                </div>
                                <div class="data-item">
                                    <div class="data-item-label">觀眾人數</div>
                                    <div class="data-item-value" id="realtimeViewers">0</div>
                                </div>
                                <div class="data-item">
                                    <div class="data-item-label">延遲</div>
                                    <div class="data-item-value success" id="realtimeLatency">0 ms</div>
                                </div>
                            </div>

                            <!-- 模擬日誌 -->
                            <div class="simulation-log" id="simulationLog">
                                <div class="log-entry">
                                    <span class="log-time">--:--:--</span>
                                    <span class="log-message info">系統就緒，等待開始模擬...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 網紅直播模式頁面 -->
            <div class="tool-page" id="kolModePage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>
                
                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-star"></i>
                            <span>網紅直播模式控制中心</span>
                        </div>
                        <div class="page-subtitle">
                            專為內容創作者設計的簡化直播環境，專注於觀眾互動、美顏效果與即時特效。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn btn-success" id="startLiveKol">
                            <i class="fas fa-broadcast-tower"></i> 開始直播
                        </button>
                        <button class="page-btn" id="kolSettings">
                            <i class="fas fa-cogs"></i> 直播設定
                        </button>
                    </div>
                </div>

                <!-- 實時直播模擬 -->
                <div class="live-simulation">
                    <div class="studio-header">
                        <div class="studio-title">
                            <i class="fas fa-satellite"></i>
                            實時直播控制中心
                        </div>
                        <div class="studio-controls">
                            <button class="control-btn" id="toggleBeautyFilter">
                                <i class="fas fa-magic"></i> 美顏濾鏡
                            </button>
                            <button class="control-btn" id="addSticker">
                                <i class="fas fa-smile"></i> 添加貼圖
                            </button>
                            <button class="control-btn" id="switchCameraKol">
                                <i class="fas fa-camera-retro"></i> 切換鏡頭
                            </button>
                        </div>
                    </div>
                    
                    <div class="live-preview">
                        <div class="preview-screen">
                            <div class="screen-overlay"></div>
                            <div id="livePreviewContentKol" style="width: 100%; height: 100%; position: relative;">
                                <video id="cameraPreviewKol" autoplay="" muted="" playsinline="" style="width:100%;height:100%;object-fit:cover;display:none;"></video>
                                <div id="cameraPlaceholderKol" style="width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#1a1a2e,#16213e);">
                                    <i class="fas fa-video" style="font-size:4rem;color:var(--secondary);margin-bottom:20px;"></i>
                                    <p style="color:var(--gray);margin-bottom:20px;">網紅直播模式預覽</p>
                                    <button id="enableCameraBtnKol" class="control-btn" style="padding:12px 24px;font-size:1rem;">
                                        <i class="fas fa-camera"></i> 啟用鏡頭
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="camera-controls" style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap;">
                            <button class="control-btn" id="startVideoRecordingKol" style="flex:1;min-width:120px;">
                                <i class="fas fa-circle" style="color:var(--danger);"></i> 開始錄影
                            </button>
                            <button class="control-btn" id="stopVideoRecordingKol" style="flex:1;min-width:120px;display:none;">
                                <i class="fas fa-stop"></i> 停止錄影
                            </button>
                            <button class="control-btn" id="playLastRecordingKol" style="flex:1;min-width:120px;display:none;">
                                <i class="fas fa-play"></i> 播放錄影
                            </button>
                            <button class="control-btn" id="downloadVideoKol" style="flex:1;min-width:120px;display:none;">
                                <i class="fas fa-download"></i> 下載錄影
                            </button>
                        </div>
                        
                        <div class="live-stats">
                            <div class="stat-item">
                                <span class="stat-label">直播狀態</span>
                                <span class="stat-value" id="liveStatusKol" style="color: var(--success);">準備就緒</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">觀看人數</span>
                                <span class="stat-value" id="viewerCountKol">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">互動率</span>
                                <span class="stat-value" id="interactionRate">0.0%</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">打賞金額</span>
                                <span class="stat-value" id="donationAmount">$0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">美顏濾鏡</span>
                                <span class="stat-value" id="beautyFilterStatus" style="color: var(--gray);">關閉</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 互動與效果控制台 -->
                <div class="control-panel">
                    <div class="panel-header">
                        <i class="fas fa-comments"></i> 觀眾互動與即時效果
                    </div>
                    <div class="panel-content">
                        <div class="control-group">
                            <div class="control-label">即時聊天室</div>
                            <div class="chat-window" style="height: 200px; overflow-y: auto; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 8px; margin-bottom: 10px;">
                                <div class="chat-message"><span class="chat-user" style="color: var(--primary);">@User1:</span> 哇，新濾鏡好棒！</div>
                                <div class="chat-message"><span class="chat-user" style="color: var(--secondary);">@Fan2:</span> 求 BGM 歌單！</div>
                                <div class="chat-message highlight" style="background: rgba(255, 255, 0, 0.1);"><span class="chat-user" style="color: var(--warning);">@VIP_Donator:</span> 送出火箭 x1！</div>
                            </div>
                            <input type="text" placeholder="發送訊息..." style="width: 100%; padding: 8px; border-radius: 5px; border: none; background: var(--dark-card); color: var(--light);">
                        </div>
                        
                        <div class="control-group">
                            <div class="control-label">即時特效觸發</div>
                            <div class="effect-triggers" style="display: flex; gap: 10px; flex-wrap: wrap;">
                                <button class="control-btn btn-accent" data-effect="heart"><i class="fas fa-heart"></i> 愛心雨</button>
                                <button class="control-btn btn-accent" data-effect="fire"><i class="fas fa-fire"></i> 燃燒</button>
                                <button class="control-btn btn-accent" data-effect="money"><i class="fas fa-money-bill-wave"></i> 灑錢</button>
                                <button class="control-btn btn-accent" data-effect="zoom"><i class="fas fa-search-plus"></i> 臉部特寫</button>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="control-label">美顏與濾鏡調整</div>
                            <div class="slider-group">
                                <label>美白度</label>
                                <input type="range" min="0" max="100" value="50" class="slider" id="beautyWhite">
                            </div>
                            <div class="slider-group">
                                <label>磨皮度</label>
                                <input type="range" min="0" max="100" value="60" class="slider" id="beautySmooth">
                            </div>
                            <div class="slider-group">
                                <label>濾鏡強度</label>
                                <input type="range" min="0" max="100" value="30" class="slider" id="filterStrength">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 聲音與音樂控制 -->
                <div class="control-panel">
                    <div class="panel-header">
                        <i class="fas fa-music"></i> 聲音與背景音樂
                    </div>
                    <div class="panel-content">
                        <div class="control-group">
                            <div class="control-label">麥克風音量</div>
                            <input type="range" min="0" max="100" value="80" class="slider" id="micVolumeKol">
                        </div>
                        <div class="control-group">
                            <div class="control-label">背景音樂</div>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <button class="control-btn" id="playBGM"><i class="fas fa-play"></i></button>
                                <button class="control-btn" id="stopBGM"><i class="fas fa-stop"></i></button>
                                <input type="range" min="0" max="100" value="40" class="slider" id="bgmVolume" style="flex-grow: 1;">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 錄音與收音工具頁面 -->
            <div class="tool-page" id="recordingToolsPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-microphone-alt"></i>
                            <span>專業錄音工作室</span>
                        </div>
                        <div class="page-subtitle">
                            專業錄音設備模擬，支援多軌錄音、麥克風控制、監聽與音質優化。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn btn-danger" id="masterRecord">
                            <i class="fas fa-circle"></i> 開始錄音
                        </button>
                        <button class="page-btn" id="recordingSettingsBtn">
                            <i class="fas fa-cogs"></i> 錄音設定
                        </button>
                    </div>
                </div>

                <div class="category-tool-grid">
                    <!-- 多軌錄音控制 -->
                    <div class="tool-panel full-width" data-tool-id="multitrack-recorder">
                        <div class="tool-panel-header">
                            <i class="fas fa-wave-square"></i>
                            <span>多軌錄音控制台</span>
                            <span class="recording-time" id="masterRecordTime">00:00:00</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="track-mixer">
                                <div class="track-channel" data-track="1">
                                    <div class="channel-label">Track 1 - 主持人</div>
                                    <div class="channel-meter">
                                        <div class="meter-bar"><div class="meter-fill" style="height: 70%"></div></div>
                                        <div class="meter-bar"><div class="meter-fill" style="height: 65%"></div></div>
                                    </div>
                                    <input type="range" class="volume-fader" min="0" max="100" value="80" orient="vertical">
                                    <div class="channel-controls">
                                        <button class="channel-btn mute"><i class="fas fa-volume-mute"></i></button>
                                        <button class="channel-btn solo"><i class="fas fa-headphones"></i></button>
                                        <button class="channel-btn rec active"><i class="fas fa-circle"></i></button>
                                    </div>
                                </div>
                                <div class="track-channel" data-track="2">
                                    <div class="channel-label">Track 2 - 嘉賓</div>
                                    <div class="channel-meter">
                                        <div class="meter-bar"><div class="meter-fill" style="height: 55%"></div></div>
                                        <div class="meter-bar"><div class="meter-fill" style="height: 50%"></div></div>
                                    </div>
                                    <input type="range" class="volume-fader" min="0" max="100" value="75" orient="vertical">
                                    <div class="channel-controls">
                                        <button class="channel-btn mute"><i class="fas fa-volume-mute"></i></button>
                                        <button class="channel-btn solo"><i class="fas fa-headphones"></i></button>
                                        <button class="channel-btn rec active"><i class="fas fa-circle"></i></button>
                                    </div>
                                </div>
                                <div class="track-channel" data-track="3">
                                    <div class="channel-label">Track 3 - 音樂</div>
                                    <div class="channel-meter">
                                        <div class="meter-bar"><div class="meter-fill" style="height: 40%"></div></div>
                                        <div class="meter-bar"><div class="meter-fill" style="height: 38%"></div></div>
                                    </div>
                                    <input type="range" class="volume-fader" min="0" max="100" value="50" orient="vertical">
                                    <div class="channel-controls">
                                        <button class="channel-btn mute"><i class="fas fa-volume-mute"></i></button>
                                        <button class="channel-btn solo"><i class="fas fa-headphones"></i></button>
                                        <button class="channel-btn rec"><i class="fas fa-circle"></i></button>
                                    </div>
                                </div>
                                <div class="track-channel master" data-track="master">
                                    <div class="channel-label">MASTER</div>
                                    <div class="channel-meter">
                                        <div class="meter-bar"><div class="meter-fill" style="height: 75%"></div></div>
                                        <div class="meter-bar"><div class="meter-fill" style="height: 72%"></div></div>
                                    </div>
                                    <input type="range" class="volume-fader" min="0" max="100" value="85" orient="vertical">
                                    <div class="channel-controls">
                                        <button class="channel-btn mute"><i class="fas fa-volume-mute"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 麥克風設定 -->
                    <div class="tool-panel" data-tool-id="mic-settings">
                        <div class="tool-panel-header">
                            <i class="fas fa-microphone"></i>
                            <span>麥克風設定</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="mic-selector">
                                <label>輸入設備：</label>
                                <select class="tool-select" id="micSelect">
                                    <option>Blue Yeti Pro</option>
                                    <option>Shure SM7B</option>
                                    <option>Rode NT1</option>
                                    <option>Audio-Technica AT2020</option>
                                </select>
                            </div>
                            <div class="mic-settings-grid">
                                <div class="setting-item">
                                    <label>增益</label>
                                    <input type="range" min="0" max="100" value="60" class="tool-slider" id="micGain">
                                    <span>60%</span>
                                </div>
                                <div class="setting-item">
                                    <label>噪音門限</label>
                                    <input type="range" min="-60" max="0" value="-40" class="tool-slider" id="noiseGate">
                                    <span>-40dB</span>
                                </div>
                                <div class="setting-item">
                                    <label>監聽延遲</label>
                                    <input type="range" min="0" max="100" value="0" class="tool-slider" id="monitorDelay">
                                    <span>0ms</span>
                                </div>
                            </div>
                            <div class="mic-features">
                                <label class="feature-toggle">
                                    <input type="checkbox" checked=""> 回音消除
                                </label>
                                <label class="feature-toggle">
                                    <input type="checkbox" checked=""> 噪音抑制
                                </label>
                                <label class="feature-toggle">
                                    <input type="checkbox"> 自動增益
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- 即時波形顯示 -->
                    <div class="tool-panel" data-tool-id="waveform-display">
                        <div class="tool-panel-header">
                            <i class="fas fa-signal"></i>
                            <span>即時波形監控</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="waveform-container" id="recordingWaveform">
                                <canvas id="waveformCanvas" width="400" height="150"></canvas>
                            </div>
                            <div class="waveform-info">
                                <div class="info-item"><span>採樣率：</span><strong>48000 Hz</strong></div>
                                <div class="info-item"><span>位深度：</span><strong>24 bit</strong></div>
                                <div class="info-item"><span>峰值：</span><strong id="peakLevel">-6.2 dB</strong></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 混音與效果工具頁面 -->
            <div class="tool-page" id="mixingToolsPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-sliders-h"></i>
                            <span>專業混音工作站</span>
                        </div>
                        <div class="page-subtitle">
                            專業音訊處理工具，包含混音控制台、效果器、等化器與動態處理。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn" id="mixPresetBtn">
                            <i class="fas fa-save"></i> 預設管理
                        </button>
                        <button class="page-btn btn-success" id="applyMixBtn">
                            <i class="fas fa-check"></i> 應用設定
                        </button>
                    </div>
                </div>

                <div class="category-tool-grid">
                    <!-- 參數等化器 -->
                    <div class="tool-panel full-width" data-tool-id="parametric-eq-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-chart-bar"></i>
                            <span>8 頻段參數等化器</span>
                            <label class="tool-switch">
                                <input type="checkbox" id="eqEnabled" checked="">
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        <div class="tool-panel-content">
                            <div class="eq-display" id="eqDisplay">
                                <canvas id="eqCanvas" width="800" height="200"></canvas>
                            </div>
                            <div class="eq-bands">
                                <div class="eq-band" data-band="1">
                                    <span class="band-label">63Hz</span>
                                    <input type="range" min="-12" max="12" value="0" class="eq-slider" orient="vertical">
                                    <span class="band-value">0dB</span>
                                </div>
                                <div class="eq-band" data-band="2">
                                    <span class="band-label">125Hz</span>
                                    <input type="range" min="-12" max="12" value="2" class="eq-slider" orient="vertical">
                                    <span class="band-value">+2dB</span>
                                </div>
                                <div class="eq-band" data-band="3">
                                    <span class="band-label">250Hz</span>
                                    <input type="range" min="-12" max="12" value="-1" class="eq-slider" orient="vertical">
                                    <span class="band-value">-1dB</span>
                                </div>
                                <div class="eq-band" data-band="4">
                                    <span class="band-label">500Hz</span>
                                    <input type="range" min="-12" max="12" value="0" class="eq-slider" orient="vertical">
                                    <span class="band-value">0dB</span>
                                </div>
                                <div class="eq-band" data-band="5">
                                    <span class="band-label">1kHz</span>
                                    <input type="range" min="-12" max="12" value="3" class="eq-slider" orient="vertical">
                                    <span class="band-value">+3dB</span>
                                </div>
                                <div class="eq-band" data-band="6">
                                    <span class="band-label">2kHz</span>
                                    <input type="range" min="-12" max="12" value="2" class="eq-slider" orient="vertical">
                                    <span class="band-value">+2dB</span>
                                </div>
                                <div class="eq-band" data-band="7">
                                    <span class="band-label">4kHz</span>
                                    <input type="range" min="-12" max="12" value="1" class="eq-slider" orient="vertical">
                                    <span class="band-value">+1dB</span>
                                </div>
                                <div class="eq-band" data-band="8">
                                    <span class="band-label">8kHz</span>
                                    <input type="range" min="-12" max="12" value="0" class="eq-slider" orient="vertical">
                                    <span class="band-value">0dB</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 壓縮器 -->
                    <div class="tool-panel" data-tool-id="compressor-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-compress-alt"></i>
                            <span>動態壓縮器</span>
                            <label class="tool-switch">
                                <input type="checkbox" id="compEnabled" checked="">
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        <div class="tool-panel-content">
                            <div class="compressor-display">
                                <div class="gain-reduction-meter">
                                    <div class="gr-fill" id="grMeter" style="height: 30%"></div>
                                    <span class="gr-label">GR</span>
                                </div>
                            </div>
                            <div class="compressor-controls">
                                <div class="knob-group">
                                    <label>Threshold</label>
                                    <input type="range" min="-60" max="0" value="-20" class="tool-slider" id="compThreshold">
                                    <span>-20dB</span>
                                </div>
                                <div class="knob-group">
                                    <label>Ratio</label>
                                    <input type="range" min="1" max="20" value="4" class="tool-slider" id="compRatio">
                                    <span>4:1</span>
                                </div>
                                <div class="knob-group">
                                    <label>Attack</label>
                                    <input type="range" min="0" max="100" value="10" class="tool-slider" id="compAttack">
                                    <span>10ms</span>
                                </div>
                                <div class="knob-group">
                                    <label>Release</label>
                                    <input type="range" min="50" max="1000" value="200" class="tool-slider" id="compRelease">
                                    <span>200ms</span>
                                </div>
                                <div class="knob-group">
                                    <label>Makeup</label>
                                    <input type="range" min="0" max="24" value="6" class="tool-slider" id="compMakeup">
                                    <span>+6dB</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 混響效果 -->
                    <div class="tool-panel" data-tool-id="reverb-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-synagogue"></i>
                            <span>空間混響器</span>
                            <label class="tool-switch">
                                <input type="checkbox" id="reverbEnabled">
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        <div class="tool-panel-content">
                            <div class="reverb-presets">
                                <button class="preset-btn active">錄音室</button>
                                <button class="preset-btn">音樂廳</button>
                                <button class="preset-btn">房間</button>
                                <button class="preset-btn">板式</button>
                            </div>
                            <div class="reverb-controls">
                                <div class="knob-group">
                                    <label>Pre-Delay</label>
                                    <input type="range" min="0" max="100" value="20" class="tool-slider">
                                    <span>20ms</span>
                                </div>
                                <div class="knob-group">
                                    <label>Decay</label>
                                    <input type="range" min="100" max="5000" value="1500" class="tool-slider">
                                    <span>1.5s</span>
                                </div>
                                <div class="knob-group">
                                    <label>Damping</label>
                                    <input type="range" min="0" max="100" value="50" class="tool-slider">
                                    <span>50%</span>
                                </div>
                                <div class="knob-group">
                                    <label>Wet/Dry</label>
                                    <input type="range" min="0" max="100" value="25" class="tool-slider">
                                    <span>25%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 限制器 -->
                    <div class="tool-panel" data-tool-id="limiter-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-hand-paper"></i>
                            <span>峰值限制器</span>
                            <label class="tool-switch">
                                <input type="checkbox" id="limiterEnabled" checked="">
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        <div class="tool-panel-content">
                            <div class="limiter-display">
                                <div class="output-meter">
                                    <div class="meter-fill" style="height: 85%"></div>
                                    <div class="ceiling-line" style="top: 15%"></div>
                                </div>
                                <div class="limiter-info">
                                    <div class="info-row"><span>Ceiling:</span><strong>-0.3 dB</strong></div>
                                    <div class="info-row"><span>Reduction:</span><strong id="limiterReduction">-2.1 dB</strong></div>
                                </div>
                            </div>
                            <div class="limiter-controls">
                                <div class="knob-group">
                                    <label>Ceiling</label>
                                    <input type="range" min="-6" max="0" value="-0.3" step="0.1" class="tool-slider" id="limiterCeiling">
                                    <span>-0.3dB</span>
                                </div>
                                <div class="knob-group">
                                    <label>Release</label>
                                    <input type="range" min="10" max="500" value="100" class="tool-slider" id="limiterRelease">
                                    <span>100ms</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 編輯與後期工具頁面 -->
            <div class="tool-page" id="editingToolsPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-edit"></i>
                            <span>後期編輯工作室</span>
                        </div>
                        <div class="page-subtitle">
                            完整後期製作工具鏈，包含時間軸編輯、特效處理、母帶製作與匯出。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn" id="undoBtn">
                            <i class="fas fa-undo"></i> 復原
                        </button>
                        <button class="page-btn" id="redoBtn">
                            <i class="fas fa-redo"></i> 重做
                        </button>
                        <button class="page-btn btn-success" id="exportBtn">
                            <i class="fas fa-file-export"></i> 匯出
                        </button>
                    </div>
                </div>

                <div class="category-tool-grid">
                    <!-- 時間軸編輯器 -->
                    <div class="tool-panel full-width" data-tool-id="advanced-timeline">
                        <div class="tool-panel-header">
                            <i class="fas fa-cut"></i>
                            <span>進階時間軸編輯器</span>
                            <div class="timeline-toolbar">
                                <button class="toolbar-btn" title="選取"><i class="fas fa-mouse-pointer"></i></button>
                                <button class="toolbar-btn" title="剪切"><i class="fas fa-cut"></i></button>
                                <button class="toolbar-btn" title="分割"><i class="fas fa-grip-lines-vertical"></i></button>
                                <button class="toolbar-btn" title="靜音"><i class="fas fa-volume-mute"></i></button>
                                <button class="toolbar-btn" title="淡入"><i class="fas fa-signal"></i></button>
                            </div>
                        </div>
                        <div class="tool-panel-content">
                            <div class="advanced-timeline">
                                <div class="timeline-ruler-advanced">
                                    <span>0:00</span><span>0:30</span><span>1:00</span><span>1:30</span><span>2:00</span><span>2:30</span><span>3:00</span>
                                </div>
                                <div class="timeline-track-advanced" data-track="vocal">
                                    <div class="track-info"><span>人聲</span></div>
                                    <div class="track-content">
                                        <div class="audio-clip" style="left: 5%; width: 25%">
                                            <div class="clip-waveform"></div>
                                            <span class="clip-name">Intro.wav</span>
                                        </div>
                                        <div class="audio-clip" style="left: 32%; width: 45%">
                                            <div class="clip-waveform"></div>
                                            <span class="clip-name">Main_Content.wav</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="timeline-track-advanced" data-track="music">
                                    <div class="track-info"><span>音樂</span></div>
                                    <div class="track-content">
                                        <div class="audio-clip music" style="left: 0; width: 15%">
                                            <div class="clip-waveform"></div>
                                            <span class="clip-name">Intro_Music.mp3</span>
                                        </div>
                                        <div class="audio-clip music" style="left: 80%; width: 20%">
                                            <div class="clip-waveform"></div>
                                            <span class="clip-name">Outro.mp3</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="timeline-track-advanced" data-track="sfx">
                                    <div class="track-info"><span>���效</span></div>
                                    <div class="track-content">
                                        <div class="audio-clip sfx" style="left: 30%; width: 3%">
                                            <span class="clip-name">Ding</span>
                                        </div>
                                        <div class="audio-clip sfx" style="left: 55%; width: 3%">
                                            <span class="clip-name">Swoosh</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="playhead" id="editPlayhead" style="left: 25%"></div>
                            </div>
                            <div class="timeline-controls">
                                <button class="transport-btn"><i class="fas fa-step-backward"></i></button>
                                <button class="transport-btn play"><i class="fas fa-play"></i></button>
                                <button class="transport-btn"><i class="fas fa-step-forward"></i></button>
                                <span class="timecode">00:00:45.120</span>
                                <div class="zoom-control">
                                    <i class="fas fa-search-minus"></i>
                                    <input type="range" min="1" max="10" value="5" id="timelineZoom">
                                    <i class="fas fa-search-plus"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 頻譜分析 -->
                    <div class="tool-panel" data-tool-id="spectrum-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-chart-area"></i>
                            <span>頻譜分析儀</span>
                        </div>
                        <div class="tool-panel-content">
                            <canvas id="spectrumCanvas" width="400" height="200"></canvas>
                            <div class="spectrum-info">
                                <div class="freq-display">
                                    <span>峰值頻率：</span><strong>2.4 kHz</strong>
                                </div>
                                <div class="freq-display">
                                    <span>RMS 電平：</span><strong>-18.5 dB</strong>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 母帶處理 -->
                    <div class="tool-panel" data-tool-id="mastering-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-compact-disc"></i>
                            <span>母帶處理</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="mastering-chain">
                                <div class="chain-item active"><i class="fas fa-chart-bar"></i> EQ</div>
                                <div class="chain-arrow"><i class="fas fa-arrow-right"></i></div>
                                <div class="chain-item active"><i class="fas fa-compress-alt"></i> 壓縮</div>
                                <div class="chain-arrow"><i class="fas fa-arrow-right"></i></div>
                                <div class="chain-item"><i class="fas fa-arrows-alt-h"></i> 立體聲</div>
                                <div class="chain-arrow"><i class="fas fa-arrow-right"></i></div>
                                <div class="chain-item active"><i class="fas fa-hand-paper"></i> 限制</div>
                            </div>
                            <div class="loudness-meter">
                                <div class="lufs-display">
                                    <span class="lufs-value" id="lufsValue">-14.2</span>
                                    <span class="lufs-label">LUFS</span>
                                </div>
                                <div class="target-select">
                                    <label>目標響度：</label>
                                    <select class="tool-select" id="loudnessTarget">
                                        <option value="-14">Spotify/YouTube (-14 LUFS)</option>
                                        <option value="-16">Podcast (-16 LUFS)</option>
                                        <option value="-23">廣播 (-23 LUFS)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 設備與設定工具頁面 -->
            <div class="tool-page" id="settingsToolsPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-tools"></i>
                            <span>系統設定中心</span>
                        </div>
                        <div class="page-subtitle">
                            系統設定與設備管理工具，包含設備連接、系統優化與工作環境設定。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn" id="resetSettingsBtn">
                            <i class="fas fa-undo"></i> 重設預設
                        </button>
                        <button class="page-btn btn-success" id="saveSettingsBtn">
                            <i class="fas fa-save"></i> 儲存設定
                        </button>
                    </div>
                </div>

                <div class="category-tool-grid">
                    <!-- 設備管理 -->
                    <div class="tool-panel" data-tool-id="device-manager-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-plug"></i>
                            <span>設備連接管理</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="device-list">
                                <div class="device-item connected">
                                    <i class="fas fa-microphone"></i>
                                    <div class="device-info">
                                        <span class="device-name">Blue Yeti Pro</span>
                                        <span class="device-status">已連接 - 主麥克風</span>
                                    </div>
                                    <button class="device-btn"><i class="fas fa-cog"></i></button>
                                </div>
                                <div class="device-item connected">
                                    <i class="fas fa-headphones"></i>
                                    <div class="device-info">
                                        <span class="device-name">Sony WH-1000XM4</span>
                                        <span class="device-status">已連接 - 監聽輸出</span>
                                    </div>
                                    <button class="device-btn"><i class="fas fa-cog"></i></button>
                                </div>
                                <div class="device-item">
                                    <i class="fas fa-video"></i>
                                    <div class="device-info">
                                        <span class="device-name">Logitech C920</span>
                                        <span class="device-status">未連接</span>
                                    </div>
                                    <button class="device-btn"><i class="fas fa-plus"></i></button>
                                </div>
                            </div>
                            <button class="tool-btn full-width" id="scanDevices">
                                <i class="fas fa-sync"></i> 掃描新設備
                            </button>
                        </div>
                    </div>

                    <!-- 快捷鍵設定 -->
                    <div class="tool-panel" data-tool-id="hotkey-settings">
                        <div class="tool-panel-header">
                            <i class="fas fa-keyboard"></i>
                            <span>快捷鍵設定</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="hotkey-list">
                                <div class="hotkey-item">
                                    <span class="hotkey-action">開始/停止錄音</span>
                                    <kbd class="hotkey-key">Ctrl + R</kbd>
                                </div>
                                <div class="hotkey-item">
                                    <span class="hotkey-action">開始/停止直播</span>
                                    <kbd class="hotkey-key">Ctrl + L</kbd>
                                </div>
                                <div class="hotkey-item">
                                    <span class="hotkey-action">快速儲存</span>
                                    <kbd class="hotkey-key">Ctrl + S</kbd>
                                </div>
                                <div class="hotkey-item">
                                    <span class="hotkey-action">播放/暫停</span>
                                    <kbd class="hotkey-key">Space</kbd>
                                </div>
                                <div class="hotkey-item">
                                    <span class="hotkey-action">復原</span>
                                    <kbd class="hotkey-key">Ctrl + Z</kbd>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ���面主題 -->
                    <div class="tool-panel" data-tool-id="theme-settings">
                        <div class="tool-panel-header">
                            <i class="fas fa-palette"></i>
                            <span>介面主題設定</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="theme-options">
                                <div class="theme-option active" data-theme="dark">
                                    <div class="theme-preview dark-preview"></div>
                                    <span>深色模式</span>
                                </div>
                                <div class="theme-option" data-theme="light">
                                    <div class="theme-preview light-preview"></div>
                                    <span>淺色模式</span>
                                </div>
                                <div class="theme-option" data-theme="auto">
                                    <div class="theme-preview auto-preview"></div>
                                    <span>跟隨系統</span>
                                </div>
                            </div>
                            <div class="accent-color">
                                <label>強調色：</label>
                                <div class="color-options">
                                    <div class="color-option active" style="background: #00f3ff"></div>
                                    <div class="color-option" style="background: #ff4757"></div>
                                    <div class="color-option" style="background: #2ed573"></div>
                                    <div class="color-option" style="background: #ffa502"></div>
                                    <div class="color-option" style="background: #9d4edd"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 效能監控 -->
                    <div class="tool-panel" data-tool-id="performance-monitor">
                        <div class="tool-panel-header">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>系統效能監控</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="performance-stats">
                                <div class="perf-item">
                                    <div class="perf-label">CPU 使用率</div>
                                    <div class="perf-bar">
                                        <div class="perf-fill" style="width: 35%"></div>
                                    </div>
                                    <span class="perf-value">35%</span>
                                </div>
                                <div class="perf-item">
                                    <div class="perf-label">記憶體使用</div>
                                    <div class="perf-bar">
                                        <div class="perf-fill warning" style="width: 68%"></div>
                                    </div>
                                    <span class="perf-value">2.7 GB / 4 GB</span>
                                </div>
                                <div class="perf-item">
                                    <div class="perf-label">音訊延遲</div>
                                    <div class="perf-bar">
                                        <div class="perf-fill success" style="width: 15%"></div>
                                    </div>
                                    <span class="perf-value">12 ms</span>
                                </div>
                                <div class="perf-item">
                                    <div class="perf-label">緩衝區狀態</div>
                                    <div class="perf-bar">
                                        <div class="perf-fill success" style="width: 90%"></div>
                                    </div>
                                    <span class="perf-value">正常</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 發佈與分享工具頁面 -->
            <div class="tool-page" id="publishToolsPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <span>發佈與分享中心</span>
                        </div>
                        <div class="page-subtitle">
                            內容發佈與分享工具，支援多平台發佈、受眾分析與社群互動。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn btn-success" id="publishNowBtn">
                            <i class="fas fa-paper-plane"></i> 立即發佈
                        </button>
                        <button class="page-btn" id="scheduleBtn">
                            <i class="fas fa-calendar"></i> 排程發佈
                        </button>
                    </div>
                </div>

                <div class="category-tool-grid">
                    <!-- 發佈平台選擇 -->
                    <div class="tool-panel" data-tool-id="platform-selector">
                        <div class="tool-panel-header">
                            <i class="fas fa-share-alt"></i>
                            <span>發佈平台選擇</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="platform-grid">
                                <label class="platform-checkbox">
                                    <input type="checkbox" checked="">
                                    <div class="platform-card">
                                        <i class="fab fa-spotify"></i>
                                        <span>Spotify</span>
                                    </div>
                                </label>
                                <label class="platform-checkbox">
                                    <input type="checkbox" checked="">
                                    <div class="platform-card">
                                        <i class="fab fa-apple"></i>
                                        <span>Apple Podcasts</span>
                                    </div>
                                </label>
                                <label class="platform-checkbox">
                                    <input type="checkbox" checked="">
                                    <div class="platform-card">
                                        <i class="fab fa-google"></i>
                                        <span>Google Podcasts</span>
                                    </div>
                                </label>
                                <label class="platform-checkbox">
                                    <input type="checkbox">
                                    <div class="platform-card">
                                        <i class="fab fa-youtube"></i>
                                        <span>YouTube</span>
                                    </div>
                                </label>
                                <label class="platform-checkbox">
                                    <input type="checkbox">
                                    <div class="platform-card">
                                        <i class="fab fa-soundcloud"></i>
                                        <span>SoundCloud</span>
                                    </div>
                                </label>
                                <label class="platform-checkbox">
                                    <input type="checkbox">
                                    <div class="platform-card">
                                        <i class="fas fa-rss"></i>
                                        <span>RSS Feed</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- 節目資訊編輯 -->
                    <div class="tool-panel" data-tool-id="episode-info">
                        <div class="tool-panel-header">
                            <i class="fas fa-info-circle"></i>
                            <span>節目資訊</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="episode-form">
                                <div class="form-group">
                                    <label>節���標題</label>
                                    <input type="text" class="tool-input" placeholder="輸入節目標題..." value="EP.25 - 今日話題討論">
                                </div>
                                <div class="form-group">
                                    <label>節目描述</label>
                                    <textarea class="tool-textarea" rows="3" placeholder="輸入節目描述...">本集節目我們將探討最新的科技趨勢，並邀請特別嘉賓分享他們的見解。</textarea>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>分類</label>
                                        <select class="tool-select">
                                            <option>科技</option>
                                            <option>商業</option>
                                            <option>教育</option>
                                            <option>娛樂</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>內容分級</label>
                                        <select class="tool-select">
                                            <option>適合所有年齡</option>
                                            <option>13+ 青少年</option>
                                            <option>18+ 成人</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 聽眾分析 -->
                    <div class="tool-panel" data-tool-id="audience-analytics-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-chart-pie"></i>
                            <span>聽眾數據分析</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="analytics-overview">
                                <div class="analytics-stat">
                                    <span class="stat-number">12,543</span>
                                    <span class="stat-label">總播放次數</span>
                                    <span class="stat-change up">+18%</span>
                                </div>
                                <div class="analytics-stat">
                                    <span class="stat-number">3,892</span>
                                    <span class="stat-label">訂閱者</span>
                                    <span class="stat-change up">+5%</span>
                                </div>
                                <div class="analytics-stat">
                                    <span class="stat-number">24:35</span>
                                    <span class="stat-label">平均收聽時長</span>
                                    <span class="stat-change">--</span>
                                </div>
                            </div>
                            <div class="analytics-chart">
                                <div class="chart-placeholder">
                                    <i class="fas fa-chart-line"></i>
                                    <span>收聽趨勢圖</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- SEO 優化 -->
                    <div class="tool-panel" data-tool-id="seo-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-search"></i>
                            <span>SEO 優化建議</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="seo-checklist">
                                <div class="seo-item done">
                                    <i class="fas fa-check-circle"></i>
                                    <span>標題包含關鍵字</span>
                                </div>
                                <div class="seo-item done">
                                    <i class="fas fa-check-circle"></i>
                                    <span>描述長度適當 (120-160 字)</span>
                                </div>
                                <div class="seo-item warning">
                                    <i class="fas fa-exclamation-circle"></i>
                                    <span>建議添加更多標籤</span>
                                </div>
                                <div class="seo-item">
                                    <i class="fas fa-circle"></i>
                                    <span>添加時間戳章節標記</span>
                                </div>
                            </div>
                            <div class="seo-score">
                                <div class="score-circle">
                                    <span class="score-value">78</span>
                                </div>
                                <span class="score-label">SEO 分數</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI 智能工具頁面 -->
            <div class="tool-page" id="aiToolsPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-brain"></i>
                            <span>AI 智能工具中心</span>
                        </div>
                        <div class="page-subtitle">
                            人工智能驅動的專業工具，自動化處理與智能輔助製作。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn" id="aiCreditsBtn">
                            <i class="fas fa-coins"></i> AI 點數：500
                        </button>
                    </div>
                </div>

                <div class="category-tool-grid">
                    <!-- AI 轉錄 -->
                    <div class="tool-panel" data-tool-id="ai-transcription-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-file-alt"></i>
                            <span>AI 自動轉錄</span>
                            <span class="ai-badge">AI</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="transcription-area">
                                <div class="transcription-controls">
                                    <select class="tool-select" id="transcriptLang">
                                        <option value="zh-TW">繁體中文</option>
                                        <option value="en">English</option>
                                        <option value="ja">日本語</option>
                                        <option value="ko">한국어</option>
                                    </select>
                                    <button class="tool-btn primary" id="startTranscription">
                                        <i class="fas fa-play"></i> 開始轉錄
                                    </button>
                                </div>
                                <div class="transcription-preview" id="transcriptionPreview">
                                    <p class="transcript-line" data-time="00:00:05">大家好，歡迎收看今天的節目。</p>
                                    <p class="transcript-line" data-time="00:00:12">我是你們的主持人，今天我們要討論的主題是...</p>
                                    <p class="transcript-line active" data-time="00:00:20">人工智能在內容創作中的應用。</p>
                                </div>
                                <div class="transcription-actions">
                                    <button class="tool-btn"><i class="fas fa-download"></i> 下載 SRT</button>
                                    <button class="tool-btn"><i class="fas fa-copy"></i> 複製文字</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- AI 降噪 -->
                    <div class="tool-panel" data-tool-id="ai-denoise-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-volume-mute"></i>
                            <span>AI 智能降噪</span>
                            <span class="ai-badge">AI</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="denoise-comparison">
                                <div class="comparison-side">
                                    <span class="comparison-label">處理前</span>
                                    <div class="waveform-mini noisy"></div>
                                    <button class="play-btn"><i class="fas fa-play"></i></button>
                                </div>
                                <div class="comparison-arrow"><i class="fas fa-arrow-right"></i></div>
                                <div class="comparison-side">
                                    <span class="comparison-label">處理後</span>
                                    <div class="waveform-mini clean"></div>
                                    <button class="play-btn"><i class="fas fa-play"></i></button>
                                </div>
                            </div>
                            <div class="denoise-settings">
                                <div class="setting-row">
                                    <label>降噪強度</label>
                                    <input type="range" min="0" max="100" value="70" class="tool-slider" id="denoiseStrength">
                                    <span>70%</span>
                                </div>
                                <div class="noise-types">
                                    <label class="noise-type active"><input type="checkbox" checked=""> 背景噪音</label>
                                    <label class="noise-type"><input type="checkbox" checked=""> 回音消除</label>
                                    <label class="noise-type"><input type="checkbox"> 風聲過濾</label>
                                </div>
                            </div>
                            <button class="tool-btn primary full-width" id="applyDenoise">
                                <i class="fas fa-magic"></i> 應用 AI 降噪
                            </button>
                        </div>
                    </div>

                    <!-- AI 音樂生成 -->
                    <div class="tool-panel" data-tool-id="ai-music-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-music"></i>
                            <span>AI 背景音樂生成</span>
                            <span class="ai-badge">AI</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="music-generator">
                                <div class="mood-selector">
                                    <label>音樂風格：</label>
                                    <div class="mood-options">
                                        <button class="mood-btn active">輕快</button>
                                        <button class="mood-btn">平靜</button>
                                        <button class="mood-btn">緊張</button>
                                        <button class="mood-btn">史詩</button>
                                        <button class="mood-btn">電子</button>
                                    </div>
                                </div>
                                <div class="music-params">
                                    <div class="param-group">
                                        <label>時長 (秒)</label>
                                        <input type="number" value="60" min="10" max="300" class="tool-input small">
                                    </div>
                                    <div class="param-group">
                                        <label>節奏 (BPM)</label>
                                        <input type="number" value="120" min="60" max="180" class="tool-input small">
                                    </div>
                                </div>
                                <div class="generated-preview">
                                    <div class="music-wave-placeholder">
                                        <i class="fas fa-waveform"></i>
                                    </div>
                                    <div class="preview-controls">
                                        <button class="play-btn"><i class="fas fa-play"></i></button>
                                        <span class="duration">1:00</span>
                                    </div>
                                </div>
                                <button class="tool-btn primary full-width" id="generateMusic">
                                    <i class="fas fa-magic"></i> 生成音樂 (消耗 50 點)
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- AI 內容建議 -->
                    <div class="tool-panel" data-tool-id="ai-suggest-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-lightbulb"></i>
                            <span>AI 內容建議</span>
                            <span class="ai-badge">AI</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="suggestion-input">
                                <textarea class="tool-textarea" rows="2" placeholder="描述您的節目主題...">科技新聞與產業趨勢分析</textarea>
                                <button class="tool-btn primary" id="getSuggestions">
                                    <i class="fas fa-magic"></i> 獲取建議
                                </button>
                            </div>
                            <div class="suggestions-list">
                                <div class="suggestion-item">
                                    <i class="fas fa-lightbulb"></i>
                                    <div class="suggestion-content">
                                        <strong>話題建議：</strong>
                                        <span>探討 AI 對創意產業的影響</span>
                                    </div>
                                </div>
                                <div class="suggestion-item">
                                    <i class="fas fa-question-circle"></i>
                                    <div class="suggestion-content">
                                        <strong>討論問題：</strong>
                                        <span>AI 會取代人類創作者嗎？</span>
                                    </div>
                                </div>
                                <div class="suggestion-item">
                                    <i class="fas fa-tags"></i>
                                    <div class="suggestion-content">
                                        <strong>建議標籤：</strong>
                                        <span>#AI #科技趨勢 #未來工作</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 協作與團隊工具頁面 -->
            <div class="tool-page" id="collaborationToolsPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-users"></i>
                            <span>團隊協作中心</span>
                        </div>
                        <div class="page-subtitle">
                            團隊協作與遠端製作工具，支援多人同步編輯與專案管理。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn" id="inviteTeamBtn">
                            <i class="fas fa-user-plus"></i> 邀請成員
                        </button>
                        <button class="page-btn btn-success" id="startMeetingBtn">
                            <i class="fas fa-video"></i> 開始會議
                        </button>
                    </div>
                </div>

                <div class="category-tool-grid">
                    <!-- 團隊成員 -->
                    <div class="tool-panel" data-tool-id="team-members">
                        <div class="tool-panel-header">
                            <i class="fas fa-users"></i>
                            <span>團隊成員</span>
                            <span class="online-count">3 人在線</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="team-list">
                                <div class="team-member online">
                                    <div class="member-avatar">JC</div>
                                    <div class="member-info">
                                        <span class="member-name">James Chen</span>
                                        <span class="member-role">主持人 / 製作人</span>
                                    </div>
                                    <span class="member-status">錄音中</span>
                                </div>
                                <div class="team-member online">
                                    <div class="member-avatar">LW</div>
                                    <div class="member-info">
                                        <span class="member-name">Lisa Wang</span>
                                        <span class="member-role">編輯</span>
                                    </div>
                                    <span class="member-status">編輯中</span>
                                </div>
                                <div class="team-member online">
                                    <div class="member-avatar">MH</div>
                                    <div class="member-info">
                                        <span class="member-name">Mike Huang</span>
                                        <span class="member-role">混音師</span>
                                    </div>
                                    <span class="member-status">待命</span>
                                </div>
                                <div class="team-member offline">
                                    <div class="member-avatar">SL</div>
                                    <div class="member-info">
                                        <span class="member-name">Sarah Lee</span>
                                        <span class="member-role">社群管理</span>
                                    </div>
                                    <span class="member-status">離線</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 任務看板 -->
                    <div class="tool-panel" data-tool-id="task-board">
                        <div class="tool-panel-header">
                            <i class="fas fa-tasks"></i>
                            <span>任務看板</span>
                            <button class="header-btn"><i class="fas fa-plus"></i></button>
                        </div>
                        <div class="tool-panel-content">
                            <div class="task-columns">
                                <div class="task-column">
                                    <div class="column-header">待處理 <span class="task-count">3</span></div>
                                    <div class="task-item">
                                        <span class="task-title">剪輯 EP.25 內容</span>
                                        <span class="task-assignee">Lisa</span>
                                    </div>
                                    <div class="task-item">
                                        <span class="task-title">準備嘉賓資料</span>
                                        <span class="task-assignee">James</span>
                                    </div>
                                </div>
                                <div class="task-column">
                                    <div class="column-header">進行中 <span class="task-count">2</span></div>
                                    <div class="task-item active">
                                        <span class="task-title">錄製 EP.26</span>
                                        <span class="task-assignee">James</span>
                                    </div>
                                    <div class="task-item">
                                        <span class="task-title">混音 EP.24</span>
                                        <span class="task-assignee">Mike</span>
                                    </div>
                                </div>
                                <div class="task-column">
                                    <div class="column-header">已完成 <span class="task-count">5</span></div>
                                    <div class="task-item done">
                                        <span class="task-title">發佈 EP.24</span>
                                        <span class="task-assignee">Sarah</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 即時通訊 -->
                    <div class="tool-panel" data-tool-id="team-chat-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-comment-dots"></i>
                            <span>團隊聊天</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="chat-messages" id="teamChatMessages">
                                <div class="chat-msg">
                                    <span class="msg-author">Lisa:</span>
                                    <span class="msg-text">EP.24 的混音版本我已經上傳了</span>
                                    <span class="msg-time">10:35</span>
                                </div>
                                <div class="chat-msg">
                                    <span class="msg-author">Mike:</span>
                                    <span class="msg-text">收到，我來聽一下</span>
                                    <span class="msg-time">10:36</span>
                                </div>
                                <div class="chat-msg">
                                    <span class="msg-author">James:</span>
                                    <span class="msg-text">太棒了！下午 3 點準時開始錄製 EP.26</span>
                                    <span class="msg-time">10:40</span>
                                </div>
                            </div>
                            <div class="chat-input-area">
                                <input type="text" class="chat-input" placeholder="輸入訊息...">
                                <button class="send-btn"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>

                    <!-- 版本控制 -->
                    <div class="tool-panel" data-tool-id="version-control-tool">
                        <div class="tool-panel-header">
                            <i class="fas fa-code-branch"></i>
                            <span>版本歷史</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="version-list">
                                <div class="version-item current">
                                    <div class="version-marker"></div>
                                    <div class="version-info">
                                        <span class="version-name">v3 - 最終混音版</span>
                                        <span class="version-meta">Mike · 今天 10:30</span>
                                    </div>
                                    <button class="version-btn"><i class="fas fa-download"></i></button>
                                </div>
                                <div class="version-item">
                                    <div class="version-marker"></div>
                                    <div class="version-info">
                                        <span class="version-name">v2 - 剪輯完成</span>
                                        <span class="version-meta">Lisa · 昨天 18:45</span>
                                    </div>
                                    <button class="version-btn"><i class="fas fa-download"></i></button>
                                </div>
                                <div class="version-item">
                                    <div class="version-marker"></div>
                                    <div class="version-info">
                                        <span class="version-name">v1 - 原始錄音</span>
                                        <span class="version-meta">James · 昨天 15:20</span>
                                    </div>
                                    <button class="version-btn"><i class="fas fa-download"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 音檔庫管理頁面 -->
            <div class="tool-page" id="audioLibraryPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-folder-open"></i>
                            <span>音檔庫管理中心</span>
                        </div>
                        <div class="page-subtitle">
                            管理所有錄音檔案，支援回放、編輯、速度調整與格式轉換。您的所有錄音都會自動保存在這裡。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn" id="importAudioBtn">
                            <i class="fas fa-file-import"></i> 匯入音檔
                        </button>
                        <button class="page-btn btn-success" id="newRecordingBtn">
                            <i class="fas fa-microphone"></i> 新增錄音
                        </button>
                    </div>
                </div>

                <div class="category-tool-grid">
                    <!-- 錄音檔案列表 -->
                    <div class="tool-panel full-width" data-tool-id="audio-file-list">
                        <div class="tool-panel-header">
                            <i class="fas fa-list"></i>
                            <span>錄音檔案庫</span>
                            <div class="file-filter">
                                <select class="tool-select" id="audioFilterType">
                                    <option value="all">全部類型</option>
                                    <option value="podcast">播客錄音</option>
                                    <option value="interview">訪談錄音</option>
                                    <option value="draft">草稿</option>
                                    <option value="final">完成版</option>
                                </select>
                                <input type="text" class="tool-input" placeholder="搜尋檔案..." id="audioSearchInput">
                            </div>
                        </div>
                        <div class="tool-panel-content">
                            <div class="audio-file-grid" id="audioFileGrid">
                                <!-- 示例音檔項目 -->
                                <div class="audio-file-item" data-file-id="1">
                                    <div class="file-icon"><i class="fas fa-file-audio"></i></div>
                                    <div class="file-info">
                                        <span class="file-name">EP26_主要內容.wav</span>
                                        <span class="file-meta">12:35 · 48kHz/24bit · 昨天 15:30</span>
                                    </div>
                                    <div class="file-waveform-mini"></div>
                                    <div class="file-actions">
                                        <button class="file-action-btn play-btn" title="播放"><i class="fas fa-play"></i></button>
                                        <button class="file-action-btn" title="編輯"><i class="fas fa-edit"></i></button>
                                        <button class="file-action-btn" title="下載"><i class="fas fa-download"></i></button>
                                        <button class="file-action-btn delete-btn" title="刪除"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="audio-file-item" data-file-id="2">
                                    <div class="file-icon"><i class="fas fa-file-audio"></i></div>
                                    <div class="file-info">
                                        <span class="file-name">EP26_嘉賓訪談.wav</span>
                                        <span class="file-meta">25:12 · 48kHz/24bit · 昨天 16:45</span>
                                    </div>
                                    <div class="file-waveform-mini"></div>
                                    <div class="file-actions">
                                        <button class="file-action-btn play-btn" title="播放"><i class="fas fa-play"></i></button>
                                        <button class="file-action-btn" title="編輯"><i class="fas fa-edit"></i></button>
                                        <button class="file-action-btn" title="下載"><i class="fas fa-download"></i></button>
                                        <button class="file-action-btn delete-btn" title="刪除"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="audio-file-item" data-file-id="3">
                                    <div class="file-icon recording"><i class="fas fa-circle"></i></div>
                                    <div class="file-info">
                                        <span class="file-name">即時錄音_001.wav</span>
                                        <span class="file-meta">3:45 · 48kHz/24bit · 今天 10:20</span>
                                    </div>
                                    <div class="file-waveform-mini"></div>
                                    <div class="file-actions">
                                        <button class="file-action-btn play-btn" title="播放"><i class="fas fa-play"></i></button>
                                        <button class="file-action-btn" title="編輯"><i class="fas fa-edit"></i></button>
                                        <button class="file-action-btn" title="下載"><i class="fas fa-download"></i></button>
                                        <button class="file-action-btn delete-btn" title="刪除"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                                <div class="audio-file-item" data-file-id="4">
                                    <div class="file-icon"><i class="fas fa-file-audio"></i></div>
                                    <div class="file-info">
                                        <span class="file-name">EP25_完成版.mp3</span>
                                        <span class="file-meta">45:30 · 320kbps · 3天前</span>
                                    </div>
                                    <div class="file-waveform-mini"></div>
                                    <div class="file-actions">
                                        <button class="file-action-btn play-btn" title="播放"><i class="fas fa-play"></i></button>
                                        <button class="file-action-btn" title="編輯"><i class="fas fa-edit"></i></button>
                                        <button class="file-action-btn" title="下載"><i class="fas fa-download"></i></button>
                                        <button class="file-action-btn delete-btn" title="刪除"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 播放控制器 -->
                    <div class="tool-panel full-width" data-tool-id="playback-controller">
                        <div class="tool-panel-header">
                            <i class="fas fa-play-circle"></i>
                            <span>進階播放控制器</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="playback-display">
                                <div class="now-playing">
                                    <span class="now-playing-label">正在播放：</span>
                                    <span class="now-playing-name" id="nowPlayingName">EP26_主要內容.wav</span>
                                </div>
                                <div class="playback-waveform" id="playbackWaveform">
                                    <canvas id="playbackWaveformCanvas" width="800" height="80"></canvas>
                                    <div class="playback-cursor" id="playbackCursor"></div>
                                </div>
                                <div class="playback-time">
                                    <span id="currentPlayTime">00:00</span>
                                    <div class="playback-progress">
                                        <input type="range" min="0" max="100" value="0" id="playbackProgress">
                                    </div>
                                    <span id="totalPlayTime">12:35</span>
                                </div>
                            </div>
                            <div class="playback-controls">
                                <div class="transport-controls">
                                    <button class="transport-btn" id="skipBackward" title="後退10秒"><i class="fas fa-backward"></i></button>
                                    <button class="transport-btn" id="stopPlayback" title="停止"><i class="fas fa-stop"></i></button>
                                    <button class="transport-btn play" id="togglePlayback" title="播放/暫停"><i class="fas fa-play"></i></button>
                                    <button class="transport-btn" id="skipForward" title="前進10秒"><i class="fas fa-forward"></i></button>
                                </div>
                                <div class="speed-control-group">
                                    <label>播放速度</label>
                                    <div class="speed-buttons">
                                        <button class="speed-btn" data-speed="0.5">0.5x</button>
                                        <button class="speed-btn" data-speed="0.75">0.75x</button>
                                        <button class="speed-btn active" data-speed="1">1x</button>
                                        <button class="speed-btn" data-speed="1.25">1.25x</button>
                                        <button class="speed-btn" data-speed="1.5">1.5x</button>
                                        <button class="speed-btn" data-speed="2">2x</button>
                                    </div>
                                    <input type="range" min="0.25" max="3" step="0.05" value="1" id="speedSlider" class="speed-slider">
                                    <span class="speed-value" id="speedValue">1.00x</span>
                                </div>
                                <div class="volume-control-group">
                                    <label><i class="fas fa-volume-up"></i></label>
                                    <input type="range" min="0" max="100" value="80" id="volumeSlider" class="volume-slider">
                                    <span id="volumeValue">80%</span>
                                </div>
                            </div>
                            <div class="playback-options">
                                <label class="option-checkbox">
                                    <input type="checkbox" id="loopPlayback">
                                    <span>循環播放</span>
                                </label>
                                <label class="option-checkbox">
                                    <input type="checkbox" id="preservePitch" checked="">
                                    <span>保持音���</span>
                                </label>
                                <button class="tool-btn" id="setMarkerA"><i class="fas fa-map-marker-alt"></i> 設定A點</button>
                                <button class="tool-btn" id="setMarkerB"><i class="fas fa-map-marker-alt"></i> 設定B點</button>
                                <button class="tool-btn" id="loopAB"><i class="fas fa-sync"></i> A-B循環</button>
                            </div>
                        </div>
                    </div>

                    <!-- 快速編輯工具 -->
                    <div class="tool-panel" data-tool-id="quick-edit">
                        <div class="tool-panel-header">
                            <i class="fas fa-magic"></i>
                            <span>快速編輯工具</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="quick-edit-buttons">
                                <button class="quick-edit-btn" id="trimSilence"><i class="fas fa-cut"></i> 裁切靜音</button>
                                <button class="quick-edit-btn" id="normalizeAudio"><i class="fas fa-chart-line"></i> 音量正規化</button>
                                <button class="quick-edit-btn" id="fadeIn"><i class="fas fa-volume-up"></i> 淡入效果</button>
                                <button class="quick-edit-btn" id="fadeOut"><i class="fas fa-volume-down"></i> 淡出效果</button>
                                <button class="quick-edit-btn" id="reverseAudio"><i class="fas fa-exchange-alt"></i> 反轉音訊</button>
                                <button class="quick-edit-btn" id="noiseReductionQuick"><i class="fas fa-filter"></i> 快速降噪</button>
                            </div>
                        </div>
                    </div>

                    <!-- 格式轉換 -->
                    <div class="tool-panel" data-tool-id="format-converter">
                        <div class="tool-panel-header">
                            <i class="fas fa-exchange-alt"></i>
                            <span>格式轉換器</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="converter-options">
                                <div class="format-select">
                                    <label>輸出格式</label>
                                    <select class="tool-select" id="outputFormat">
                                        <option value="wav">WAV (無損)</option>
                                        <option value="mp3">MP3 (壓縮)</option>
                                        <option value="flac">FLAC (無損壓縮)</option>
                                        <option value="aac">AAC</option>
                                        <option value="ogg">OGG Vorbis</option>
                                    </select>
                                </div>
                                <div class="quality-select">
                                    <label>品質設定</label>
                                    <select class="tool-select" id="outputQuality">
                                        <option value="high">高品質 (320kbps)</option>
                                        <option value="medium">中等品質 (192kbps)</option>
                                        <option value="low">標準品質 (128kbps)</option>
                                    </select>
                                </div>
                                <button class="tool-btn primary full-width" id="convertFile">
                                    <i class="fas fa-sync"></i> 開始轉換
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 直播前期準備頁面 -->
            <div class="tool-page" id="livePrepPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-clipboard-check"></i>
                            <span>直播前期準備中心</span>
                        </div>
                        <div class="page-subtitle">
                            完整的直播前準備工具，確保您的直播萬無一失。包含設備檢測、場景設計與幕前幕後控制。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn" id="runFullCheckBtn">
                            <i class="fas fa-check-double"></i> 完整檢測
                        </button>
                        <button class="page-btn btn-success" id="startRehearsalBtn">
                            <i class="fas fa-play"></i> 開始排練
                        </button>
                    </div>
                </div>

                <div class="category-tool-grid">
                    <!-- 設備檢測面板 -->
                    <div class="tool-panel" data-tool-id="equipment-status">
                        <div class="tool-panel-header">
                            <i class="fas fa-check-circle"></i>
                            <span>設備狀態檢測</span>
                            <span class="status-badge success" id="equipmentStatusBadge">全部正常</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="equipment-check-list">
                                <div class="check-item success">
                                    <i class="fas fa-microphone"></i>
                                    <span class="check-name">麥克風</span>
                                    <span class="check-status">Blue Yeti Pro - 已連接</span>
                                    <i class="fas fa-check-circle status-icon"></i>
                                </div>
                                <div class="check-item success">
                                    <i class="fas fa-headphones"></i>
                                    <span class="check-name">監聽耳機</span>
                                    <span class="check-status">Sony WH-1000XM4 - 已連接</span>
                                    <i class="fas fa-check-circle status-icon"></i>
                                </div>
                                <div class="check-item success">
                                    <i class="fas fa-video"></i>
                                    <span class="check-name">攝影機</span>
                                    <span class="check-status">Logitech C920 - 已連接</span>
                                    <i class="fas fa-check-circle status-icon"></i>
                                </div>
                                <div class="check-item warning">
                                    <i class="fas fa-wifi"></i>
                                    <span class="check-name">網路連線</span>
                                    <span class="check-status">上傳: 25Mbps (建議 30Mbps+)</span>
                                    <i class="fas fa-exclamation-triangle status-icon"></i>
                                </div>
                                <div class="check-item success">
                                    <i class="fas fa-hdd"></i>
                                    <span class="check-name">儲存空間</span>
                                    <span class="check-status">可用: 256GB</span>
                                    <i class="fas fa-check-circle status-icon"></i>
                                </div>
                            </div>
                            <button class="tool-btn full-width" id="recheckEquipment">
                                <i class="fas fa-sync"></i> 重新檢測
                            </button>
                        </div>
                    </div>

                    <!-- 幕前/幕後控制 -->
                    <div class="tool-panel" data-tool-id="backstage-panel">
                        <div class="tool-panel-header">
                            <i class="fas fa-theater-masks"></i>
                            <span>幕前/幕後控制</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="stage-toggle">
                                <button class="stage-btn active" id="backstageBtn" data-stage="backstage">
                                    <i class="fas fa-user-secret"></i>
                                    <span>幕後模式</span>
                                    <small>觀眾看不到，內部準備用</small>
                                </button>
                                <button class="stage-btn" id="frontstageBtn" data-stage="frontstage">
                                    <i class="fas fa-broadcast-tower"></i>
                                    <span>幕前模式</span>
                                    <small>正式直播，觀眾可見</small>
                                </button>
                            </div>
                            <div class="stage-status" id="stageStatus">
                                <div class="stage-indicator backstage">
                                    <i class="fas fa-eye-slash"></i>
                                    <span>當前狀態：幕後模式 (觀眾不可見)</span>
                                </div>
                            </div>
                            <div class="stage-preview">
                                <div class="preview-label">觀眾視角預覽</div>
                                <div class="preview-screen-mini" id="stagePreview">
                                    <div class="backstage-overlay">
                                        <i class="fas fa-pause-circle"></i>
                                        <span>直播準備中</span>
                                    </div>
                                </div>
                            </div>
                            <div class="transition-options">
                                <label>切換效果</label>
                                <select class="tool-select" id="transitionEffect">
                                    <option value="cut">直切</option>
                                    <option value="fade">淡入淡出</option>
                                    <option value="slide">滑動</option>
                                    <option value="zoom">縮放</option>
                                </select>
                                <button class="tool-btn primary" id="switchStage">
                                    <i class="fas fa-exchange-alt"></i> 切換幕前/幕後
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 提詞器 -->
                    <div class="tool-panel" data-tool-id="teleprompter">
                        <div class="tool-panel-header">
                            <i class="fas fa-scroll"></i>
                            <span>智能提詞器</span>
                            <label class="tool-switch">
                                <input type="checkbox" id="teleprompterEnabled">
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        <div class="tool-panel-content">
                            <div class="teleprompter-screen" id="teleprompterScreen">
                                <div class="script-content">
                                    歡迎來到我們的播客節目！今天我們將討論一個非常有趣的話題...
                                </div>
                            </div>
                            <div class="teleprompter-controls">
                                <div class="scroll-speed">
                                    <label>滾動速度</label>
                                    <input type="range" min="1" max="10" value="5" id="scrollSpeed">
                                    <span id="scrollSpeedValue">5</span>
                                </div>
                                <div class="font-size-control">
                                    <label>字體大小</label>
                                    <input type="range" min="16" max="48" value="24" id="teleprompterFontSize">
                                    <span id="fontSizeValue">24px</span>
                                </div>
                                <button class="tool-btn" id="loadScript">
                                    <i class="fas fa-file-upload"></i> 載入腳本
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 倒數計時器 -->
                    <div class="tool-panel" data-tool-id="countdown">
                        <div class="tool-panel-header">
                            <i class="fas fa-stopwatch"></i>
                            <span>直播倒數計時</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="countdown-display" id="countdownDisplay">
                                <span class="countdown-time">00:05:00</span>
                            </div>
                            <div class="countdown-controls">
                                <div class="time-preset-buttons">
                                    <button class="preset-btn" data-time="60">1分鐘</button>
                                    <button class="preset-btn active" data-time="300">5分鐘</button>
                                    <button class="preset-btn" data-time="600">10分鐘</button>
                                    <button class="preset-btn" data-time="900">15分鐘</button>
                                </div>
                                <div class="countdown-actions">
                                    <button class="tool-btn" id="startCountdown"><i class="fas fa-play"></i> 開始</button>
                                    <button class="tool-btn" id="pauseCountdown"><i class="fas fa-pause"></i> 暫停</button>
                                    <button class="tool-btn" id="resetCountdown"><i class="fas fa-redo"></i> 重設</button>
                                </div>
                                <label class="option-checkbox">
                                    <input type="checkbox" id="autoStartLive" checked="">
                                    <span>倒數結束後自動開始直播</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- 直播清單 -->
                    <div class="tool-panel full-width" data-tool-id="live-checklist">
                        <div class="tool-panel-header">
                            <i class="fas fa-tasks"></i>
                            <span>直播前清單</span>
                            <span class="checklist-progress" id="checklistProgress">5/8 完成</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="checklist-grid">
                                <div class="checklist-item checked">
                                    <input type="checkbox" checked="" id="check1">
                                    <label for="check1">設備已連接並測試</label>
                                </div>
                                <div class="checklist-item checked">
                                    <input type="checkbox" checked="" id="check2">
                                    <label for="check2">音訊電平已調整</label>
                                </div>
                                <div class="checklist-item checked">
                                    <input type="checkbox" checked="" id="check3">
                                    <label for="check3">場景佈置完成</label>
                                </div>
                                <div class="checklist-item checked">
                                    <input type="checkbox" checked="" id="check4">
                                    <label for="check4">腳本已準備</label>
                                </div>
                                <div class="checklist-item checked">
                                    <input type="checkbox" checked="" id="check5">
                                    <label for="check5">串流平台已連接</label>
                                </div>
                                <div class="checklist-item">
                                    <input type="checkbox" id="check6">
                                    <label for="check6">測試串流已完成</label>
                                </div>
                                <div class="checklist-item">
                                    <input type="checkbox" id="check7">
                                    <label for="check7">通知觀眾直播即將開始</label>
                                </div>
                                <div class="checklist-item">
                                    <input type="checkbox" id="check8">
                                    <label for="check8">最終確認所有設定</label>
                                </div>
                            </div>
                            <div class="checklist-actions">
                                <button class="tool-btn" id="addCheckItem"><i class="fas fa-plus"></i> 新增項目</button>
                                <button class="tool-btn" id="resetChecklist"><i class="fas fa-redo"></i> 重設清單</button>
                                <button class="tool-btn primary" id="completeAllChecks"><i class="fas fa-check-double"></i> 全部完成</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 新聞主播設備頁面 -->
            <div class="tool-page" id="newsAnchorPage">
                <button class="tool-back-btn back-to-main-btn">
                    <i class="fas fa-arrow-left"></i> 返回主控制台
                </button>

                <div class="page-header">
                    <div>
                        <div class="page-title">
                            <i class="fas fa-newspaper"></i>
                            <span>新聞主播專業設備中心</span>
                        </div>
                        <div class="page-subtitle">
                            電視台級專業新聞直播設備，包含虛擬演播室、提詞器、即時連線、新聞圖表等工具，支援即時直播預覽與重播回放。
                        </div>
                    </div>
                    <div class="page-controls">
                        <button class="page-btn" id="newsAnchorSettings">
                            <i class="fas fa-cog"></i> 演播室設���
                        </button>
                        <button class="page-btn btn-success" id="startNewsLive">
                            <i class="fas fa-broadcast-tower"></i> 開始直播
                        </button>
                    </div>
                </div>

                <!-- 即時直播預覽區域 -->
                <div class="category-tool-grid">
                    <div class="tool-panel full-width" data-tool-id="news-live-preview">
                        <div class="tool-panel-header">
                            <i class="fas fa-tv"></i>
                            <span>即時直播預覽</span>
                            <div style="display:flex;gap:10px;align-items:center;">
                                <span class="status-badge" id="newsLiveStatus" style="background:var(--danger);animation:pulse 1.5s infinite;">● LIVE</span>
                                <span id="newsLiveTime" style="font-family:monospace;font-size:0.9rem;">00:00:00</span>
                            </div>
                        </div>
                        <div class="tool-panel-content">
                            <div class="news-preview-container" style="display:grid;grid-template-columns:2fr 1fr;gap:20px;">
                                <!-- 主預覽畫面 -->
                                <div class="main-preview" style="position:relative;">
	                                    <div id="newsMainScreen" style="aspect-ratio:16/9;background:linear-gradient(135deg,#0a1628,#1a2a4a);border-radius:12px;overflow:hidden;position:relative;transition:filter 0.5s;">
                                        <!-- 突發新聞疊加層 -->
                                        <div id="breakingNewsOverlay" style="position:absolute;inset:0;background:rgba(255,0,0,0.2);display:none;align-items:center;justify-content:center;z-index:10;pointer-events:none;">
                                            <div style="background:rgba(255,0,0,0.8);color:white;padding:20px 40px;border-radius:10px;font-size:2rem;font-weight:bold;border:5px solid white;animation:pulse 0.5s infinite alternate;">
                                                BREAKING NEWS
                                            </div>
                                        </div>
                                        <!-- 模擬新聞演播室場景 -->
                                        <div class="virtual-studio-scene" id="virtualStudioScene" style="width:100%;height:100%;position:relative;">
                                            <!-- 演播室背景 -->
                                            <div class="studio-background" style="position:absolute;inset:0;background:linear-gradient(180deg,#0d2137 0%,#1a3a5c 50%,#0a1628 100%);">
                                                <!-- 動態光效 -->
                                                <div class="studio-lights" style="position:absolute;inset:0;overflow:hidden;">
                                                    <div class="light-beam" style="position:absolute;top:-50%;left:20%;width:200px;height:200%;background:linear-gradient(180deg,transparent,rgba(0,180,255,0.1),transparent);transform:rotate(15deg);animation:lightMove 8s ease-in-out infinite;"></div>
                                                    <div class="light-beam" style="position:absolute;top:-50%;right:25%;width:150px;height:200%;background:linear-gradient(180deg,transparent,rgba(255,100,50,0.08),transparent);transform:rotate(-10deg);animation:lightMove 10s ease-in-out infinite reverse;"></div>
                                                </div>
                                                <!-- 新聞台標誌 -->
                                                <div class="news-logo" style="position:absolute;top:15px;left:15px;background:rgba(0,0,0,0.7);padding:8px 15px;border-radius:8px;display:flex;align-items:center;gap:8px;">
                                                    <i class="fas fa-broadcast-tower" style="color:#00f3ff;"></i>
                                                    <span style="font-weight:bold;font-size:0.9rem;">ProCast 新聞台</span>
                                                </div>
                                                <!-- 時間顯示 -->
                                                <div class="news-time" style="position:absolute;top:15px;right:15px;background:rgba(0,0,0,0.7);padding:8px 15px;border-radius:8px;">
                                                    <span id="newsCurrentTime" style="font-family:monospace;font-size:0.9rem;">12:00:00</span>
                                                </div>
                                            </div>

                                            <!-- 模擬主播人物 -->
                                            <div class="anchor-figure" id="anchorFigure" style="position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:40%;height:70%;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;">
                                                <!-- 主播頭像模擬 -->
                                                <div class="anchor-avatar" style="width:80px;height:80px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:10px;box-shadow:0 0 30px rgba(102,126,234,0.5);">
                                                    <i class="fas fa-user-tie" style="font-size:2.5rem;color:white;"></i>
                                                </div>
                                                <!-- 主播身體模擬 -->
                                                <div class="anchor-body" style="width:120px;height:100px;background:linear-gradient(180deg,#2d3748,#1a202c);border-radius:20px 20px 0 0;position:relative;">
                                                    <div class="anchor-shoulders" style="position:absolute;top:10px;left:50%;transform:translateX(-50%);width:100px;height:30px;background:#4a5568;border-radius:15px;"></div>
                                                </div>
                                                <!-- 主播桌面 -->
                                                <div class="anchor-desk" style="width:200%;height:40px;background:linear-gradient(180deg,#2d3748,#1a202c);border-top:3px solid #4299e1;"></div>
                                            </div>

                                            <!-- 說話動畫指示器 -->
                                            <div class="speaking-indicator" id="speakingIndicator" style="position:absolute;bottom:120px;left:50%;transform:translateX(-50%);display:flex;gap:3px;opacity:0;transition:opacity 0.3s;">
                                                <div class="speak-bar" style="width:4px;height:15px;background:#00f3ff;border-radius:2px;animation:speakAnim 0.3s ease-in-out infinite;"></div>
                                                <div class="speak-bar" style="width:4px;height:20px;background:#00f3ff;border-radius:2px;animation:speakAnim 0.3s ease-in-out infinite 0.1s;"></div>
                                                <div class="speak-bar" style="width:4px;height:12px;background:#00f3ff;border-radius:2px;animation:speakAnim 0.3s ease-in-out infinite 0.2s;"></div>
                                                <div class="speak-bar" style="width:4px;height:18px;background:#00f3ff;border-radius:2px;animation:speakAnim 0.3s ease-in-out infinite 0.15s;"></div>
                                                <div class="speak-bar" style="width:4px;height:14px;background:#00f3ff;border-radius:2px;animation:speakAnim 0.3s ease-in-out infinite 0.25s;"></div>
                                            </div>

                                            <!-- 下方新聞跑馬燈 -->
                                            <div class="news-ticker-bar" style="position:absolute;bottom:0;left:0;right:0;height:50px;background:linear-gradient(90deg,#dc2626,#b91c1c);display:flex;align-items:center;overflow:hidden;">
                                                <div class="ticker-label" style="background:#7f1d1d;padding:0 20px;height:100%;display:flex;align-items:center;font-weight:bold;white-space:nowrap;">
                                                    <i class="fas fa-bolt"></i>&nbsp;即時新聞
                                                </div>
                                                <div class="ticker-content" style="flex:1;overflow:hidden;padding:0 20px;">
                                                    <div id="newsTickerText" style="white-space:nowrap;animation:tickerScroll 20s linear infinite;">
                                                        歡迎收看 ProCast 新聞台 ━ 全天候為您報導最新消息 ━ 專業、即時、準確的新聞服務 ━ 感謝您的收看
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- 音量指示器 -->
	                                    <div class="audio-level-indicator" style="position:absolute;right:15px;bottom:70px;display:flex;flex-direction:column;gap:2px;align-items:flex-end;">
                                        <input type="range" min="0" max="100" value="80" class="slider" id="micLevelNews" style="width: 100px; margin-bottom: 5px;">
                                                <div class="level-bars" style="display:flex;gap:2px;height:40px;align-items:flex-end;">
                                                    <div class="level-bar" style="width:4px;background:#22c55e;border-radius:2px;height:30%;transition:height 0.1s;"></div>
                                                    <div class="level-bar" style="width:4px;background:#22c55e;border-radius:2px;height:50%;transition:height 0.1s;"></div>
                                                    <div class="level-bar" style="width:4px;background:#22c55e;border-radius:2px;height:70%;transition:height 0.1s;"></div>
                                                    <div class="level-bar" style="width:4px;background:#eab308;border-radius:2px;height:85%;transition:height 0.1s;"></div>
                                                    <div class="level-bar" style="width:4px;background:#ef4444;border-radius:2px;height:40%;transition:height 0.1s;"></div>
                                                </div>
                                                <span style="font-size:0.65rem;color:var(--gray);">AUDIO</span>
                                            </div>
                                        </div>
                                    </div>

	                                    <!-- 鏡頭控制 -->
	                                    <div class="camera-controls" style="display:flex;flex-direction:column;gap:5px;margin-top:15px;padding:10px;border:1px solid var(--border);border-radius:8px;">
	                                        <span style="font-size:0.8rem;color:var(--gray);text-align:center;">鏡頭角度控制 (模擬)</span>
	                                        <div style="display:flex;justify-content:center;gap:10px;">
	                                            <button class="control-btn" id="cameraMoveUp" style="width:50px;"><i class="fas fa-arrow-up"></i></button>
	                                            <button class="control-btn" id="cameraMoveDown" style="width:50px;"><i class="fas fa-arrow-down"></i></button>
	                                        </div>
	                                        <span id="cameraAngleDisplay" style="font-size:0.7rem;color:var(--primary);text-align:center;">中央特寫 (0%)</span>
	                                    </div>
	                                    <!-- 預覽控制列 -->
	                                    <div class="preview-controls" style="display:flex;gap:10px;margin-top:15px;flex-wrap:wrap;">
                                        <button class="control-btn" id="toggleNewsLive" style="flex:1;min-width:120px;background:var(--danger);">
                                            <i class="fas fa-circle"></i> 直播中
                                        </button>
                                        <button class="control-btn" id="toggleNewsMute" style="flex:1;min-width:100px;">
                                            <i class="fas fa-volume-up"></i> 音訊
                                        </button>
                                        <button class="control-btn" id="newsFullscreen" style="flex:1;min-width:100px;">
                                            <i class="fas fa-expand"></i> 全螢幕
                                        </button>
                                        <button class="control-btn" id="switchNewsScene" style="flex:1;min-width:100px;">
                                            <i class="fas fa-random"></i> 切換場景
                                        </button>
                                    </div>
                                </div>

	                                <!-- 側邊控制面板 -->
	                                <div class="side-controls" style="display:flex;flex-direction:column;gap:15px;">
	                                    <!-- 觀眾畫面預覽 -->
	                                    <div class="tool-panel" data-tool-id="audience-preview">
	                                        <div class="tool-panel-header">
	                                            <i class="fas fa-eye"></i>
	                                            <span>觀眾畫面預覽 (即時/重播)</span>
	                                        </div>
	                                        <div class="tool-panel-content">
	                                            <div id="audienceScreen" style="aspect-ratio:16/9;background:var(--background);border-radius:8px;overflow:hidden;position:relative;display:flex;align-items:center;justify-content:center;font-size:1.2rem;font-weight:bold;color:white;text-shadow:0 0 5px black;">
	                                                節目播放中...
	                                            </div>
	                                            <div style="display:flex;gap:10px;margin-top:10px;">
	                                                <button class="tool-btn full-width" id="cycleAudienceContent"><i class="fas fa-sync-alt"></i> 切換內容</button>
	                                                <button class="tool-btn full-width" id="toggleReplay"><i class="fas fa-history"></i> 模擬重播</button>
	                                            </div>
	                                        </div>
	                                    </div>
                                    <!-- 場景切換 -->
                                    <div class="scene-selector" style="background:var(--surface);border-radius:12px;padding:15px;border:1px solid var(--border);">
                                        <h4 style="margin-bottom:12px;font-size:0.9rem;color:var(--gray);"><i class="fas fa-th-large"></i> 場景切換</h4>
                                        <div class="scene-grid" style="display:grid;grid-template-columns:repeat(2,1fr);gap:8px;">
                                            <div class="scene-thumb active" data-scene="studio" style="aspect-ratio:16/9;background:linear-gradient(135deg,#0d2137,#1a3a5c);border-radius:8px;cursor:pointer;border:2px solid var(--primary);display:flex;align-items:center;justify-content:center;font-size:0.7rem;">
                                                <i class="fas fa-user-tie"></i>
                                            </div>
                                            <div class="scene-thumb" data-scene="weather" style="aspect-ratio:16/9;background:linear-gradient(135deg,#0ea5e9,#06b6d4);border-radius:8px;cursor:pointer;border:2px solid transparent;display:flex;align-items:center;justify-content:center;font-size:0.7rem;">
                                                <i class="fas fa-cloud-sun"></i>
                                            </div>
                                            <div class="scene-thumb" data-scene="sports" style="aspect-ratio:16/9;background:linear-gradient(135deg,#22c55e,#16a34a);border-radius:8px;cursor:pointer;border:2px solid transparent;display:flex;align-items:center;justify-content:center;font-size:0.7rem;">
                                                <i class="fas fa-futbol"></i>
                                            </div>
                                            <div class="scene-thumb" data-scene="breaking" style="aspect-ratio:16/9;background:linear-gradient(135deg,#dc2626,#b91c1c);border-radius:8px;cursor:pointer;border:2px solid transparent;display:flex;align-items:center;justify-content:center;font-size:0.7rem;">
                                                <i class="fas fa-exclamation-triangle"></i>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 直播統計 -->
                                    <div class="live-stats-panel" style="background:var(--surface);border-radius:12px;padding:15px;border:1px solid var(--border);">
                                        <h4 style="margin-bottom:12px;font-size:0.9rem;color:var(--gray);"><i class="fas fa-chart-line"></i> 直播統計</h4>
                                        <div class="stats-list" style="display:flex;flex-direction:column;gap:10px;">
                                            <div class="stat-row" style="display:flex;justify-content:space-between;align-items:center;">
                                                <span style="font-size:0.85rem;"><i class="fas fa-eye"></i> 觀看人數</span>
                                                <span id="newsViewers" style="font-weight:bold;color:var(--primary);">12,847</span>
                                            </div>
                                            <div class="stat-row" style="display:flex;justify-content:space-between;align-items:center;">
                                                <span style="font-size:0.85rem;"><i class="fas fa-heart"></i> 按讚數</span>
                                                <span id="newsLikes" style="font-weight:bold;color:#ec4899;">3,291</span>
                                            </div>
                                            <div class="stat-row" style="display:flex;justify-content:space-between;align-items:center;">
                                                <span style="font-size:0.85rem;"><i class="fas fa-comment"></i> 留言數</span>
                                                <span id="newsComments" style="font-weight:bold;color:#22c55e;">847</span>
                                            </div>
                                            <div class="stat-row" style="display:flex;justify-content:space-between;align-items:center;">
                                                <span style="font-size:0.85rem;"><i class="fas fa-signal"></i> 串流品質</span>
                                                <span style="font-weight:bold;color:var(--success);">1080p 60fps</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 重播回放面板 -->
                    <div class="tool-panel" data-tool-id="news-playback">
                        <div class="tool-panel-header">
                            <i class="fas fa-history"></i>
                            <span>重播回放 (Playback)</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="playback-list" style="display:flex;flex-direction:column;gap:10px;max-height:300px;overflow-y:auto;">
                                <div class="playback-item" style="display:flex;gap:12px;padding:12px;background:rgba(0,0,0,0.2);border-radius:10px;cursor:pointer;transition:all 0.3s;" data-playback="1">
                                    <div class="playback-thumb" style="width:80px;height:45px;background:linear-gradient(135deg,#0d2137,#1a3a5c);border-radius:6px;display:flex;align-items:center;justify-content:center;position:relative;">
                                        <i class="fas fa-play" style="font-size:0.8rem;"></i>
                                        <span style="position:absolute;bottom:2px;right:4px;font-size:0.6rem;background:rgba(0,0,0,0.7);padding:1px 4px;border-radius:3px;">05:32</span>
                                    </div>
                                    <div style="flex:1;">
                                        <div style="font-size:0.85rem;font-weight:500;">晨間新聞精華</div>
                                        <div style="font-size:0.75rem;color:var(--gray);">今天 08:00 • 5分32秒</div>
                                    </div>
                                    <button class="tool-btn" style="padding:8px 12px;font-size:0.75rem;"><i class="fas fa-play"></i></button>
                                </div>
                                <div class="playback-item" style="display:flex;gap:12px;padding:12px;background:rgba(0,0,0,0.2);border-radius:10px;cursor:pointer;transition:all 0.3s;" data-playback="2">
                                    <div class="playback-thumb" style="width:80px;height:45px;background:linear-gradient(135deg,#dc2626,#b91c1c);border-radius:6px;display:flex;align-items:center;justify-content:center;position:relative;">
                                        <i class="fas fa-play" style="font-size:0.8rem;"></i>
                                        <span style="position:absolute;bottom:2px;right:4px;font-size:0.6rem;background:rgba(0,0,0,0.7);padding:1px 4px;border-radius:3px;">12:45</span>
                                    </div>
                                    <div style="flex:1;">
                                        <div style="font-size:0.85rem;font-weight:500;">突發新聞報導</div>
                                        <div style="font-size:0.75rem;color:var(--gray);">今天 10:30 • 12分45秒</div>
                                    </div>
                                    <button class="tool-btn" style="padding:8px 12px;font-size:0.75rem;"><i class="fas fa-play"></i></button>
                                </div>
                                <div class="playback-item" style="display:flex;gap:12px;padding:12px;background:rgba(0,0,0,0.2);border-radius:10px;cursor:pointer;transition:all 0.3s;" data-playback="3">
                                    <div class="playback-thumb" style="width:80px;height:45px;background:linear-gradient(135deg,#0ea5e9,#06b6d4);border-radius:6px;display:flex;align-items:center;justify-content:center;position:relative;">
                                        <i class="fas fa-play" style="font-size:0.8rem;"></i>
                                        <span style="position:absolute;bottom:2px;right:4px;font-size:0.6rem;background:rgba(0,0,0,0.7);padding:1px 4px;border-radius:3px;">03:18</span>
                                    </div>
                                    <div style="flex:1;">
                                        <div style="font-size:0.85rem;font-weight:500;">天氣預報</div>
                                        <div style="font-size:0.75rem;color:var(--gray);">今天 12:00 • 3分18秒</div>
                                    </div>
                                    <button class="tool-btn" style="padding:8px 12px;font-size:0.75rem;"><i class="fas fa-play"></i></button>
                                </div>
                            </div>
                            <div style="margin-top:15px;display:flex;gap:10px;">
                                <button class="tool-btn full-width" id="loadMorePlayback">
                                    <i class="fas fa-folder-open"></i> 載入更多錄影
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- 專業提詞器 -->
                    <div class="tool-panel" data-tool-id="news-teleprompter">
                        <div class="tool-panel-header">
                            <i class="fas fa-scroll"></i>
                            <span>專業提詞器</span>
                            <label class="tool-switch">
                                <input type="checkbox" id="newsTeleprompterOn" checked="">
                                <span class="switch-slider"></span>
                            </label>
                        </div>
                        <div class="tool-panel-content">
                            <div class="teleprompter-preview" id="newsTeleprompterPreview" style="height:150px;background:#000;border-radius:8px;padding:20px;overflow:hidden;position:relative;">
                                <div class="teleprompter-text" id="newsTeleprompterText" style="font-size:1.2rem;line-height:1.8;color:#fff;animation:scrollUp 30s linear infinite;">
                                    各位觀眾晚安，歡迎收看 ProCast 新聞台。今天，我們將聚焦於全球氣候變遷的最新進展，以及科技巨頭在人工智慧領域的突破性應用。<br><br>
首先，根據最新的科學報告，全球平均氣溫已連續三個月創下歷史新高。極端天氣事件在世界各地頻繁發生，從亞洲的超級颱風到歐洲的持續高溫，都向我們發出嚴峻的警示。各國政府正加速推動綠色能源轉型，承諾在未來十年內大幅減少碳排放。<br><br>
接著，我們將鏡頭轉向科技前沿。一家領先的科技公司剛剛發布了他們最新的生成式 AI 模型，該模型在自然語言理解和圖像生成方面展現出驚人的能力。專家預測，這項技術將徹底改變內容創作、軟體開發和醫療診斷等行業。然而，隨之而來的倫理和監管問題也成為國際社會關注的焦點。<br><br>
最後，在財經方面，儘管全球經濟面臨挑戰，但新興市場的表現依然強勁。特別是電動車和半導體產業，持續吸引大量投資。我們將連線財經專家，為您深入分析市場趨勢。<br><br>
以上是今天的新聞摘要，稍後我們將為您帶來更詳細的報導。請不要走開，廣告後馬上回來。
                                </div>
                                <div style="position:absolute;top:0;left:0;right:0;height:40px;background:linear-gradient(180deg,#000,transparent);"></div>
                                <div style="position:absolute;bottom:0;left:0;right:0;height:40px;background:linear-gradient(0deg,#000,transparent);"></div>
                                <div style="position:absolute;top:50%;left:0;right:0;height:2px;background:var(--primary);opacity:0.5;"></div>
                            </div>
                            <div class="teleprompter-ctrls" style="display:flex;gap:10px;margin-top:12px;">
                                <button class="tool-btn" id="pauseTeleprompter"><i class="fas fa-pause"></i></button>
                                <button class="tool-btn" id="resetTeleprompter"><i class="fas fa-redo"></i></button>
                                <button class="tool-btn btn-danger" id="breakingNewsCutIn"><i class="fas fa-exclamation-triangle"></i> 突發新聞切入</button>
                                <input type="range" min="1" max="10" value="5" id="teleprompterSpeedNews" style="flex:1;">
                                <span id="teleprompterSpeedValueNews" style="min-width:40px;text-align:center;">5x</span>
                            </div>
                        </div>
                    </div>

                    <!-- 新聞圖表生成器 -->
                    <div class="tool-panel" data-tool-id="news-graphics">
                        <div class="tool-panel-header">
                            <i class="fas fa-chart-bar"></i>
                            <span>新聞圖表生成器</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="graphics-preview" style="aspect-ratio:16/9;background:linear-gradient(135deg,#1e3a5f,#0d2137);border-radius:8px;padding:15px;position:relative;">
                                <!-- 模擬圖表 -->
                                <div style="font-size:0.9rem;font-weight:bold;margin-bottom:10px;">本週股市走勢</div>
                                <div class="chart-bars" style="display:flex;gap:8px;height:80px;align-items:flex-end;">
                                    <div style="flex:1;background:linear-gradient(180deg,#22c55e,#16a34a);height:60%;border-radius:4px 4px 0 0;transition:height 0.5s;"></div>
                                    <div style="flex:1;background:linear-gradient(180deg,#22c55e,#16a34a);height:75%;border-radius:4px 4px 0 0;transition:height 0.5s;"></div>
                                    <div style="flex:1;background:linear-gradient(180deg,#ef4444,#dc2626);height:45%;border-radius:4px 4px 0 0;transition:height 0.5s;"></div>
                                    <div style="flex:1;background:linear-gradient(180deg,#22c55e,#16a34a);height:80%;border-radius:4px 4px 0 0;transition:height 0.5s;"></div>
                                    <div style="flex:1;background:linear-gradient(180deg,#22c55e,#16a34a);height:90%;border-radius:4px 4px 0 0;transition:height 0.5s;"></div>
                                </div>
                                <div class="chart-labels" style="display:flex;justify-content:space-between;font-size:0.7rem;color:var(--gray);margin-top:5px;">
                                    <span>週一</span><span>週二</span><span>週三</span><span>週四</span><span>週五</span>
                                </div>
                            </div>
                            <div class="graphics-templates" style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:12px;">
                                <button class="tool-btn active" style="padding:10px;font-size:0.75rem;"><i class="fas fa-chart-bar"></i><br>長條圖</button>
                                <button class="tool-btn" style="padding:10px;font-size:0.75rem;"><i class="fas fa-chart-line"></i><br>折線圖</button>
                                <button class="tool-btn" style="padding:10px;font-size:0.75rem;"><i class="fas fa-chart-pie"></i><br>圓餅圖</button>
                                <button class="tool-btn" style="padding:10px;font-size:0.75rem;"><i class="fas fa-map"></i><br>地圖</button>
                            </div>
                        </div>
                    </div>

                    <!-- 即時連線系統 -->
                    <div class="tool-panel" data-tool-id="live-connection">
                        <div class="tool-panel-header">
                            <i class="fas fa-satellite"></i>
                            <span>即時連線系統</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="connection-grid" style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;">
                                <div class="connection-slot" style="aspect-ratio:16/9;background:linear-gradient(135deg,#374151,#1f2937);border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;border:2px dashed var(--border);transition:all 0.3s;">
                                    <i class="fas fa-plus" style="font-size:1.5rem;margin-bottom:8px;color:var(--gray);"></i>
                                    <span style="font-size:0.75rem;color:var(--gray);">新增連線</span>
                                </div>
                                <div class="connection-slot active" style="aspect-ratio:16/9;background:linear-gradient(135deg,#0d2137,#1a3a5c);border-radius:8px;position:relative;overflow:hidden;border:2px solid var(--success);">
                                    <div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;">
                                        <i class="fas fa-user-circle" style="font-size:2rem;"></i>
                                    </div>
                                    <div style="position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,0,0.7);padding:5px;font-size:0.7rem;text-align:center;">
                                        <span style="color:var(--success);">●</span> 台北現場記者
                                    </div>
                                </div>
                            </div>
                            <button class="tool-btn full-width" style="margin-top:12px;">
                                <i class="fas fa-video"></i> 開始視訊連線
                            </button>
                        </div>
                    </div>

                    <!-- 虛擬演播室設定 -->
                    <div class="tool-panel" data-tool-id="virtual-studio-settings">
                        <div class="tool-panel-header">
                            <i class="fas fa-vr-cardboard"></i>
                            <span>虛擬演播室設定</span>
                        </div>
                        <div class="tool-panel-content">
                            <div class="studio-themes" style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:15px;">
                                <div class="theme-option active" data-theme="modern" style="padding:15px 10px;background:linear-gradient(135deg,#0d2137,#1a3a5c);border-radius:8px;text-align:center;cursor:pointer;border:2px solid var(--primary);font-size:0.75rem;">
                                    <i class="fas fa-city" style="font-size:1.2rem;margin-bottom:5px;display:block;"></i>
                                    現代風格
                                </div>
                                <div class="theme-option" data-theme="classic" style="padding:15px 10px;background:linear-gradient(135deg,#4a3728,#2d1f15);border-radius:8px;text-align:center;cursor:pointer;border:2px solid transparent;font-size:0.75rem;">
                                    <i class="fas fa-landmark" style="font-size:1.2rem;margin-bottom:5px;display:block;"></i>
                                    經典風格
                                </div>
                                <div class="theme-option" data-theme="tech" style="padding:15px 10px;background:linear-gradient(135deg,#0f172a,#1e293b);border-radius:8px;text-align:center;cursor:pointer;border:2px solid transparent;font-size:0.75rem;">
                                    <i class="fas fa-microchip" style="font-size:1.2rem;margin-bottom:5px;display:block;"></i>
                                    科技風格
                                </div>
                            </div>
                            <div class="studio-settings-list" style="display:flex;flex-direction:column;gap:12px;">
                                <div style="display:flex;justify-content:space-between;align-items:center;">
                                    <span style="font-size:0.85rem;"><i class="fas fa-lightbulb"></i> 燈光亮度</span>
                                    <input type="range" min="0" max="100" value="80" style="width:100px;">
                                </div>
                                <div style="display:flex;justify-content:space-between;align-items:center;">
                                    <span style="font-size:0.85rem;"><i class="fas fa-palette"></i> 背景色調</span>
                                    <input type="color" value="#1a3a5c" style="width:40px;height:25px;border:none;border-radius:4px;">
                                </div>
                                <label style="display:flex;align-items:center;gap:8px;font-size:0.85rem;cursor:pointer;">
                                    <input type="checkbox" checked=""> 顯示新聞台標誌
                                </label>
                                <label style="display:flex;align-items:center;gap:8px;font-size:0.85rem;cursor:pointer;">
                                    <input type="checkbox" checked=""> 顯示即時時間
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- 突發新聞系統 -->
                    <div class="tool-panel full-width" data-tool-id="breaking-news">
                        <div class="tool-panel-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            <span>突發新聞系統</span>
                            <button class="tool-btn" id="triggerBreakingNews" style="background:var(--danger);padding:8px 15px;font-size:0.8rem;">
                                <i class="fas fa-bolt"></i> 發送突發新聞
                            </button>
                        </div>
                        <div class="tool-panel-content">
                            <div class="breaking-news-form" style="display:grid;grid-template-columns:1fr auto;gap:15px;align-items:end;">
                                <div>
                                    <label style="font-size:0.85rem;color:var(--gray);display:block;margin-bottom:8px;">突發新聞標題</label>
                                    <input type="text" id="breakingNewsTitle" placeholder="輸入突發新聞標題..." style="width:100%;padding:12px 15px;background:var(--surface);border:1px solid var(--border);border-radius:8px;color:white;font-size:1rem;">
                                </div>
                                <div style="display:flex;gap:10px;">
                                    <select id="breakingNewsLevel" style="padding:12px 15px;background:var(--surface);border:1px solid var(--border);border-radius:8px;color:white;">
                                        <option value="normal">一般</option>
                                        <option value="important">重要</option>
                                        <option value="urgent">緊急</option>
                                    </select>
                                </div>
                            </div>
                            <div class="breaking-preview" id="breakingNewsPreview" style="margin-top:15px;padding:15px;background:linear-gradient(90deg,#dc2626,#b91c1c);border-radius:8px;display:none;">
                                <div style="display:flex;align-items:center;gap:10px;">
                                    <span style="background:#7f1d1d;padding:5px 12px;border-radius:5px;font-weight:bold;animation:pulse 1s infinite;">
                                        <i class="fas fa-bolt"></i> 突發新聞
                                    </span>
                                    <span id="breakingPreviewText" style="flex:1;font-weight:500;"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 模擬器狀態通知 -->
    <div class="simulator-status" id="simulatorStatus">
        <div class="status-header">
            <div class="status-title">
                <i class="fas fa-info-circle"></i>
                系統狀態通知
            </div>
            <button class="status-close" id="closeStatus">×</button>
        </div>
        <div class="status-message" id="statusMessage">
            專業播客製作模擬平台已載入完成，所有系統功能正常運作。
        </div>
    </div>

    <!-- 導航提示 -->
    <div class="navigation-hint" id="navigationHint">
        <i class="fas fa-lightbulb"></i> 提示：點擊工具圖示查看更多功能
    </div>

    <!-- 快速模式切換面板 -->
    <div class="quick-mode-panel" id="quickModePanel">
        <button class="quick-mode-toggle" id="quickModeToggle" title="快速切換模式">
            <i class="fas fa-th-large"></i>
        </button>
        <div class="quick-mode-menu" id="quickModeMenu">
            <div class="quick-mode-header">
                <span>快速切換</span>
                <span class="quick-mode-hint">ESC 關閉</span>
            </div>
            <div class="quick-mode-grid">
                <button class="quick-mode-btn" data-mode="main" title="主控制台">
                    <i class="fas fa-home"></i>
                    <span>主控台</span>
                </button>
                <button class="quick-mode-btn" data-mode="tv" title="電視台模式">
                    <i class="fas fa-tv"></i>
                    <span>電視台</span>
                </button>
                <button class="quick-mode-btn" data-mode="broadcast" title="直播串流">
                    <i class="fas fa-broadcast-tower"></i>
                    <span>直播</span>
                </button>
                <button class="quick-mode-btn" data-mode="recording" title="錄音工作室">
                    <i class="fas fa-microphone-alt"></i>
                    <span>錄音</span>
                </button>
                <button class="quick-mode-btn" data-mode="mixing" title="混音工作站">
                    <i class="fas fa-sliders-h"></i>
                    <span>混音</span>
                </button>
                <button class="quick-mode-btn" data-mode="editing" title="後期編輯">
                    <i class="fas fa-edit"></i>
                    <span>編輯</span>
                </button>
                <button class="quick-mode-btn" data-mode="ai-tools" title="AI 工具">
                    <i class="fas fa-brain"></i>
                    <span>AI 工具</span>
                </button>
                <button class="quick-mode-btn" data-mode="publish" title="發佈分享">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>發佈</span>
                </button>
                <button class="quick-mode-btn" data-mode="collaboration" title="團隊協作">
                    <i class="fas fa-users"></i>
                    <span>協作</span>
                </button>
                <button class="quick-mode-btn" data-mode="settings" title="系統設定">
                    <i class="fas fa-cog"></i>
                    <span>設定</span>
                </button>
                <button class="quick-mode-btn" data-mode="audio-library" title="音檔庫">
                    <i class="fas fa-folder-open"></i>
                    <span>音檔庫</span>
                </button>
                <button class="quick-mode-btn" data-mode="live-prep" title="直播準備">
                    <i class="fas fa-clipboard-check"></i>
                    <span>準備</span>
                </button>
            </div>
            <div class="quick-mode-shortcuts">
                <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>1-9</kbd> 快速切換模式</div>
                <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>R</kbd> 錄音</div>
                <div class="shortcut-item"><kbd>Ctrl</kbd>+<kbd>L</kbd> 直播</div>
            </div>
        </div>
    </div>

    <!-- 快捷操作工具列 -->
    <div class="quick-toolbar" id="quickToolbar">
        <button class="quick-tool-btn" id="quickRecord" title="開始/停止錄音 (Ctrl+R)">
            <i class="fas fa-circle"></i>
            <span class="quick-tool-label">REC</span>
        </button>
        <button class="quick-tool-btn" id="quickLive" title="開始/停止直播 (Ctrl+L)">
            <i class="fas fa-broadcast-tower"></i>
            <span class="quick-tool-label">LIVE</span>
        </button>
        <button class="quick-tool-btn" id="quickPlay" title="播放/暫停 (Space)">
            <i class="fas fa-play"></i>
            <span class="quick-tool-label">PLAY</span>
        </button>
        <button class="quick-tool-btn" id="quickSave" title="快速儲存 (Ctrl+S)">
            <i class="fas fa-save"></i>
            <span class="quick-tool-label">SAVE</span>
        </button>
        <div class="quick-tool-divider"></div>
        <div class="quick-meter" title="主輸出電平">
            <div class="meter-channel">
                <div class="meter-fill-quick" id="quickMeterL"></div>
            </div>
            <div class="meter-channel">
                <div class="meter-fill-quick" id="quickMeterR"></div>
            </div>
        </div>
        <div class="quick-time" id="quickTime">00:00:00</div>
    </div>

    <!-- 操作提示氣泡 -->
    <div class="action-tooltip" id="actionTooltip"></div>

    <!-- 平台運作指南彈窗 -->
    <div class="guide-modal-overlay" id="guideModalOverlay">
        <div class="guide-modal">
            <div class="guide-modal-header">
                <div class="guide-modal-title">
                    <i class="fas fa-book-open"></i>
                    <span>平台運作指南</span>
                </div>
                <button class="guide-modal-close" id="closeGuideModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="guide-modal-content">
                <!-- 工作流程概覽 -->
                <div class="guide-section">
                    <div class="guide-section-title">
                        <i class="fas fa-project-diagram"></i>
                        <span>製作工作流程</span>
                    </div>
                    <div class="guide-workflow">
                        <div class="workflow-step">
                            <div class="workflow-step-num">1</div>
                            <div class="workflow-step-label">前期策劃</div>
                        </div>
                        <div class="workflow-arrow"><i class="fas fa-arrow-right"></i></div>
                        <div class="workflow-step">
                            <div class="workflow-step-num">2</div>
                            <div class="workflow-step-label">錄音收音</div>
                        </div>
                        <div class="workflow-arrow"><i class="fas fa-arrow-right"></i></div>
                        <div class="workflow-step">
                            <div class="workflow-step-num">3</div>
                            <div class="workflow-step-label">混音後製</div>
                        </div>
                        <div class="workflow-arrow"><i class="fas fa-arrow-right"></i></div>
                        <div class="workflow-step">
                            <div class="workflow-step-num">4</div>
                            <div class="workflow-step-label">母帶處理</div>
                        </div>
                        <div class="workflow-arrow"><i class="fas fa-arrow-right"></i></div>
                        <div class="workflow-step">
                            <div class="workflow-step-num">5</div>
                            <div class="workflow-step-label">發佈推廣</div>
                        </div>
                    </div>
                </div>

                <!-- 功能模組說明 -->
                <div class="guide-section">
                    <div class="guide-section-title">
                        <i class="fas fa-cubes"></i>
                        <span>核心功能模組</span>
                    </div>
                    <div class="guide-grid">
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon"><i class="fas fa-broadcast-tower"></i></div>
                                <div class="guide-item-title">直播與廣播</div>
                            </div>
                            <div class="guide-item-desc">
                                多平台同步串流、OBS 場景切換、即時字幕生成、觀眾互動管理、直播監控分析等完整直播工具組。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon"><i class="fas fa-microphone-alt"></i></div>
                                <div class="guide-item-title">錄音與收音</div>
                            </div>
                            <div class="guide-item-desc">
                                多軌同步錄音（最高 32 軌）、麥克風陣列模擬、實時監聽、噪音消除、錄音計時與自動分段功能。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon"><i class="fas fa-sliders-h"></i></div>
                                <div class="guide-item-title">混音與效果</div>
                            </div>
                            <div class="guide-item-desc">
                                專業數位混音台、8 頻段參數等化器、動態壓縮器、空間混響、峰值限制器等專業音效處理工具。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon"><i class="fas fa-edit"></i></div>
                                <div class="guide-item-title">編輯與後期</div>
                            </div>
                            <div class="guide-item-desc">
                                進階時間軸編輯、音訊剪輯、頻譜分析、母帶處理、LUFS 響度標準化、多格式匯出功能。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon"><i class="fas fa-brain"></i></div>
                                <div class="guide-item-title">AI 智能工具</div>
                            </div>
                            <div class="guide-item-desc">
                                AI 自動轉錄、智能降噪、背景音樂生成、內容建議、SEO 優化等 AI 輔助製作功能。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon"><i class="fas fa-users"></i></div>
                                <div class="guide-item-title">協作與團隊</div>
                            </div>
                            <div class="guide-item-desc">
                                團隊成員管理、任務看板、即時通訊、版本控制、多人同步編輯等遠端協作工具。
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 使用說明 -->
                <div class="guide-section">
                    <div class="guide-section-title">
                        <i class="fas fa-info-circle"></i>
                        <span>使用說明</span>
                    </div>
                    <div class="guide-grid">
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon"><i class="fas fa-play-circle"></i></div>
                                <div class="guide-item-title">如何開始</div>
                            </div>
                            <div class="guide-item-desc">
                                點擊「啟動模擬平台」進入主控制台，選擇「電視台專業模式」或「標準模式」開始製作。您也可以直接點擊工具分類卡片進入特定功能區。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon"><i class="fas fa-keyboard"></i></div>
                                <div class="guide-item-title">快捷鍵</div>
                            </div>
                            <div class="guide-item-desc">
                                Ctrl+R 開始/停止錄音、Ctrl+L 開始/停止直播、Ctrl+S 快速儲存、Space 播放/暫停、Escape 關閉彈窗。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon"><i class="fas fa-headphones"></i></div>
                                <div class="guide-item-title">音訊監聽</div>
                            </div>
                            <div class="guide-item-desc">
                                所有音訊處理均提供即時預覽。調整 EQ、壓縮器等參數時，波形顯示和電平表會即時反映變化。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon"><i class="fas fa-save"></i></div>
                                <div class="guide-item-title">專案管理</div>
                            </div>
                            <div class="guide-item-desc">
                                使用「快速儲存」保存當前工作狀態。專案設定包含取樣率、位深度、聲道配置等參數，可根據需求調整。
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 真實功能說明 -->
                <div class="guide-section">
                    <div class="guide-section-title">
                        <i class="fas fa-check-circle"></i>
                        <span>真實可用功能</span>
                    </div>
                    <div class="guide-grid">
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon" style="background: linear-gradient(135deg, #2ed573, #17a65f);"><i class="fas fa-microphone"></i></div>
                                <div class="guide-item-title">真實錄音</div>
                            </div>
                            <div class="guide-item-desc">
                                本平台支援真實麥克風錄音！點擊錄音按鈕後會請求麥克風權限，錄製完成後可即時播放並下載 WebM 格式音檔。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon" style="background: linear-gradient(135deg, #3498db, #2980b9);"><i class="fas fa-download"></i></div>
                                <div class="guide-item-title">檔案下載</div>
                            </div>
                            <div class="guide-item-desc">
                                錄製的音訊檔案可以直接下載到您的裝置，方便後續使用其他軟體進行編輯或發佈。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);"><i class="fas fa-sliders-h"></i></div>
                                <div class="guide-item-title">即時控制</div>
                            </div>
                            <div class="guide-item-desc">
                                所有推桿、旋鈕、按鈕均可即時操作，介面會即時反映您的操作結果，提供專業級的視覺回饋。
                            </div>
                        </div>
                        <div class="guide-item">
                            <div class="guide-item-header">
                                <div class="guide-item-icon" style="background: linear-gradient(135deg, #e74c3c, #c0392b);"><i class="fas fa-broadcast-tower"></i></div>
                                <div class="guide-item-title">直播模擬</div>
                            </div>
                            <div class="guide-item-desc">
                                直播功能提供完整的模擬體驗，包含觀眾人數變化、串流數據監控、即時預覽等，讓您熟悉直播流程。
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 快速鍵一覽 -->
                <div class="guide-section">
                    <div class="guide-section-title">
                        <i class="fas fa-keyboard"></i>
                        <span>完整快捷鍵列表</span>
                    </div>
                    <div class="guide-item" style="max-width: 100%;">
                        <div class="guide-item-desc">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                                <div style="padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; display: flex; justify-content: space-between;">
                                    <span>開始/停止錄音</span>
                                    <span style="color: var(--primary); font-weight: bold;">Ctrl + R</span>
                                </div>
                                <div style="padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; display: flex; justify-content: space-between;">
                                    <span>開始/停止直播</span>
                                    <span style="color: var(--primary); font-weight: bold;">Ctrl + L</span>
                                </div>
                                <div style="padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; display: flex; justify-content: space-between;">
                                    <span>快速儲存</span>
                                    <span style="color: var(--primary); font-weight: bold;">Ctrl + S</span>
                                </div>
                                <div style="padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; display: flex; justify-content: space-between;">
                                    <span>播放/暫停</span>
                                    <span style="color: var(--primary); font-weight: bold;">Space</span>
                                </div>
                                <div style="padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; display: flex; justify-content: space-between;">
                                    <span>關閉彈窗</span>
                                    <span style="color: var(--primary); font-weight: bold;">Escape</span>
                                </div>
                                <div style="padding: 10px; background: rgba(0,0,0,0.3); border-radius: 8px; display: flex; justify-content: space-between;">
                                    <span>切換模式 1-9</span>
                                    <span style="color: var(--primary); font-weight: bold;">Ctrl + 1-9</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 模擬說明 -->
                <div class="guide-section">
                    <div class="guide-section-title">
                        <i class="fas fa-desktop"></i>
                        <span>關於此模擬平台</span>
                    </div>
                    <div class="guide-item" style="max-width: 100%;">
                        <div class="guide-item-desc" style="text-align: center; padding: 20px;">
                            <p style="margin-bottom: 15px;">
                                <strong style="color: var(--primary);">ProCast Studio - 專業播客製作模擬平台</strong>
                            </p>
                            <p style="margin-bottom: 15px;">
                                本平台結合模擬體驗與真實功能，提供完整的播客及多媒體製作工作流程。真實的錄音功能讓您可以實際錄製音訊，
                                而豐富的模擬介面則讓您熟悉專業製作環境的操作方式。
                            </p>
                            <p style="margin-bottom: 15px; color: var(--success);">
                                <i class="fas fa-check"></i> 真實麥克風錄音
                                <i class="fas fa-check" style="margin-left: 15px;"></i> 音訊檔案下載
                                <i class="fas fa-check" style="margin-left: 15px;"></i> 即時視覺回饋
                            </p>
                            <p style="color: var(--secondary);">
                                <i class="fas fa-lightbulb"></i> 適合初學者學習專業製作流程，或專業人士預覽工作環境配置。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 幫助面板 -->
    <div class="help-panel" id="helpPanel">
        <div class="help-header">
            <div class="help-title">即時幫助</div>
            <button class="help-close" id="closeHelp">×</button>
        </div>
        <div class="help-content">
            <div class="help-tip">
                <strong>錄音控制：</strong> 點擊紅色錄音按鈕開始錄製，再次點擊停止。使用滑桿調整音量和效果。
            </div>
            <div class="help-tip">
                <strong>直播控制：</strong> 在電視台模式下，點擊「開始直播」按鈕啟動串流。使用機位切換按鈕切換不同攝影機視角。
            </div>
            <div class="help-tip">
                <strong>編輯功能：</strong> 在時間軸上拖拽音訊片段進行編輯。右鍵點擊片段查看更多選項。
            </div>
        </div>
    </div>

    <script>
        // 終極播客製作模擬平台
        class UltimatePodcastSimulator {
            constructor() {
                this.state = {
                    currentMode: 'main',
                    isRecording: false,
                    isStreaming: false,
                    currentProgress: 0,
                    currentStage: 1,
                    recordingTime: 0,
                    recordingTimer: null,
                    audioContext: null,
                    audioStream: null,
                    mediaRecorder: null,
                    recordedChunks: []
                };
                
                this.tracks = [
                    { id: 1, name: '主持人', type: 'voice', volume: 0.8, muted: false, solo: false, recording: false, waveform: [] },
                    { id: 2, name: '嘉賓', type: 'voice', volume: 0.8, muted: false, solo: false, recording: false, waveform: [] },
                    { id: 3, name: '背景音樂', type: 'music', volume: 0.5, muted: false, solo: false, recording: false, waveform: [] },
                    { id: 4, name: '音效軌', type: 'effects', volume: 0.7, muted: true, solo: false, recording: false, waveform: [] }
                ];
                
                this.init();
            }
            
            async init() {
                // 隱藏載入畫面
                setTimeout(() => {
                    document.getElementById('loadingOverlay').style.display = 'none';
                }, 2000);
                
                // 初始化 DOM 元素
                this.initElements();
                
                // 初始化事件監聽器
                this.initEventListeners();
                
                // 初始化音頻可視化
                this.initAudioVisualizer();
                
                // 初始化軌道管理
                this.initTrackManagement();
                
                // 初始化時間軸
                this.initTimeline();
                
                // 初始化直播預覽
                this.initLivePreview();
                
                // 顯示歡迎訊息
                setTimeout(() => {
                    this.showStatus('歡迎使用 ProCast Studio 專業播客製作平台！所有系統功能已就緒。');
                }, 500);
                
                // 更新進度
                this.updateProgress(10, 1);
            }
            
            initElements() {
                // 主頁元素
                this.elements = {
                    homepage: document.getElementById('homepage'),
                    simulator: document.getElementById('simulator'),
                    loadingOverlay: document.getElementById('loadingOverlay'),
                    
                    // 導航按鈕
                    launchSimulator: document.getElementById('launchSimulator'),
                    backToHome: document.getElementById('backToHome'),
                    mobileMenuBtn: document.getElementById('mobileMenuBtn'),
                    navControls: document.getElementById('navControls'),
                    
                    // 指南按鈕
                    guideBtn: document.getElementById('guideBtn'),
                    demoBtn: document.getElementById('demoBtn'),
                    tutorialBtn: document.getElementById('tutorialBtn'),
                    helpBtn: document.getElementById('helpBtn'),
                    
                    // 控制台按鈕
                    systemSettings: document.getElementById('systemSettings'),
                    emergencyStop: document.getElementById('emergencyStop'),
                    quickSave: document.getElementById('quickSave'),
                    
                    // 模式切換
                    modeButtons: document.querySelectorAll('.mode-btn'),
                    backToMain: document.getElementById('backToMain'),
                    backToMain2: document.getElementById('backToMain2'),
                    
                    // 直播控制
                    startLive: document.getElementById('startLive'),
                    togglePreview: document.getElementById('togglePreview'),
                    addGraphic: document.getElementById('addGraphic'),
                    switchCamera: document.getElementById('switchCamera'),
                    
                    // 錄音控制
                    startRecording: document.getElementById('startRecording'),
                    toggleMonitoring: document.getElementById('toggleMonitoring'),
                    noiseReduction: document.getElementById('noiseReduction'),
                    recordButtonText: document.getElementById('recordButtonText'),
                    
                    // 音量控制
                    masterVolume: document.getElementById('masterVolume'),
                    masterVolumeValue: document.getElementById('masterVolumeValue'),
                    trebleBoost: document.getElementById('trebleBoost'),
                    trebleValue: document.getElementById('trebleValue'),
                    bassBoost: document.getElementById('bassBoost'),
                    bassValue: document.getElementById('bassValue'),
                    compression: document.getElementById('compression'),
                    compressionValue: document.getElementById('compressionValue'),
                    
                    // 直播狀態
                    liveStatus: document.getElementById('liveStatus'),
                    viewerCount: document.getElementById('viewerCount'),
                    streamLatency: document.getElementById('streamLatency'),
                    streamBitrate: document.getElementById('streamBitrate'),
                    bufferStatus: document.getElementById('bufferStatus'),
                    
                    // 進度控制
                    progressFill: document.getElementById('progressFill'),
                    progressPercent: document.getElementById('progressPercent'),
                    currentStage: document.getElementById('currentStage'),
                    stageIndicators: document.querySelectorAll('.step-indicator'),
                    stageLabels: document.querySelectorAll('.step-label'),
                    
                    // 頁面管理
                    toolPages: document.querySelectorAll('.tool-page'),
                    navPath: document.getElementById('navPath'),
                    
                    // 狀態通知
                    simulatorStatus: document.getElementById('simulatorStatus'),
                    statusMessage: document.getElementById('statusMessage'),
                    closeStatus: document.getElementById('closeStatus'),
                    
                    // 幫助系統
                    navigationHint: document.getElementById('navigationHint'),
                    helpPanel: document.getElementById('helpPanel'),
                    closeHelp: document.getElementById('closeHelp'),
                    
                    // 視覺化元素
                    audioVisualizer: document.getElementById('audioVisualizer'),
                    trackGrid: document.getElementById('trackGrid'),
                    timelineContainer: document.getElementById('timelineContainer'),
                    timelineRuler: document.getElementById('timelineRuler'),
                    livePreviewContent: document.getElementById('livePreviewContent'),

                    // 標準模式按鈕
                    newProject: document.getElementById('newProject'),
                    openProject: document.getElementById('openProject'),
                    tvSettings: document.getElementById('tvSettings'),
                    zoomIn: document.getElementById('zoomIn'),
                    zoomOut: document.getElementById('zoomOut'),
                    toggleSnap: document.getElementById('toggleSnap')
                };
            }
            
            initEventListeners() {
                // 啟動模擬器
	                this.elements.launchSimulator.addEventListener('click', () => {
	                    this.launchSimulator();
	                    this.simulateSound('startup'); // 新增：啟動音效
	                });
                
                // 返回主頁
                this.elements.backToHome.addEventListener('click', () => this.backToHome());
                
                // 行動選單
                this.elements.mobileMenuBtn.addEventListener('click', () => {
                    this.elements.navControls.classList.toggle('active');
                });
                
                // 指南按鈕
                this.elements.guideBtn.addEventListener('click', () => {
                    this.showStatus('開啟平台運作流程指南，請查看首頁下方詳細說明。');
                    window.scrollTo({ top: document.querySelector('.platform-guide').offsetTop, behavior: 'smooth' });
                });
                
                this.elements.demoBtn.addEventListener('click', () => this.startDemo());
                this.elements.tutorialBtn.addEventListener('click', () => this.startTutorial());
                this.elements.helpBtn.addEventListener('click', () => this.toggleHelpPanel());
                
                // 系統控制
                this.elements.systemSettings.addEventListener('click', () => this.openSystemSettings());
	                this.elements.emergencyStop.addEventListener('click', () => {
	                    this.emergencyStop();
	                    this.simulateSound('shutdown'); // 新增：關閉音效
	                });
	                this.elements.quickSave.addEventListener('click', () => this.quickSave());
                
                // 模式切換
                this.elements.modeButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        const mode = e.currentTarget.getAttribute('data-enter-mode');
                        this.switchMode(mode);
                    });
                });
                
                this.elements.backToMain.addEventListener('click', () => this.switchMode('main'));
                this.elements.backToMain2.addEventListener('click', () => this.switchMode('main'));
                
                // 直播控制
                this.elements.startLive.addEventListener('click', () => this.toggleLiveStream());
                this.elements.togglePreview.addEventListener('click', () => this.togglePreviewMode());
                this.elements.addGraphic.addEventListener('click', () => this.addLiveGraphic());
                this.elements.switchCamera.addEventListener('click', () => this.switchCamera());
                
                // 錄音控制
                this.elements.startRecording.addEventListener('click', () => this.toggleRecording());
                this.elements.toggleMonitoring.addEventListener('click', () => this.toggleMonitoring());
                this.elements.noiseReduction.addEventListener('click', () => this.toggleNoiseReduction());

	            // 網紅直播模式控制 (新增)
	                document.getElementById('startLiveKol')?.addEventListener('click', () => {
	                    this.toggleLiveStreamKol();
	                    if (this.state.isStreamingKol) {
	                        this.simulateSound('startup'); // 模擬直播開始音效
	                    } else {
	                        this.simulateSound('shutdown'); // 模擬直播結束音效
	                    }
	                });
	                document.getElementById('toggleBeautyFilter')?.addEventListener('click', () => this.toggleBeautyFilter());
	                document.getElementById('addSticker')?.addEventListener('click', () => this.addSticker());
	                document.getElementById('switchCameraKol')?.addEventListener('click', () => this.switchCameraKol());
	                document.getElementById('enableCameraBtnKol')?.addEventListener('click', () => this.enableCameraKol());
	                document.getElementById('playBGM')?.addEventListener('click', () => this.playBGM());
	                document.getElementById('stopBGM')?.addEventListener('click', () => this.stopBGM());

	                // 新聞主播設備控制 (新增)
	                document.getElementById('newsAnchorSettings')?.addEventListener('click', () => this.showNewsAnchorSettings());
	                document.getElementById('startNewsLive')?.addEventListener('click', () => {
	                    this.toggleNewsLive();
	                    if (this.state.isNewsLive) {
	                        this.simulateSound('startup'); // 模擬直播開始音效
	                    } else {
	                        this.simulateSound('shutdown'); // 模擬直播結束音效
	                    }
	                });
	                document.getElementById('toggleNewsLive')?.addEventListener('click', () => this.toggleNewsLive());
	                document.getElementById('toggleNewsMute')?.addEventListener('click', () => this.toggleNewsMute());
	                document.getElementById('newsFullscreen')?.addEventListener('click', () => this.newsFullscreen());
	                document.getElementById('switchNewsScene')?.addEventListener('click', () => this.switchNewsScene());
	                document.getElementById('teleprompterStart')?.addEventListener('click', () => this.startTeleprompter());
	                document.getElementById('teleprompterStop')?.addEventListener('click', () => this.stopTeleprompter());
	                document.getElementById('teleprompterSpeed')?.addEventListener('input', (e) => this.updateTeleprompterSpeed(e.target.value));
	                document.getElementById('teleprompterFontSize')?.addEventListener('input', (e) => this.updateTeleprompterFontSize(e.target.value));
	                document.getElementById('breakingNewsCutIn')?.addEventListener('click', () => this.breakingNewsCutIn()); // 新增事件監聽器
	                document.getElementById('cameraMoveUp')?.addEventListener('click', () => this.moveCamera('up')); // 新增鏡頭控制
	                document.getElementById('cameraMoveDown')?.addEventListener('click', () => this.moveCamera('down')); // 新增鏡頭控制
	                document.getElementById('cycleAudienceContent')?.addEventListener('click', () => this.cycleAudienceContent()); // 新增觀眾畫面控制
	                document.getElementById('toggleReplay')?.addEventListener('click', () => this.toggleReplay()); // 新增觀眾畫面控制
	                document.querySelectorAll('.scene-thumb').forEach(thumb => {
	                    thumb.addEventListener('click', (e) => this.switchNewsScene(e.currentTarget.getAttribute('data-scene')));
	                });

	                // 標準模式控制
	                if (this.elements.newProject) {
                    this.elements.newProject.addEventListener('click', () => this.createNewProject());
                }
                if (this.elements.openProject) {
                    this.elements.openProject.addEventListener('click', () => this.openExistingProject());
                }
                if (this.elements.tvSettings) {
                    this.elements.tvSettings.addEventListener('click', () => this.showSettingsPanel());
                }
                if (this.elements.zoomIn) {
                    this.elements.zoomIn.addEventListener('click', () => this.zoomTimeline(1.2));
                }
                if (this.elements.zoomOut) {
                    this.elements.zoomOut.addEventListener('click', () => this.zoomTimeline(0.8));
                }
                if (this.elements.toggleSnap) {
                    this.elements.toggleSnap.addEventListener('click', () => this.toggleSnapToGrid());
                }

	            // 音量控制
	                this.elements.masterVolume.addEventListener('input', (e) => {
	                    const value = e.target.value;
	                    this.elements.masterVolumeValue.textContent = `${value} dB`;
	                    this.updateSimulation(); // 新增：即時更新模擬
	                });
	                
	                this.elements.trebleBoost.addEventListener('input', (e) => {
	                    const value = e.target.value;
	                    const sign = value >= 0 ? '+' : '';
	                    this.elements.trebleValue.textContent = `${sign}${value} dB`;
	                    this.updateSimulation(); // 新增：即時更新模擬
	                });
	                
	                this.elements.bassBoost.addEventListener('input', (e) => {
	                    const value = e.target.value;
	                    const sign = value >= 0 ? '+' : '';
	                    this.elements.bassValue.textContent = `${sign}${value} dB`;
	                    this.updateSimulation(); // 新增：即時更新模擬
	                });
	                
	                this.elements.compression.addEventListener('input', (e) => {
	                    const value = e.target.value;
	                    this.elements.compressionValue.textContent = `${value}:1`;
	                    this.updateSimulation(); // 新增：即時更新模擬
	                });
                
                // 關閉狀態通知
                this.elements.closeStatus.addEventListener('click', () => {
                    this.elements.simulatorStatus.classList.remove('show');
                });
                
	            // 關閉幫助面板
	                this.elements.closeHelp.addEventListener('click', () => {
	                    this.elements.helpPanel.classList.remove('show');
	                });

	                // 新增：網紅直播模式的音量控制
	                document.getElementById('micVolumeKol')?.addEventListener('input', () => this.updateSimulation());
	                document.getElementById('bgmVolume')?.addEventListener('input', () => this.updateSimulation());
	                document.getElementById('beautyWhite')?.addEventListener('input', () => this.updateSimulation());
	                document.getElementById('beautySmooth')?.addEventListener('input', () => this.updateSimulation());
	                document.getElementById('filterStrength')?.addEventListener('input', () => this.updateSimulation());
                
                // 視窗點擊關閉幫助
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.help-panel') && !e.target.closest('#helpBtn')) {
                        this.elements.helpPanel.classList.remove('show');
                    }
                });
                
                // 視窗調整大小
                window.addEventListener('resize', () => this.handleResize());

                // 工具分類按鈕事件
                this.initCategoryEvents();
            }

            initCategoryEvents() {
                // 工具分類按鈕
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const action = e.currentTarget.getAttribute('data-action');
                        const category = e.currentTarget.getAttribute('data-category');
                        this.handleCategoryAction(action, category);
                    });
                });

                // 工具項目點擊事件
                document.querySelectorAll('.category-tools li').forEach(item => {
                    item.addEventListener('click', (e) => {
                        const toolId = e.currentTarget.getAttribute('data-tool');
                        if (toolId) {
                            this.openToolDetail(toolId);
                        }
                    });
                });

                // 平台運作指南彈窗
                const guideModalOverlay = document.getElementById('guideModalOverlay');
                const openGuideModal = document.getElementById('openGuideModal');
                const closeGuideModal = document.getElementById('closeGuideModal');

                if (openGuideModal) {
                    openGuideModal.addEventListener('click', () => {
                        guideModalOverlay.classList.add('show');
                    });
                }

                if (closeGuideModal) {
                    closeGuideModal.addEventListener('click', () => {
                        guideModalOverlay.classList.remove('show');
                    });
                }

                if (guideModalOverlay) {
                    guideModalOverlay.addEventListener('click', (e) => {
                        if (e.target === guideModalOverlay) {
                            guideModalOverlay.classList.remove('show');
                        }
                    });
                }

                // 類別頁面返回按鈕
                document.querySelectorAll('.back-to-main-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.switchMode('main');
                    });
                });

                // 場景切換功能
                document.querySelectorAll('.scene-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        const sceneGrid = e.currentTarget.closest('.scene-grid');
                        if (sceneGrid) {
                            sceneGrid.querySelectorAll('.scene-item').forEach(s => s.classList.remove('active'));
                            e.currentTarget.classList.add('active');
                            const sceneName = e.currentTarget.querySelector('span').textContent;
                            this.showStatus(`已切換至「${sceneName}」場景`);
                        }
                    });
                });

                // 預設按鈕切換
                document.querySelectorAll('.preset-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const container = e.currentTarget.closest('.reverb-presets');
                        if (container) {
                            container.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
                            e.currentTarget.classList.add('active');
                            this.showStatus(`已套用「${e.currentTarget.textContent}」預設`);
                        }
                    });
                });

	            // 頻道按鈕切換
	                document.querySelectorAll('.channel-btn').forEach(btn => {
	                    btn.addEventListener('click', (e) => {
	                        if (!e.currentTarget.classList.contains('mute') &&
	                            !e.currentTarget.classList.contains('solo') &&
	                            !e.currentTarget.classList.contains('rec')) {
	                            return;
	                        }
	                        e.currentTarget.classList.toggle('active');
	                        this.simulateSound('walkie_talkie'); // 模擬對講機音效
	                    });
	                });

                // 轉場時長滑桿
                const transitionDuration = document.getElementById('transitionDuration');
                const transitionDurationValue = document.getElementById('transitionDurationValue');
                if (transitionDuration && transitionDurationValue) {
                    transitionDuration.addEventListener('input', (e) => {
                        transitionDurationValue.textContent = e.target.value + 'ms';
                    });
                }

                // EQ 滑桿事件
                document.querySelectorAll('.eq-band input').forEach(slider => {
                    slider.addEventListener('input', (e) => {
                        const band = e.target.closest('.eq-band');
                        const valueDisplay = band.querySelector('.band-value');
                        const val = parseInt(e.target.value);
                        valueDisplay.textContent = (val >= 0 ? '+' : '') + val + 'dB';
                    });
                });

                // 播放按鈕
                document.querySelectorAll('.transport-btn.play').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const icon = e.currentTarget.querySelector('i');
                        if (icon.classList.contains('fa-play')) {
                            icon.classList.remove('fa-play');
                            icon.classList.add('fa-pause');
                            this.showStatus('開始播放');
                        } else {
                            icon.classList.remove('fa-pause');
                            icon.classList.add('fa-play');
                            this.showStatus('暫停播放');
                        }
                    });
                });

                // 主題選項切換
                document.querySelectorAll('.theme-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        document.querySelectorAll('.theme-option').forEach(o => o.classList.remove('active'));
                        e.currentTarget.classList.add('active');
                        const theme = e.currentTarget.getAttribute('data-theme');
                        this.showStatus(`已切換至「${theme === 'dark' ? '深色' : theme === 'light' ? '淺色' : '跟隨系統'}」主題`);
                    });
                });

                // 強調色選項
                document.querySelectorAll('.color-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        document.querySelectorAll('.color-option').forEach(o => o.classList.remove('active'));
                        e.currentTarget.classList.add('active');
                        this.showStatus('已更新強調色');
                    });
                });

                // 平台選擇勾選
                document.querySelectorAll('.platform-checkbox input').forEach(checkbox => {
                    checkbox.addEventListener('change', (e) => {
                        const platformName = e.target.closest('.platform-checkbox').querySelector('span').textContent;
                        if (e.target.checked) {
                            this.showStatus(`已選擇「${platformName}」平台`);
                        } else {
                            this.showStatus(`已取消「${platformName}」平台`);
                        }
                    });
                });

                // 心情按鈕選擇
                document.querySelectorAll('.mood-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const container = e.currentTarget.closest('.mood-options');
                        if (container) {
                            container.querySelectorAll('.mood-btn').forEach(b => b.classList.remove('active'));
                            e.currentTarget.classList.add('active');
                            this.showStatus(`已選擇「${e.currentTarget.textContent}」風格`);
                        }
                    });
                });

                // 開始廣播按鈕
                const startBroadcast = document.getElementById('startBroadcast');
                if (startBroadcast) {
                    startBroadcast.addEventListener('click', () => {
                        if (startBroadcast.classList.contains('broadcasting')) {
                            startBroadcast.classList.remove('broadcasting');
                            startBroadcast.innerHTML = '<i class="fas fa-broadcast-tower"></i> 開始廣播';
                            startBroadcast.classList.remove('btn-danger');
                            startBroadcast.classList.add('btn-success');
                            this.showStatus('廣播已停止');
                        } else {
                            startBroadcast.classList.add('broadcasting');
                            startBroadcast.innerHTML = '<i class="fas fa-stop"></i> 停止廣播';
                            startBroadcast.classList.remove('btn-success');
                            startBroadcast.classList.add('btn-danger');
                            this.showStatus('廣播已開始，正在串流中...');
                        }
                    });
                }

                // 主錄音按鈕
                const masterRecord = document.getElementById('masterRecord');
                if (masterRecord) {
                    masterRecord.addEventListener('click', () => {
                        if (masterRecord.classList.contains('recording')) {
                            masterRecord.classList.remove('recording');
                            masterRecord.innerHTML = '<i class="fas fa-circle"></i> 開始錄音';
                            this.showStatus('錄音已停止');
                        } else {
                            masterRecord.classList.add('recording');
                            masterRecord.innerHTML = '<i class="fas fa-stop"></i> 停止錄音';
                            this.showStatus('錄音已開始');
                            this.simulateRecordingTime();
                        }
                    });
                }

                // AI 轉錄按鈕
                const startTranscription = document.getElementById('startTranscription');
                if (startTranscription) {
                    startTranscription.addEventListener('click', () => {
                        startTranscription.disabled = true;
                        startTranscription.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 轉錄中...';
                        this.showStatus('AI 正在進行語音轉錄...');
                        setTimeout(() => {
                            startTranscription.disabled = false;
                            startTranscription.innerHTML = '<i class="fas fa-play"></i> 開始轉錄';
                            this.showStatus('轉錄完成！');
                        }, 3000);
                    });
                }

                // AI 降噪按鈕
                const applyDenoise = document.getElementById('applyDenoise');
                if (applyDenoise) {
                    applyDenoise.addEventListener('click', () => {
                        applyDenoise.disabled = true;
                        applyDenoise.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 處理中...';
                        this.showStatus('AI 正在進行智能降噪...');
                        setTimeout(() => {
                            applyDenoise.disabled = false;
                            applyDenoise.innerHTML = '<i class="fas fa-magic"></i> 應用 AI 降噪';
                            this.showStatus('降噪處理完成！');
                        }, 2500);
                    });
                }

                // 生成音樂按鈕
                const generateMusic = document.getElementById('generateMusic');
                if (generateMusic) {
                    generateMusic.addEventListener('click', () => {
                        generateMusic.disabled = true;
                        generateMusic.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 生成中...';
                        this.showStatus('AI 正在生成背景音樂...');
                        setTimeout(() => {
                            generateMusic.disabled = false;
                            generateMusic.innerHTML = '<i class="fas fa-magic"></i> 生成音樂 (消耗 50 點)';
                            this.showStatus('音樂生成完成！');
                        }, 4000);
                    });
                }

                // 發佈按鈕
                const publishNowBtn = document.getElementById('publishNowBtn');
                if (publishNowBtn) {
                    publishNowBtn.addEventListener('click', () => {
                        this.showStatus('正在發佈到已選擇的平台...');
                        setTimeout(() => {
                            this.showStatus('發佈成功！內容已上傳至所有選擇的平台。');
                        }, 2000);
                    });
                }

                // 掃描設備
                const scanDevices = document.getElementById('scanDevices');
                if (scanDevices) {
                    scanDevices.addEventListener('click', () => {
                        scanDevices.disabled = true;
                        scanDevices.innerHTML = '<i class="fas fa-sync fa-spin"></i> 掃描中...';
                        this.showStatus('正在掃描可用設備...');
                        setTimeout(() => {
                            scanDevices.disabled = false;
                            scanDevices.innerHTML = '<i class="fas fa-sync"></i> 掃描新設備';
                            this.showStatus('設備掃描完成，未發現新設備。');
                        }, 2000);
                    });
                }

                // 團隊聊天發送
                const chatInput = document.querySelector('.chat-input');
                const sendBtn = document.querySelector('.send-btn');
                if (chatInput && sendBtn) {
                    sendBtn.addEventListener('click', () => {
                        if (chatInput.value.trim()) {
                            const chatMessages = document.getElementById('teamChatMessages');
                            if (chatMessages) {
                                const now = new Date();
                                const time = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
                                const msgDiv = document.createElement('div');
                                msgDiv.className = 'chat-msg';
                                msgDiv.innerHTML = `<span class="msg-author">You:</span><span class="msg-text">${chatInput.value}</span><span class="msg-time">${time}</span>`;
                                chatMessages.appendChild(msgDiv);
                                chatMessages.scrollTop = chatMessages.scrollHeight;
                            }
                            chatInput.value = '';
                            this.showStatus('訊息已發送');
                        }
                    });
                    chatInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            sendBtn.click();
                        }
                    });
                }
            }

            simulateRecordingTime() {
                const masterRecordTime = document.getElementById('masterRecordTime');
                const masterRecord = document.getElementById('masterRecord');
                if (!masterRecordTime || !masterRecord) return;

                let seconds = 0;
                const interval = setInterval(() => {
                    if (!masterRecord.classList.contains('recording')) {
                        clearInterval(interval);
                        return;
                    }
                    seconds++;
                    const hrs = Math.floor(seconds / 3600).toString().padStart(2, '0');
                    const mins = Math.floor((seconds % 3600) / 60).toString().padStart(2, '0');
                    const secs = (seconds % 60).toString().padStart(2, '0');
                    masterRecordTime.textContent = `${hrs}:${mins}:${secs}`;
                }, 1000);
            }

            handleCategoryAction(action, category) {
                const categoryNames = {
                    'broadcast': '直播與廣播',
                    'recording': '錄音與收音',
                    'mixing': '混音與效果',
                    'editing': '編輯與後期',
                    'settings': '設備與設定',
                    'publish': '發佈與分享',
                    'ai-tools': 'AI 智能工具',
                    'collaboration': '協作與團隊',
                    'audio-library': '音效資源庫',
                    'live-prep': '直播前期準備',
                    'news-anchor': '新聞主播設備'
                };

                if (action === 'info') {
                    this.showCategoryInfo(category, categoryNames[category]);
                } else if (action === 'enter') {
                    this.enterCategoryTools(category, categoryNames[category]);
                }
            }

            showCategoryInfo(category, name) {
                const descriptions = {
                    'broadcast': '直播與廣播工具組提供完整的實時串流解決方案，包含 OBS 場景控制、多平台同步直播、虛擬攝影機、即時字幕生成等功能。支援最高 4K 60fps 串流，延遲低於 2 秒。',
                    'recording': '專業錄音工作室模擬器，支援最高 32 軌同步錄音、192kHz/32bit 高解析度錄音、AI 智能降噪、麥克風陣列模擬等進階功能。',
                    'mixing': '32 軌數位混音台提供專業級音訊處理能力，包含參數等化器、動態處理器、空間混響、立體聲成像等效果器，支援效果鏈自動化控制。',
                    'editing': '非破壞性多軌時間軸編輯器，支援時間伸縮、變調、頻譜分析、母帶處理等功能，可匯出多種格式並支援批次處理。',
                    'settings': '系統設定中心提供設備管理、效能優化、快捷鍵自訂、介面主題設計等功能，確保工作環境符合您的需求。',
                    'publish': '一鍵發佈至 Spotify、Apple Podcasts、YouTube 等平台，支援 RSS 自動生成、SEO 優化、聽眾分析與收益管理。',
                    'ai-tools': 'AI 驅動的智能工具套件，包含自動轉錄、智能降噪、背景音樂生成、聲音克隆、自動剪輯等功能，大幅提升製作效率。',
                    'collaboration': '遠端協作工具支援多人同步編輯、版本控制、任務分配、審核回饋等功能，讓團隊製作更加順暢。',
                    'audio-library': '音效資源庫提供豐富的音效素材、背景音樂與音訊模板，支援分類搜尋與快速預覽。',
                    'live-prep': '直播前期準備工具提供設備檢測、場景設計、倒數計時與清單管理，確保直播萬無一失。',
                    'news-anchor': '專業新聞直播設備模擬，包含提詞器、新聞圖表、即時連線、虛擬演播室等電視台級工具，支援即時直播預覽與重播回放功能。'
                };

                this.showAlertDialog(
                    `${name} - 功能介紹`,
                    descriptions[category] || '此工具組提供專業級的播客製作功能。',
                    'info'
                );
            }

            enterCategoryTools(category, name) {
                this.showStatus(`進入「${name}」工具組，載入專業工具中...`);

                // 切換到對應的類別頁面
                setTimeout(() => {
                    this.switchMode(category);
                    this.showStatus(`已載入「${name}」相關工具，請開始使用。`);
                }, 300);
            }

            openToolDetail(toolId) {
                const toolInfo = this.getToolInfo(toolId);
                if (!toolInfo) {
                    this.showStatus(`正在開啟工具: ${toolId}`);
                    return;
                }

                // 創建工具詳情面板
                this.showToolPanel(toolInfo);
            }

            getToolInfo(toolId) {
                const tools = {
                    'obs-director': {
                        name: 'OBS 場景導播控制台',
                        icon: 'camera',
                        description: '專業級 OBS 場景控制系統，支援多場景即時切換、來源管理、轉場效果與快捷鍵控制。',
                        features: ['多場景即時切換', '來源疊加管理', '自訂轉場效果', '快捷鍵配置', '場景預覽監控']
                    },
                    'stream-manager': {
                        name: '多平台串流管理器',
                        icon: 'satellite-dish',
                        description: '同時向多個平台進行直播串流，支援 YouTube、Twitch、Facebook 等主流平台。',
                        features: ['多平台同步串流', '串流金鑰管理', '位元率自適應', '斷線自動重連', '串流狀態監控']
                    },
                    'virtual-camera': {
                        name: '虛擬攝影機工作室',
                        icon: 'video',
                        description: '創建虛擬攝影機輸出，可與任何視訊會議軟體整合使用。',
                        features: ['虛擬攝影機輸出', '背景替換', '畫中畫���式', '濾鏡效果', '即時預覽']
                    },
                    'live-caption': {
                        name: '即時字幕系統',
                        icon: 'closed-captioning',
                        description: 'AI 驅動的即時字幕生成系統，支援多語言即時翻譯。',
                        features: ['即時語音識別', '多語言翻譯', '字幕樣式自訂', '時間軸同步', 'SRT 匯出']
                    },
                    'stream-analytics': {
                        name: '串流數據分析儀',
                        icon: 'chart-line',
                        description: '即時監控串流效能與觀眾互動數據，提供深入分析報告。',
                        features: ['即時位元率監控', '觀眾人數統計', '互動熱力圖', '效能警報', '歷史數據分析']
                    },
                    'multi-cam': {
                        name: '多機位切換控制器',
                        icon: 'th-large',
                        description: '專業級多機位切換系統，支援最多 8 個視訊來源即時切換。',
                        features: ['8 路視訊輸入', '預覽/節目雙視窗', '轉場特效', 'Tally 燈控制', '自動切換腳本']
                    },
                    'stream-deck': {
                        name: 'Stream Deck 控制面板',
                        icon: 'gamepad',
                        description: '可自訂的實體按鍵控制面板，快速執行常用操作。',
                        features: ['自訂按鍵功能', '多頁面支援', 'LED 動態圖示', '巨集錄製', '整合第三方應用']
                    },
                    'multitrack-studio': {
                        name: '多軌錄音工作室',
                        icon: 'wave-square',
                        description: '專業級多軌錄音系統，支援最高 32 軌同步錄音，192kHz/32bit 高解析度。',
                        features: ['32 軌同步錄音', '高解析度支援', '實時監聽', '自動分段', '時間碼同步']
                    },
                    'monitor-console': {
                        name: '專業監聽控制台',
                        icon: 'headphones',
                        description: '精確的音訊監聽系統，支援多組監聽輸出與個人化混音。',
                        features: ['多組監聽輸出', 'Cue 系統', '對講功能', '音量校準', '參考音源切換']
                    },
                    'noise-reduction': {
                        name: '即時噪音消除系統',
                        icon: 'filter',
                        description: '先進的噪音消除技術，即時消除背景噪音與干擾。',
                        features: ['AI 智能降噪', '頻率選擇性消除', '即時處理', '噪音採樣學習', '透明度調整']
                    },
                    'ai-enhance': {
                        name: 'AI 音訊增強實驗室',
                        icon: 'robot',
                        description: 'AI 驅動的音訊品質增強工具，自動優化錄音品質。',
                        features: ['自動音量平衡', '清晰度增強', '去除爆音', '頻寬擴展', '聲音修復']
                    },
                    'recording-scheduler': {
                        name: '錄音排程管理器',
                        icon: 'clock',
                        description: '自動化錄音排程系統，按時間表自動開始和結束錄音。',
                        features: ['定時錄音', '週期性排程', '自動命名', '雲端備份', '通知提醒']
                    },
                    'mic-array': {
                        name: '麥克風陣列模擬器',
                        icon: 'border-all',
                        description: '模擬專業麥克風陣列，提供 3D 空間音訊錄製能力。',
                        features: ['虛擬麥克風定位', '波束成形', '空間音訊', '���位校正', '多格式輸出']
                    },
                    'voice-changer': {
                        name: '變聲器與音色調整',
                        icon: 'theater-masks',
                        description: '即時變聲效果器，提供多種預設音色與自訂參數調整。',
                        features: ['即時變聲', '音高調整', '共振峰控制', '預設音色庫', '自訂參數儲存']
                    },
                    'digital-mixer': {
                        name: '32 軌數位混音台',
                        icon: 'sliders-h',
                        description: '專業級數位混音控制台，提供完整的音訊路由、效果處理與自動化控制。',
                        features: ['32 軌混音', '4 組 AUX 發送', '內建效果器', '場景記憶', '自動化控制']
                    },
                    'effects-suite': {
                        name: '專業效果器套裝',
                        icon: 'magic',
                        description: '完整的專業音訊效果器套裝，包含壓縮、限制、門控等工具。',
                        features: ['壓縮器', '限制器', '噪音門', 'De-esser', '飽和效果器']
                    },
                    'parametric-eq': {
                        name: '參數等化器',
                        icon: 'chart-bar',
                        description: '專業級參數等化器，提供精確的頻率調整與頻譜分析。',
                        features: ['8 段參數 EQ', '高/低切濾波', '頻譜即時顯示', 'A/B 比較', '預設管理']
                    },
                    'dynamics-processor': {
                        name: '動態處理器',
                        icon: 'compress-alt',
                        description: '專業動態處理工具，控制音訊的動態範圍與響度。',
                        features: ['多段壓縮', '向上/向下壓縮', '並行處理', '旁鏈輸入', '響度計量']
                    },
                    'effects-chain': {
                        name: '效果鏈設計器',
                        icon: 'project-diagram',
                        description: '視覺化效果鏈設計工具，自由組合與排列音訊效果。',
                        features: ['拖放式設計', '並行處理', '旁鏈路由', '預設儲存', '即時切換']
                    },
                    'reverb-designer': {
                        name: '空間混響設計器',
                        icon: 'synagogue',
                        description: '專業級混響效果器，模擬各種空間環境的聲學特性。',
                        features: ['空間模擬', '卷積混響', 'IR 載入', '早期反射', '擴散控制']
                    },
                    'stereo-imager': {
                        name: '立體聲成像工具',
                        icon: 'arrows-alt-h',
                        description: '精確控制立體聲場寬度與位置，優化空間感。',
                        features: ['寬度控制', '相位相關儀', 'M/S 處理', '頻率相關展寬', '立體聲增強']
                    },
                    'timeline-editor': {
                        name: '多軌時間軸編輯器',
                        icon: 'cut',
                        description: '專業級非破壞性音訊編輯器，支援多軌時間軸操作。',
                        features: ['無限軌道', '淡入淡出', '交叉淡化', '時間伸縮', '自動化曲線']
                    },
                    'time-stretch': {
                        name: '時間伸縮與變調工具',
                        icon: 'clock',
                        description: '高品質時間伸縮與音高調整工具，保持音訊品質。',
                        features: ['時間伸縮', '音高調整', '共振峰保持', '即時預覽', '批次處理']
                    },
                    'spectrum-analyzer': {
                        name: '頻譜分析儀',
                        icon: 'search',
                        description: '專業頻譜分析工具，提供詳細的頻率與響度分析。',
                        features: ['即時頻譜', 'FFT 分析', '瀑布圖', '響度計量', '峰值記錄']
                    },
                    'mastering-studio': {
                        name: '母帶處理工作站',
                        icon: 'file-export',
                        description: '專業母帶處理工具，完成最終的音訊優化與輸出。',
                        features: ['多段壓縮', '限制器', '響度標準化', '取樣率轉換', '多格式輸出']
                    },
                    'speech-to-text': {
                        name: '語音轉文字系統',
                        icon: 'language',
                        description: '高精度語音識別系統，自動生成文字稿與字幕。',
                        features: ['多語言識別', '說話者分離', '時間碼標記', 'SRT 輸出', '可編輯文稿']
                    },
                    'batch-processor': {
                        name: '批次處理引擎',
                        icon: 'layer-group',
                        description: '自動化批次處理工具，同時處理多個音訊檔案。',
                        features: ['批次轉檔', '效果套���', '命名規則', '資料夾監控', '處理佇列']
                    },
                    'audio-repair': {
                        name: '音訊修復工具',
                        icon: 'wrench',
                        description: '專業音訊修復工具，修復損壞或有缺陷的錄音。',
                        features: ['削波修復', '爆音移除', '嗡嗡聲消除', '填補空白', '頻譜編輯']
                    },
                    'ai-transcription': {
                        name: 'AI 自動轉錄系統',
                        icon: 'file-alt',
                        description: 'AI 驅動的語音轉文字系統，支援多語言識別、說話者分離與時間碼標記。',
                        features: ['多語言識別', '說話者分離', '時間碼標記', '自動標點', '可編輯輸出']
                    },
                    'ai-noise-remove': {
                        name: 'AI 智能降噪',
                        icon: 'volume-mute',
                        description: 'AI 驅動的智能降噪系統，自動識別並消除各種背景噪音。',
                        features: ['自動噪音識別', '選擇性消除', '語音增強', '環境適應', '即時處理']
                    },
                    'ai-music-gen': {
                        name: 'AI 背景音樂生成',
                        icon: 'music',
                        description: 'AI 自動生成版權自由的背景音樂，適合各種節目風格。',
                        features: ['風格選擇', '長度自訂', '情緒控制', '無縫循環', '商業授權']
                    },
                    'ai-voice-clone': {
                        name: 'AI 聲音克隆',
                        icon: 'user-astronaut',
                        description: 'AI 聲音克隆技術，建立您的專屬語音模型。',
                        features: ['聲音採樣', '文字轉語音', '情感控制', '多語言支援', '聲音調整']
                    },
                    'ai-content-suggest': {
                        name: 'AI 內容建議引擎',
                        icon: 'lightbulb',
                        description: 'AI 分析您的內容，提供優化建議與創意靈感。',
                        features: ['內容分析', '標題建議', 'SEO 優化', '受眾分析', '趨勢追蹤']
                    },
                    'ai-auto-edit': {
                        name: 'AI 自動剪輯',
                        icon: 'wand-magic-sparkles',
                        description: 'AI 自動剪輯工���，智能移除沉默、失誤與冗餘內容。',
                        features: ['沉默移除', '失誤偵測', '重點提取', '節奏優化', '一鍵匯出']
                    },
                    'ai-translation': {
                        name: 'AI 多語言翻譯',
                        icon: 'globe',
                        description: 'AI 即時翻譯系統，將您的內容翻譯成多種語言。',
                        features: ['即時翻譯', '100+ 語言', '語境理解', '術語管理', '人工校對']
                    },
                    'remote-studio': {
                        name: '遠端錄音工作室',
                        icon: 'globe-americas',
                        description: '低延遲遠端錄音解決方案，讓團隊成員可以從不同地點同步錄製高品質音訊。',
                        features: ['低延遲傳輸', '多人同步錄音', '自動同步', '備份錄音', '即時通訊']
                    },
                    'team-chat': {
                        name: '團隊即時通訊',
                        icon: 'comment-dots',
                        description: '專為製作團隊設計的即時通訊工具，整合專案管理功能。',
                        features: ['頻道管理', '檔案分享', '語音通話', '螢幕分享', '任務指派']
                    },
                    'version-control': {
                        name: '版本控制系統',
                        icon: 'code-branch',
                        description: '專案版本控制系統，追蹤所有修改歷史並支援回溯。',
                        features: ['版本追蹤', '分支管理', '差異比較', '歷史回溯', '衝突解決']
                    },
                    'device-manager': {
                        name: '設備連接管理器',
                        icon: 'plug',
                        description: '集中管理所有音訊設備連接與設定。',
                        features: ['設備偵測', '驅動管理', '延遲補償', '路由設定', '狀態監控']
                    },
                    'rss-generator': {
                        name: 'RSS 摘要生成器',
                        icon: 'rss',
                        description: '自動生成標準播客 RSS 摘要，相容所有主流平台。',
                        features: ['自動生成', '標籤管理', '章節標記', 'iTunes 相容', '驗證工具']
                    },
                    'multi-publish': {
                        name: '多平台發佈助手',
                        icon: 'share-alt',
                        description: '一鍵發佈至多個播客平台，簡化發佈流程。',
                        features: ['多平台同步', '排程發佈', '格式轉換', '元數據管理', '發佈追蹤']
                    },
                    'audience-analytics': {
                        name: '聽眾數據分析',
                        icon: 'chart-pie',
                        description: '深入分析聽眾行為與偏好，優化您的內容策略。',
                        features: ['下載統計', '地區分佈', '收聽時長', '留存分析', '趨勢報告']
                    }
                };

                return tools[toolId] || null;
            }

            showToolPanel(toolInfo) {
                // 移除現有面板
                const existingPanel = document.querySelector('.tool-detail-panel');
                if (existingPanel) existingPanel.remove();

                // 創建面板
                const panel = document.createElement('div');
                panel.className = 'tool-detail-panel';
                panel.innerHTML = `
                    <div class="tool-detail-header">
                        <div class="tool-detail-title">
                            <i class="fas fa-${toolInfo.icon}"></i>
                            ${toolInfo.name}
                        </div>
                        <button class="tool-detail-close"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-detail-content">
                        <p style="color: var(--gray); margin-bottom: 20px; line-height: 1.7;">${toolInfo.description}</p>
                        <h4 style="color: var(--primary); margin-bottom: 15px;"><i class="fas fa-star"></i> 主要功能</h4>
                        <ul class="tool-feature-list">
                            ${toolInfo.features.map(f => `<li><i class="fas fa-check"></i> ${f}</li>`).join('')}
                        </ul>
                        <div class="tool-action-buttons">
                            <button class="tool-action-btn" data-action="launch"><i class="fas fa-rocket"></i> 啟動工具</button>
                            <button class="tool-action-btn secondary" data-action="tutorial"><i class="fas fa-graduation-cap"></i> 觀看教學</button>
                        </div>
                    </div>
                `;

                document.body.appendChild(panel);

                // 顯示動畫
                requestAnimationFrame(() => {
                    panel.classList.add('show');
                });

                // 關閉按鈕
                panel.querySelector('.tool-detail-close').addEventListener('click', () => {
                    panel.classList.remove('show');
                    setTimeout(() => panel.remove(), 400);
                });

                // 動作按鈕
                panel.querySelectorAll('.tool-action-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const action = e.currentTarget.getAttribute('data-action');
                        if (action === 'launch') {
                            this.showStatus(`正在啟動「${toolInfo.name}」...`);
                            panel.classList.remove('show');
                            setTimeout(() => {
                                panel.remove();
                                this.switchMode('tv');
                            }, 400);
                        } else if (action === 'tutorial') {
                            this.showStatus(`正在載入「${toolInfo.name}」教學影片...`);
                        }
                    });
                });

                // 點擊外部關閉
                document.addEventListener('click', function closePanel(e) {
                    if (!panel.contains(e.target) && !e.target.closest('.category-tools li')) {
                        panel.classList.remove('show');
                        setTimeout(() => panel.remove(), 400);
                        document.removeEventListener('click', closePanel);
                    }
                });
            }

            initAudioVisualizer() {
                const visualizer = this.elements.audioVisualizer;
                if (!visualizer) return;
                
                // 創建 128 個音頻條
                for (let i = 0; i < 128; i++) {
                    const bar = document.createElement('div');
                    bar.className = 'visualizer-bar';
                    bar.style.left = `${i * 3}px`;
                    bar.style.width = '2px';
                    bar.style.height = '10px';
                    visualizer.appendChild(bar);
                }
                
                // 模擬音頻動畫
                this.audioVisualizationInterval = setInterval(() => {
                    const bars = visualizer.querySelectorAll('.visualizer-bar');
                    bars.forEach((bar, index) => {
                        // 模擬複雜的音頻波形
                        const baseHeight = 10;
                        const randomFactor = Math.random() * 100;
                        const sineFactor = Math.sin(Date.now() / 500 + index * 0.1) * 50;
                        const cosineFactor = Math.cos(Date.now() / 700 + index * 0.05) * 30;
                        
                        const height = baseHeight + randomFactor + sineFactor + cosineFactor;
                        bar.style.height = `${height}px`;
                        
                        // 根據頻率設置顏色
                        const hue = (index * 2) % 360;
                        if (height > 100) {
                            bar.style.background = `linear-gradient(to top, hsl(${hue}, 100%, 50%), hsl(${(hue + 60) % 360}, 100%, 70%))`;
                        } else if (height > 60) {
                            bar.style.background = `linear-gradient(to top, hsl(${hue}, 80%, 50%), hsl(${(hue + 30) % 360}, 80%, 60%))`;
                        } else {
                            bar.style.background = `linear-gradient(to top, var(--primary), var(--secondary))`;
                        }
                    });
                }, 50);
            }
            
            initTrackManagement() {
                const trackGrid = this.elements.trackGrid;
                if (!trackGrid) return;
                
                trackGrid.innerHTML = '';
                
                this.tracks.forEach(track => {
                    const trackElement = document.createElement('div');
                    trackElement.className = 'track-item';
                    trackElement.innerHTML = `
                        <div class="track-header">
                            <div class="track-name">
                                <i class="fas fa-${track.type === 'voice' ? 'user' : track.type === 'music' ? 'music' : 'bell'}"></i>
                                ${track.name}
                            </div>
                            <div class="track-status" style="background: ${track.recording ? 'var(--danger)' : track.muted ? 'var(--gray)' : 'var(--success)'}; color: white;">
                                ${track.recording ? '錄音中' : track.muted ? '靜音' : '活動中'}
                            </div>
                        </div>
                        <div class="track-waveform" id="waveform-${track.id}">
                            <!-- 波形圖將由 JavaScript 動態生成 -->
                        </div>
                        <div class="track-controls">
                            <button class="track-btn" data-action="mute" data-track="${track.id}">
                                <i class="fas fa-volume-mute"></i> ${track.muted ? '取消靜音' : '靜音'}
                            </button>
                            <button class="track-btn" data-action="solo" data-track="${track.id}">
                                <i class="fas fa-headphones"></i> ${track.solo ? '取消單獨' : '單獨'}
                            </button>
                            <button class="track-btn" data-action="record" data-track="${track.id}">
                                <i class="fas fa-circle"></i> ${track.recording ? '停止' : '錄音'}
                            </button>
                        </div>
                    `;
                    
                    trackGrid.appendChild(trackElement);
                    
                    // 生成波形圖
                    this.generateWaveform(track.id);
                    
                    // 添加軌道控制事件
                    const buttons = trackElement.querySelectorAll('.track-btn');
                    buttons.forEach(button => {
                        button.addEventListener('click', (e) => {
                            const action = e.currentTarget.getAttribute('data-action');
                            const trackId = parseInt(e.currentTarget.getAttribute('data-track'));
                            this.handleTrackAction(action, trackId);
                        });
                    });
                });
            }
            
            generateWaveform(trackId) {
                const waveformContainer = document.getElementById(`waveform-${trackId}`);
                if (!waveformContainer) return;
                
                waveformContainer.innerHTML = '';
                
                // 生成隨機波形
                const width = waveformContainer.offsetWidth;
                const height = waveformContainer.offsetHeight;
                const barCount = Math.floor(width / 4);
                
                for (let i = 0; i < barCount; i++) {
                    const bar = document.createElement('div');
                    bar.className = 'waveform-bar';
                    bar.style.left = `${i * 4}px`;
                    bar.style.width = '2px';
                    
                    // 根據軌道類型生成不同波形
                    let barHeight;
                    if (trackId === 1 || trackId === 2) { // 人聲軌道
                        const baseHeight = Math.sin(i * 0.2) * 0.3 + 0.5;
                        const variation = Math.random() * 0.3;
                        barHeight = (baseHeight + variation) * height;
                    } else if (trackId === 3) { // 背景音樂
                        const baseHeight = Math.sin(i * 0.05) * 0.4 + 0.5;
                        barHeight = baseHeight * height * 0.7;
                    } else { // 音效軌道
                        const baseHeight = Math.random() > 0.7 ? Math.random() * height * 0.8 : 5;
                        barHeight = baseHeight;
                    }
                    
                    bar.style.height = `${barHeight}px`;
                    
                    // 設置顏色
                    if (trackId === 1) {
                        bar.style.background = 'linear-gradient(to top, var(--tv-red), var(--tv-yellow))';
                    } else if (trackId === 2) {
                        bar.style.background = 'linear-gradient(to top, var(--tv-blue), var(--primary))';
                    } else if (trackId === 3) {
                        bar.style.background = 'linear-gradient(to top, var(--accent), var(--accent-light))';
                    } else {
                        bar.style.background = 'linear-gradient(to top, var(--warning), var(--danger))';
                    }
                    
                    waveformContainer.appendChild(bar);
                }
            }
            
            initTimeline() {
                const timelineRuler = this.elements.timelineRuler;
                if (!timelineRuler) return;
                
                // 生成時間標尺 (0-60秒)
                for (let i = 0; i <= 60; i += 5) {
                    const tick = document.createElement('div');
                    tick.style.position = 'absolute';
                    tick.style.left = `${(i / 60) * 100}%`;
                    tick.style.bottom = '0';
                    tick.style.width = '1px';
                    tick.style.height = i % 15 === 0 ? '30px' : '15px';
                    tick.style.background = i % 15 === 0 ? 'var(--primary)' : 'rgba(0, 243, 255, 0.5)';
                    
                    if (i % 15 === 0) {
                        const label = document.createElement('div');
                        label.textContent = `${i}s`;
                        label.style.position = 'absolute';
                        label.style.bottom = '-25px';
                        label.style.left = '-10px';
                        label.style.color = 'var(--primary)';
                        label.style.fontSize = '0.8rem';
                        tick.appendChild(label);
                    }
                    
                    timelineRuler.appendChild(tick);
                }
                
                // 生成示例音訊片段
                this.createAudioClip('mainTrack', 10, 20, '開場介紹', 'var(--tv-red)');
                this.createAudioClip('mainTrack', 25, 15, '主題討論', 'var(--tv-blue)');
                this.createAudioClip('musicTrack', 0, 60, '背景音樂', 'var(--accent)');
                this.createAudioClip('effectsTrack', 15, 2, '轉場音效', 'var(--warning)');
                this.createAudioClip('effectsTrack', 40, 3, '強調音效', 'var(--success)');
            }
            
            createAudioClip(trackId, start, duration, name, color) {
                const track = document.getElementById(trackId);
                if (!track) return;
                
                const clip = document.createElement('div');
                clip.className = 'audio-clip';
                clip.style.left = `${(start / 60) * 100}%`;
                clip.style.width = `${(duration / 60) * 100}%`;
                clip.style.background = `linear-gradient(135deg, ${color}40, ${color}80)`;
                clip.style.borderColor = color;
                clip.textContent = name;
                
                // 添加拖拽功能
                clip.setAttribute('draggable', 'true');
                clip.addEventListener('dragstart', this.handleDragStart.bind(this));
                
                track.appendChild(clip);
            }
            
            initLivePreview() {
                const previewContent = this.elements.livePreviewContent;
                if (!previewContent) return;
                
                // 創建直播預覽內容
                previewContent.innerHTML = `
                    <div style="position: absolute; top: 20px; left: 20px; background: rgba(0,0,0,0.7); color: white; padding: 15px; border-radius: 10px; border-left: 4px solid var(--tv-red); max-width: 300px;">
                        <div style="font-size: 1.2rem; font-weight: bold; margin-bottom: 5px;">專業播客直播中</div>
                        <div style="font-size: 0.9rem; color: #ccc;">歡迎收看我們的專業播客節目</div>
                    </div>
                    
                    <div style="position: absolute; bottom: 20px; right: 20px; width: 180px; height: 120px; background: linear-gradient(135deg, #1a1a2e, #16213e); border: 3px solid var(--tv-blue); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-user" style="font-size: 3rem; color: white;"></i>
                    </div>
                    
                    <div style="position: absolute; bottom: 20px; left: 20px; width: 300px; height: 30px; background: rgba(0,0,0,0.5); border-radius: 5px; overflow: hidden;">
                        <div id="liveAudioMeter" style="height: 100%; background: linear-gradient(90deg, var(--success), var(--warning), var(--danger)); width: 65%; transition: width 0.1s;"></div>
                    </div>
                    
                    <div style="position: absolute; top: 20px; right: 20px; background: var(--tv-red); color: white; padding: 8px 15px; border-radius: 5px; font-weight: bold; font-size: 0.9rem;">
                        LIVE
                    </div>
                `;
                
                // 模擬直播音頻儀表
                setInterval(() => {
                    const meter = document.getElementById('liveAudioMeter');
                    if (meter) {
                        const baseLevel = this.state.isRecording || this.state.isStreaming ? 65 : 30;
                        const variation = Math.random() * 20;
                        meter.style.width = `${baseLevel + variation}%`;
                    }
                }, 100);
                
                // 模擬觀眾人數變化
                setInterval(() => {
                    if (this.state.isStreaming) {
                        const current = parseInt(this.elements.viewerCount.textContent.replace(/,/g, ''));
                        const change = Math.floor(Math.random() * 21) - 10; // -10 到 +10
                        const newCount = Math.max(100, current + change);
                        this.elements.viewerCount.textContent = newCount.toLocaleString();
                    }
                }, 5000);
                
                // 模擬串流數據變化
                setInterval(() => {
                    if (this.state.isStreaming) {
                        const latency = (2 + Math.random() * 1).toFixed(1);
                        const bitrate = Math.floor(6000 + Math.random() * 1000);
                        const buffer = Math.random() > 0.1 ? '良好' : '波動';
                        
                        this.elements.streamLatency.textContent = `${latency} 秒`;
                        this.elements.streamBitrate.textContent = `${bitrate.toLocaleString()} kbps`;
                        this.elements.bufferStatus.textContent = buffer;
                        this.elements.bufferStatus.style.color = buffer === '良好' ? 'var(--success)' : 'var(--warning)';
                    }
                }, 3000);
            }
            
            launchSimulator() {
                this.elements.homepage.style.display = 'none';
                this.elements.simulator.style.display = 'block';
                this.showStatus('專業播客製作模擬平台已啟動，請選擇工作模式開始製作。');
                this.updateProgress(10, 1);
                this.updateNavPath('主控制台');
            }
            
            backToHome() {
                if (this.state.isRecording || this.state.isStreaming) {
                    this.showConfirmDialog(
                        '確認返回首頁',
                        '錄音或直播仍在進行中，確定要返回首頁嗎？所有進行中的活動將會停止。',
                        () => {
                            this.stopAllActivities();
                            this.elements.simulator.style.display = 'none';
                            this.elements.homepage.style.display = 'flex';
                            this.showStatus('已返回首頁，所有進度已自動儲存。');
                        }
                    );
                    return;
                }

                this.elements.simulator.style.display = 'none';
                this.elements.homepage.style.display = 'flex';
                this.showStatus('已返回首頁，所有進度已自動儲存。');
            }
            
	            // =================================================================
	            // 新增功能：網紅直播模式 (KOL Mode)
	            // =================================================================
	            toggleLiveStreamKol() {
	                const statusElement = document.getElementById('liveStatusKol');
	                const viewerCountElement = document.getElementById('viewerCountKol');
	                const btn = document.getElementById('startLiveKol');

	                if (!this.state.isStreamingKol) {
	                    this.state.isStreamingKol = true;
	                    statusElement.textContent = '直播中';
	                    statusElement.style.color = 'var(--danger)';
	                    btn.innerHTML = '<i class="fas fa-stop"></i> 停止直播';
	                    btn.classList.remove('btn-success');
	                    btn.classList.add('btn-danger');
	                    this.showStatus('網紅直播已開始，專注於互動！');
	                    
	                    // 模擬觀眾人數和互動率
	                    this.kolInterval = setInterval(() => {
	                        const current = parseInt(viewerCountElement.textContent.replace(/,/g, '')) || 0;
	                        const change = Math.floor(Math.random() * 50) - 20; // -20 to +30
	                        const newCount = Math.max(10, current + change);
	                        viewerCountElement.textContent = newCount.toLocaleString();
	                        
	                        const interactionRate = (Math.random() * 5 + 1).toFixed(1);
	                        document.getElementById('interactionRate').textContent = `${interactionRate}%`;
	                        
	                        const donation = parseInt(document.getElementById('donationAmount').textContent.replace('$', '')) || 0;
	                        if (Math.random() < 0.1) { // 10% chance of donation
	                            const newDonation = donation + Math.floor(Math.random() * 100) + 10;
	                            document.getElementById('donationAmount').textContent = `$${newDonation}`;
	                            this.showStatus('收到一筆新的打賞！');
	                        }
	                    }, 2000);

	                } else {
	                    this.state.isStreamingKol = false;
	                    statusElement.textContent = '準備就緒';
	                    statusElement.style.color = 'var(--success)';
	                    btn.innerHTML = '<i class="fas fa-broadcast-tower"></i> 開始直播';
	                    btn.classList.remove('btn-danger');
	                    btn.classList.add('btn-success');
	                    this.showStatus('網紅直播已停止。');
	                    clearInterval(this.kolInterval);
	                }
	            }

	            toggleBeautyFilter() {
	                const statusElement = document.getElementById('beautyFilterStatus');
	                const btn = document.getElementById('toggleBeautyFilter');
	                if (statusElement.textContent === '關閉') {
	                    statusElement.textContent = '開啟';
	                    statusElement.style.color = 'var(--accent)';
	                    btn.classList.add('active');
	                    this.showStatus('美顏濾鏡已開啟，讓您在鏡頭前更亮眼！');
	                } else {
	                    statusElement.textContent = '關閉';
	                    statusElement.style.color = 'var(--gray)';
	                    btn.classList.remove('active');
	                    this.showStatus('美顏濾鏡已關閉。');
	                }
	            }

	            addSticker() {
	                this.showStatus('已在直播畫面添加一個可愛的貼圖！');
	            }

	            switchCameraKol() {
	                this.showStatus('已切換到下一個鏡頭來源。');
	            }

	            enableCameraKol() {
	                this.showStatus('模擬啟用鏡頭...');
	                document.getElementById('cameraPlaceholderKol').style.display = 'none';
	                document.getElementById('cameraPreviewKol').style.display = 'block';
	                document.getElementById('enableCameraBtnKol').style.display = 'none';
	            }

	            playBGM() {
	                this.showStatus('背景音樂已開始播放。');
	            }

	            stopBGM() {
	                this.showStatus('背景音樂已停止播放。');
	            }

	            // =================================================================
	            // 新增功能：新聞主播設備 (News Anchor Mode)
	            // =================================================================
	            showNewsAnchorSettings() {
	                this.showConfirmDialog(
	                    '演播室設定',
	                    '在這裡可以調整虛擬演播室的背景、燈光預設、以及提詞器字體等高級設定。',
	                    () => this.showStatus('演播室設定已儲存。'),
	                    '儲存設定',
	                    '取消'
	                );
	            }

	            toggleNewsLive() {
	                const statusElement = document.getElementById('newsLiveStatus');
	                const btn = document.getElementById('startNewsLive');
	                const toggleBtn = document.getElementById('toggleNewsLive');
	                
	                if (!this.state.isNewsLive) {
	                    this.state.isNewsLive = true;
	                    statusElement.textContent = '● LIVE';
	                    statusElement.style.background = 'var(--danger)';
	                    btn.innerHTML = '<i class="fas fa-stop"></i> 停止直播';
	                    btn.classList.remove('btn-success');
	                    btn.classList.add('btn-danger');
	                    toggleBtn.innerHTML = '<i class="fas fa-stop"></i> 停止直播';
	                    toggleBtn.style.background = 'var(--danger)';
	                    this.showStatus('新聞直播已開始，請主播就位！');
	                    this.startNewsSimulation();
	                } else {
	                    this.state.isNewsLive = false;
	                    statusElement.textContent = '準備就緒';
	                    statusElement.style.background = 'var(--success)';
	                    btn.innerHTML = '<i class="fas fa-broadcast-tower"></i> 開始直播';
	                    btn.classList.remove('btn-danger');
	                    btn.classList.add('btn-success');
	                    toggleBtn.innerHTML = '<i class="fas fa-circle"></i> 直播中';
	                    toggleBtn.style.background = '';
	                    this.showStatus('新聞直播已停止。');
	                    clearInterval(this.newsInterval);
	                }
	            }

	            toggleNewsMute() {
	                const btn = document.getElementById('toggleNewsMute');
	                if (btn.querySelector('i').classList.contains('fa-volume-up')) {
	                    btn.innerHTML = '<i class="fas fa-volume-mute"></i> 靜音';
	                    this.showStatus('音訊已靜音。');
	                } else {
	                    btn.innerHTML = '<i class="fas fa-volume-up"></i> 音訊';
	                    this.showStatus('音訊已解除靜音。');
	                }
	            }

	            newsFullscreen() {
	                this.showStatus('模擬進入全螢幕模式...');
	            }

	            switchNewsScene(scene = null) {
	                const scenes = ['studio', 'weather', 'interview', 'breaking'];
	                let currentScene = this.state.currentNewsScene || 'studio';
	                
	                if (scene && scenes.includes(scene)) {
	                    currentScene = scene;
	                } else {
	                    const currentIndex = scenes.indexOf(currentScene);
	                    const nextIndex = (currentIndex + 1) % scenes.length;
	                    currentScene = scenes[nextIndex];
	                }
	                
	                this.state.currentNewsScene = currentScene;
	                
	                document.querySelectorAll('.scene-thumb').forEach(thumb => {
	                    thumb.classList.remove('active');
	                    if (thumb.getAttribute('data-scene') === currentScene) {
	                        thumb.classList.add('active');
	                    }
	                });
	                
	                const sceneMap = {
	                    'studio': '虛擬演播室',
	                    'weather': '天氣預報畫面',
	                    'interview': '即時連線畫面',
	                    'breaking': '突發新聞畫面'
	                };
	                
	                this.showStatus(`已切換新聞場景至：${sceneMap[currentScene]}`);
	            }

	            startTeleprompter() {
	                const text = document.getElementById('teleprompterTextarea').value;
	                if (!text) {
	                    this.showStatus('請先輸入提詞器內容。');
	                    return;
	                }
	                document.getElementById('newsTeleprompterText').innerHTML = text.replace(/\n/g, '<br><br>'); // 替換換行符為 <br><br> 以便滾動
	                document.getElementById('newsTeleprompterText').style.animationPlayState = 'running';
	                this.showStatus('提詞器已開始滾動。');
	            }

	            // 鏡頭控制模擬
	            moveCamera(direction) {
	                const anchorFigure = document.getElementById('anchorFigure');
	                const angleDisplay = document.getElementById('cameraAngleDisplay');
	                if (!anchorFigure || !angleDisplay) return;

	                let currentAngle = this.state.cameraAngle || 0;
	                const step = 5; // 每次移動 5%

	                if (direction === 'up') {
	                    currentAngle = Math.min(30, currentAngle + step);
	                } else if (direction === 'down') {
	                    currentAngle = Math.max(-30, currentAngle - step);
	                }

	                this.state.cameraAngle = currentAngle;
	                
	                // 模擬鏡頭移動效果：改變主播人物的垂直位置
	                anchorFigure.style.transform = `translateX(-50%) translateY(${-currentAngle}%)`;
	                
	                // 更新顯示
	                let display = '';
	                if (currentAngle > 15) {
	                    display = '特寫 (Close-up)';
	                } else if (currentAngle < -15) {
	                    display = '全景 (Wide Shot)';
	                } else {
	                    display = '中央特寫 (Mid Shot)';
	                }
	                angleDisplay.textContent = `${display} (${currentAngle}%)`;
	                this.showStatus(`鏡頭已移動：${display}`);
	            }

	            // 觀眾畫面預覽模擬
	            cycleAudienceContent() {
	                const screen = document.getElementById('audienceScreen');
	                const contents = [
	                    { text: '節目播放中...', color: 'var(--primary)', background: 'var(--background)' },
	                    { text: '廣告時間：最新手機上市', color: 'black', background: 'linear-gradient(45deg, #ffeb3b, #ff9800)' },
	                    { text: '支援我們：掃描二維碼', color: 'white', background: 'linear-gradient(45deg, #4caf50, #8bc34a)' }
	                ];
	                
	                let currentIndex = this.state.audienceContentIndex || 0;
	                currentIndex = (currentIndex + 1) % contents.length;
	                this.state.audienceContentIndex = currentIndex;

	                const content = contents[currentIndex];
	                screen.textContent = content.text;
	                screen.style.color = content.color;
	                screen.style.background = content.background;
	                this.showStatus(`觀眾畫面已切換至：「${content.text.split('：')[0]}」`);
	            }

	            toggleReplay() {
	                const screen = document.getElementById('audienceScreen');
	                const btn = document.getElementById('toggleReplay');
	                
	                if (btn.classList.contains('active')) {
	                    btn.classList.remove('active');
	                    btn.innerHTML = '<i class="fas fa-history"></i> 模擬重播';
	                    screen.style.border = 'none';
	                    this.showStatus('觀眾畫面模擬已切換回即時播放。');
	                } else {
	                    btn.classList.add('active');
	                    btn.innerHTML = '<i class="fas fa-play-circle"></i> 重播中';
	                    screen.style.border = '5px solid var(--danger)';
	                    this.showStatus('觀眾畫面模擬：正在播放重播內容。');
	                }
	            }

	            // 聲音模擬功能
	            simulateSound(type) {
	                const statusMap = {
	                    'startup': '模擬：系統啟動音效播放...',
	                    'shutdown': '模擬：系統關閉音效播放...',
	                    'walkie_talkie': '模擬：對講機通話音效播放...'
	                };
	                this.showStatus(statusMap[type] || '模擬：播放未知音效...');
	            }

	            // 突發新聞切入功能
	            breakingNewsCutIn() {
	                if (this.state.isBreakingNews) {
	                    this.showStatus('突發新聞已在播放中，正在返回主畫面...');
	                    this.state.isBreakingNews = false;
	                    document.getElementById('newsMainScreen').style.filter = 'none';
	                    document.getElementById('breakingNewsOverlay').style.display = 'none';
	                    document.getElementById('breakingNewsCutIn').classList.remove('active');
	                    this.showStatus('已結束突發新聞，返回演播室。');
	                } else {
	                    this.showStatus('模擬：緊急切入突發新聞畫面！', 'danger');
	                    this.state.isBreakingNews = true;
	                    document.getElementById('newsMainScreen').style.filter = 'grayscale(100%) brightness(120%)'; // 模擬緊急畫面效果
	                    document.getElementById('breakingNewsOverlay').style.display = 'flex';
	                    document.getElementById('breakingNewsCutIn').classList.add('active');
	                    this.switchNewsScene('breaking'); // 切換到突發新聞場景
	                }
	            }

	            stopTeleprompter() {
	                document.getElementById('newsTeleprompterText').style.animationPlayState = 'paused';
	                this.showStatus('提詞器已暫停。');
	            }

	            updateTeleprompterSpeed(speed) {
	                const duration = 60 - (speed / 100) * 55; // 5秒到60秒
	                document.getElementById('newsTeleprompterText').style.animationDuration = `${duration}s`;
	                document.getElementById('teleprompterSpeedValue').textContent = `${speed}%`;
	                this.showStatus(`提詞器速度已調整為 ${speed}%`);
	            }

	            updateTeleprompterFontSize(size) {
	                document.getElementById('newsTeleprompterText').style.fontSize = `${size / 10}rem`;
	                document.getElementById('teleprompterFontSizeValue').textContent = `${size}px`;
	                this.showStatus(`提詞器字體大小已調整為 ${size}px`);
	            }

	            startNewsSimulation() {
	                // 模擬時間和音量指示器
	                this.newsInterval = setInterval(() => {
	                    const now = new Date();
	                    const timeString = now.toTimeString().split(' ')[0];
	                    document.getElementById('newsCurrentTime').textContent = timeString;
	                    
	                    // 獲取主播音量設定 (從新增的滑桿獲取)
	                    const micLevel = parseInt(document.getElementById('micLevelNews')?.value || 80);
	                    
	                    // 模擬音量
	                    const levelBars = document.querySelectorAll('.audio-level-indicator .level-bar');
	                    levelBars.forEach((bar, index) => {
	                        // 基礎音量受主播音量設定影響
	                        const baseLevel = micLevel * 0.8; 
	                        const variation = Math.random() * 10; // 隨機波動
	                        let height = Math.min(100, baseLevel + variation);
	                        
	                        bar.style.height = `${height}%`;
	                        
	                        // 模擬說話指示器
	                        const speakingIndicator = document.getElementById('speakingIndicator');
	                        if (height > 50) { // 音量超過 50% 則模擬說話
	                            speakingIndicator.style.opacity = 1;
	                        } else {
	                            speakingIndicator.style.opacity = 0;
	                        }
	                    });
	                    
	                }, 500);
	            }

	            // =================================================================
	            // 新增功能：模擬即時更新
	            // =================================================================
	            updateSimulation() {
	                // 獲取電視台模式的音量滑桿值
	                const masterVolume = parseInt(this.elements.masterVolume?.value || 0);
	                const trebleBoost = parseInt(this.elements.trebleBoost?.value || 0);
	                const bassBoost = parseInt(this.elements.bassBoost?.value || 0);
	                const compression = parseInt(this.elements.compression?.value || 0);

	                // 獲取網紅直播模式的音量滑桿值
	                const micVolumeKol = parseInt(document.getElementById('micVolumeKol')?.value || 0);
	                const bgmVolume = parseInt(document.getElementById('bgmVolume')?.value || 0);
	                
	                // 模擬音量表更新 (電視台模式)
	                const meterL = document.getElementById('levelMeterL');
	                const meterR = document.getElementById('levelMeterR');
	                if (meterL && meterR) {
	                    // 模擬音量變化，受主音量影響
	                    const baseLevel = 50 + masterVolume * 0.5; // 基礎音量 + 主音量影響
	                    const randomL = Math.min(100, baseLevel + Math.random() * 20);
	                    const randomR = Math.min(100, baseLevel + Math.random() * 20);
	                    meterL.style.width = `${randomL}%`;
	                    meterR.style.width = `${randomR}%`;
	                    
	                    // 模擬音色變化 (高音/低音)
	                    if (trebleBoost > 5) {
	                        this.showStatus('模擬：高音增強，聲音更清晰銳利。', 'info', 1000);
	                    }
	                    if (bassBoost > 5) {
	                        this.showStatus('模擬：低音增強，聲音更渾厚有力。', 'info', 1000);
	                    }
	                    if (compression > 5) {
	                        this.showStatus('模擬：壓縮器作用，音量動態更平穩。', 'info', 1000);
	                    }
	                }

	                // 模擬音量表更新 (網紅直播模式)
	                const micMeterKol = document.getElementById('micVolumeKol');
	                if (micMeterKol) {
	                    // 模擬麥克風音量變化
	                    const baseLevel = micVolumeKol * 0.8;
	                    const randomLevel = Math.min(100, baseLevel + Math.random() * 10);
	                    // 由於沒有專門的音量條，這裡可以模擬一個視覺效果，例如在控制台顯示狀態
	                    if (micVolumeKol > 80) {
	                        this.showStatus('模擬：麥克風音量過高，請注意爆音。', 'warning', 1000);
	                    }
	                }

	                // 模擬美顏濾鏡效果 (網紅直播模式)
	                const beautyWhite = parseInt(document.getElementById('beautyWhite')?.value || 0);
	                const beautySmooth = parseInt(document.getElementById('beautySmooth')?.value || 0);
	                const filterStrength = parseInt(document.getElementById('filterStrength')?.value || 0);

	                if (beautyWhite > 70 || beautySmooth > 70 || filterStrength > 70) {
	                    this.showStatus('模擬：美顏效果強度過高，畫面可能過度柔化。', 'warning', 1000);
	                }
	            }

	            switchMode(mode) {
                this.state.currentMode = mode;

                // 隱藏所有頁面
                this.elements.toolPages.forEach(page => {
                    page.classList.remove('active');
                });

                // 顯示目標頁面
                let targetPage;
                let navLabel = '主控制台';

                switch(mode) {
                    case 'tv':
                        targetPage = 'tvModePage';
                        navLabel = '電視台模式';
                        this.showStatus('進入電視台專業模式，啟動完整製作工作流程。');
                        this.updateProgress(30, 2);
                        break;
                    case 'kol':
                        targetPage = 'kolModePage';
                        navLabel = '網紅模式';
                        this.showStatus('進入網紅直播模式，專注於觀眾互動與即時效果。');
                        this.updateProgress(30, 2);
                        break;
                    case 'standard':
                        targetPage = 'standardModePage';
                        navLabel = '標準模式';
                        this.showStatus('進入標準播客製作模式，專注於音訊品質與後期製作。');
                        this.updateProgress(30, 2);
                        break;
                    case 'broadcast':
                        targetPage = 'broadcastToolsPage';
                        navLabel = '直播與廣播';
                        this.showStatus('進入直播與廣播控制中心，啟動串流工具。');
                        this.updateProgress(25, 2);
                        break;
                    case 'recording':
                        targetPage = 'recordingToolsPage';
                        navLabel = '專業錄音';
                        this.showStatus('進入專業錄音工作室，準備多軌錄音環境。');
                        this.updateProgress(25, 2);
                        break;
                    case 'mixing':
                        targetPage = 'mixingToolsPage';
                        navLabel = '混音與效果';
                        this.showStatus('進入專業混音工作站，載入效果器。');
                        this.updateProgress(25, 2);
                        break;
                    case 'editing':
                        targetPage = 'editingToolsPage';
                        navLabel = '後期編輯';
                        this.showStatus('進入後期編輯工作室，準備時間軸編輯器。');
                        this.updateProgress(25, 2);
                        break;
                    case 'settings':
                        targetPage = 'settingsToolsPage';
                        navLabel = '系統設定';
                        this.showStatus('進入系統設定中心，管理設備與偏好設定。');
                        break;
                    case 'publish':
                        targetPage = 'publishToolsPage';
                        navLabel = '發佈與分享';
                        this.showStatus('進入發佈與分享中心，準備多平台發佈。');
                        this.updateProgress(40, 3);
                        break;
                    case 'ai-tools':
                        targetPage = 'aiToolsPage';
                        navLabel = 'AI 智能工具';
                        this.showStatus('進入 AI 智能工具中心，載入 AI 模組。');
                        this.updateProgress(30, 2);
                        break;
                    case 'collaboration':
                        targetPage = 'collaborationToolsPage';
                        navLabel = '團隊協作';
                        this.showStatus('進入團隊協作中心，連接團隊成員。');
                        this.updateProgress(20, 2);
                        break;
                    case 'audio-library':
                        targetPage = 'audioLibraryPage';
                        navLabel = '音檔庫管理';
                        this.showStatus('進入音檔庫管理中心，載入您的錄音檔案。');
                        this.updateProgress(25, 2);
                        break;
                    case 'live-prep':
                        targetPage = 'livePrepPage';
                        navLabel = '直播前期準備';
                        this.showStatus('進入直播前期準備中心，檢測設備與環境。');
                        this.updateProgress(20, 2);
                        break;
                    case 'news-anchor':
                        targetPage = 'newsAnchorPage';
                        navLabel = '新聞主播設備';
                        this.showStatus('進入新聞主播專業設備中心，載入虛擬演播室與即時直播預覽。');
                        this.updateProgress(30, 2);
                        break;
                    default:
                        targetPage = 'mainConsolePage';
                        navLabel = '主控制台';
                        this.showStatus('返回主控制台，可以選擇其他工作模式或工具。');
                }

                const pageElement = document.getElementById(targetPage);
                if (pageElement) {
                    pageElement.classList.add('active');
                }
                this.updateNavPath(navLabel);
            }
            
            toggleLiveStream() {
                if (!this.state.isStreaming) {
                    // 開始直播
                    this.state.isStreaming = true;
                    this.elements.startLive.innerHTML = '<i class="fas fa-stop"></i> 停止直播';
                    this.elements.startLive.style.background = 'linear-gradient(135deg, var(--danger), var(--tv-red))';
                    
                    this.elements.liveStatus.textContent = '直播中';
                    this.elements.liveStatus.style.color = 'var(--danger)';
                    
                    this.showStatus('直播已開始，正在向多平台串流...');
                    
                    // 模擬直播數據更新
                    this.startLiveSimulation();
                    
                    // 更新進度
                    this.updateProgress(60, 3);
                } else {
                    // 停止直播
                    this.state.isStreaming = false;
                    this.elements.startLive.innerHTML = '<i class="fas fa-broadcast-tower"></i> 開始直播';
                    this.elements.startLive.style.background = '';
                    
                    this.elements.liveStatus.textContent = '準備就緒';
                    this.elements.liveStatus.style.color = 'var(--success)';
                    
                    this.showStatus('直播已停止，總觀看人數: ' + this.elements.viewerCount.textContent);
                }
            }
            
            async toggleRecording() {
                if (!this.state.isRecording) {
                    try {
                        // 請求麥克風權限
                        const stream = await navigator.mediaDevices.getUserMedia({ 
                            audio: {
                                echoCancellation: true,
                                noiseSuppression: true,
                                autoGainControl: true
                            }
                        });
                        
                        this.state.audioStream = stream;
                        this.state.isRecording = true;
                        this.state.recordingStartTime = Date.now();
                        
                        // 更新介面
                        this.elements.startRecording.classList.add('recording');
                        this.elements.recordButtonText.textContent = '停止錄音';
                        
                        // 開始錄音計時
                        this.state.recordingTimer = setInterval(() => {
                            this.state.recordingTime = Date.now() - this.state.recordingStartTime;
                            this.showStatus(`錄音中... ${this.formatTime(this.state.recordingTime)}`);
                        }, 1000);
                        
                        // 開始錄音
                        this.state.mediaRecorder = new MediaRecorder(stream);
                        this.state.recordedChunks = [];
                        
                        this.state.mediaRecorder.ondataavailable = (event) => {
                            if (event.data.size > 0) {
                                this.state.recordedChunks.push(event.data);
                            }
                        };
                        
                        this.state.mediaRecorder.onstop = () => {
                            const audioBlob = new Blob(this.state.recordedChunks, { type: 'audio/webm' });
                            const audioUrl = URL.createObjectURL(audioBlob);
                            this.state.lastRecordingBlob = audioBlob;
                            this.state.lastRecordingUrl = audioUrl;

                            // 創建錄音結果容器
                            const resultContainer = document.createElement('div');
                            resultContainer.className = 'recording-result';
                            resultContainer.style.cssText = 'margin-top: 20px; padding: 20px; background: rgba(0,0,0,0.4); border-radius: 12px; border: 2px solid var(--success);';

                            // 創建播放元素
                            const audioElement = document.createElement('audio');
                            audioElement.controls = true;
                            audioElement.src = audioUrl;
                            audioElement.style.width = '100%';

                            // 創建下載按鈕
                            const downloadBtn = document.createElement('a');
                            downloadBtn.href = audioUrl;
                            downloadBtn.download = `錄音_${new Date().toLocaleString('zh-TW').replace(/[/:]/g, '-')}.webm`;
                            downloadBtn.className = 'page-btn btn-success';
                            downloadBtn.style.cssText = 'display: inline-flex; align-items: center; gap: 8px; margin-top: 15px; text-decoration: none;';
                            downloadBtn.innerHTML = '<i class="fas fa-download"></i> 下載錄音檔案';

                            // 錄音資訊
                            const infoDiv = document.createElement('div');
                            infoDiv.style.cssText = 'margin-top: 15px; color: var(--gray); font-size: 0.9rem;';
                            const fileSizeKB = (audioBlob.size / 1024).toFixed(2);
                            infoDiv.innerHTML = `<i class="fas fa-info-circle"></i> 時長: ${this.formatTime(this.state.recordingTime)} | 檔案大小: ${fileSizeKB} KB | 格式: WebM`;

                            resultContainer.appendChild(audioElement);
                            resultContainer.appendChild(downloadBtn);
                            resultContainer.appendChild(infoDiv);

                            // 添加到介面
                            const recordingContainer = document.querySelector('.recording-studio');
                            const existingResult = recordingContainer.querySelector('.recording-result');
                            if (existingResult) {
                                existingResult.remove();
                            }
                            recordingContainer.appendChild(resultContainer);

                            this.showStatus(`錄音完成！時長: ${this.formatTime(this.state.recordingTime)}，可播放或下載`);
                        };
                        
                        this.state.mediaRecorder.start();
                        this.showStatus('錄音已開始，請對著麥克風說話...');
                        
                    } catch (error) {
                        console.error('無法訪問麥克風:', error);
                        this.showStatus('無法訪問麥克風，請檢查瀏覽器權限設定。');
                        
                        // 使用模擬錄音
                        this.startMockRecording();
                    }
                } else {
                    // 停止錄音
                    this.stopRecording();
                }
            }
            
            startMockRecording() {
                this.state.isRecording = true;
                this.state.recordingStartTime = Date.now();
                
                this.elements.startRecording.classList.add('recording');
                this.elements.recordButtonText.textContent = '停止錄音';
                
                this.state.recordingTimer = setInterval(() => {
                    this.state.recordingTime = Date.now() - this.state.recordingStartTime;
                    this.showStatus(`模擬錄音中... ${this.formatTime(this.state.recordingTime)}`);
                }, 1000);
                
                this.showStatus('模擬錄音已開始 (麥克風權限未授予，使用模擬模式)');
            }
            
            stopRecording() {
                if (this.state.mediaRecorder && this.state.mediaRecorder.state !== 'inactive') {
                    this.state.mediaRecorder.stop();
                }
                
                if (this.state.audioStream) {
                    this.state.audioStream.getTracks().forEach(track => track.stop());
                }
                
                this.state.isRecording = false;
                clearInterval(this.state.recordingTimer);
                
                this.elements.startRecording.classList.remove('recording');
                this.elements.recordButtonText.textContent = '開始錄音';
                
                // 更新進度
                this.updateProgress(80, 4);
            }
            
            toggleMonitoring() {
                const button = this.elements.toggleMonitoring;
                const isMonitoring = button.classList.toggle('active');
                
                this.showStatus(`耳機監聽 ${isMonitoring ? '已開啟' : '已關閉'}`);
            }
            
            toggleNoiseReduction() {
                const button = this.elements.noiseReduction;
                const isActive = button.classList.toggle('active');
                
                this.showStatus(`噪音消除 ${isActive ? '已啟用' : '已停用'}`);
            }
            
            togglePreviewMode() {
                const button = this.elements.togglePreview;
                const isActive = button.classList.toggle('active');
                
                this.showStatus(`預覽模式 ${isActive ? '已切換為節目畫面' : '已切換為導播畫面'}`);
            }
            
            addLiveGraphic() {
                const graphics = [
                    '贊助商標誌', '來賓姓名', '主題標題', '社群媒體', '倒數計時'
                ];
                const randomGraphic = graphics[Math.floor(Math.random() * graphics.length)];
                
                this.showStatus(`已添加 "${randomGraphic}" 圖文疊加層`);
            }
            
            switchCamera() {
                const cameras = ['主攝影機', '廣角鏡頭', '特寫鏡頭', '觀眾視角', '綠幕合成'];
                const randomCamera = cameras[Math.floor(Math.random() * cameras.length)];
                
                this.showStatus(`已切換到 ${randomCamera}`);
            }
            
            handleTrackAction(action, trackId) {
                const track = this.tracks.find(t => t.id === trackId);
                if (!track) return;
                
                switch(action) {
                    case 'mute':
                        track.muted = !track.muted;
                        this.showStatus(`${track.name} ${track.muted ? '已靜音' : '取消靜音'}`);
                        break;
                        
                    case 'solo':
                        track.solo = !track.solo;
                        this.showStatus(`${track.name} ${track.solo ? '單獨播放' : '取消單獨'}`);
                        break;
                        
                    case 'record':
                        track.recording = !track.recording;
                        this.showStatus(`${track.name} ${track.recording ? '開始錄音' : '停止錄音'}`);
                        break;
                }
                
                // 更新軌道顯示
                this.initTrackManagement();
            }
            
            handleDragStart(e) {
                e.dataTransfer.setData('text/plain', e.target.textContent);
            }
            
            startLiveSimulation() {
                // 模擬直播數據更新
                this.liveSimulationInterval = setInterval(() => {
                    if (!this.state.isStreaming) {
                        clearInterval(this.liveSimulationInterval);
                        return;
                    }
                    
                    // 隨機更新觀眾人數
                    const current = parseInt(this.elements.viewerCount.textContent.replace(/,/g, ''));
                    const change = Math.floor(Math.random() * 51) - 10; // -10 到 +40
                    const newCount = Math.max(100, current + change);
                    this.elements.viewerCount.textContent = newCount.toLocaleString();
                    
                }, 3000);
            }
            
            startDemo() {
                this.showStatus('開始快速演示，展示完整播客製作流程...');
                
                // 重置並啟動模擬器
                this.launchSimulator();
                
                setTimeout(() => {
                    this.switchMode('tv');
                    this.showStatus('演示步驟 1/4: 進入電視台專業模式');
                    
                    setTimeout(() => {
                        this.toggleLiveStream();
                        this.showStatus('演示步驟 2/4: 開始直播串流');
                        
                        setTimeout(() => {
                            this.toggleRecording();
                            this.showStatus('演示步驟 3/4: 開始多軌錄音');
                            
                            setTimeout(() => {
                                this.addLiveGraphic();
                                this.switchCamera();
                                this.showStatus('演示步驟 4/4: 添加圖文與切換鏡頭');
                                
                                setTimeout(() => {
                                    this.showStatus('快速演示完成！您已體驗電視台級播客製作完整流程。');
                                    this.updateProgress(100, 5);
                                }, 3000);
                            }, 3000);
                        }, 3000);
                    }, 2000);
                }, 1000);
            }
            
            startTutorial() {
                this.showStatus('開啟互動教學模式，請跟隨指引學習平台功能。');
                
                // 顯示導航提示
                this.elements.navigationHint.classList.add('show');
                setTimeout(() => {
                    this.elements.navigationHint.classList.remove('show');
                }, 5000);
            }
            
            toggleHelpPanel() {
                this.elements.helpPanel.classList.toggle('show');
            }
            
            openSystemSettings() {
                this.showSettingsPanel();
            }

            showSettingsPanel() {
                const overlay = document.createElement('div');
                overlay.className = 'custom-modal-overlay';
                overlay.innerHTML = `
                    <div class="custom-modal" style="max-width: 600px;">
                        <div class="custom-modal-header">
                            <i class="fas fa-cogs" style="color: var(--primary);"></i>
                            <h3>系統設定</h3>
                        </div>
                        <div class="custom-modal-body">
                            <div style="margin-bottom: 25px;">
                                <h4 style="color: var(--primary); margin-bottom: 15px;"><i class="fas fa-volume-up"></i> 音訊設備</h4>
                                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border: 1px solid rgba(0,243,255,0.2);">
                                    <label style="display: block; margin-bottom: 10px; color: var(--light);">輸入設備</label>
                                    <select style="width: 100%; padding: 10px; background: rgba(0,0,0,0.5); border: 1px solid var(--primary); color: var(--light); border-radius: 8px; font-size: 1rem;">
                                        <option>預設麥克風</option>
                                        <option>USB 專業麥克風</option>
                                        <option>虛擬音訊裝置</option>
                                    </select>
                                </div>
                            </div>
                            <div style="margin-bottom: 25px;">
                                <h4 style="color: var(--primary); margin-bottom: 15px;"><i class="fas fa-keyboard"></i> 快捷鍵</h4>
                                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border: 1px solid rgba(0,243,255,0.2);">
                                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                        <span>開始/停止錄音</span>
                                        <span style="color: var(--primary); font-weight: 600;">Ctrl + R</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                        <span>開始/停止直播</span>
                                        <span style="color: var(--primary); font-weight: 600;">Ctrl + L</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                                        <span>快速儲存</span>
                                        <span style="color: var(--primary); font-weight: 600;">Ctrl + S</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: var(--primary); margin-bottom: 15px;"><i class="fas fa-chart-bar"></i> 效能監控</h4>
                                <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border: 1px solid rgba(0,243,255,0.2);">
                                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                        <span>CPU 使用率</span>
                                        <span style="color: var(--success);">12%</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                        <span>記憶體使用</span>
                                        <span style="color: var(--success);">256 MB</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; padding: 8px 0;">
                                        <span>音訊延遲</span>
                                        <span style="color: var(--success);">5 ms</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="custom-modal-footer">
                            <button class="modal-btn modal-btn-cancel">關閉</button>
                            <button class="modal-btn modal-btn-success">儲存設定</button>
                        </div>
                    </div>
                `;

                document.body.appendChild(overlay);
                requestAnimationFrame(() => overlay.classList.add('show'));

                const closeModal = () => {
                    overlay.classList.remove('show');
                    setTimeout(() => overlay.remove(), 300);
                };

                overlay.querySelector('.modal-btn-cancel').addEventListener('click', closeModal);
                overlay.querySelector('.modal-btn-success').addEventListener('click', () => {
                    this.showStatus('系統設定已儲存');
                    closeModal();
                });
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) closeModal();
                });
            }

            createNewProject() {
                const overlay = document.createElement('div');
                overlay.className = 'custom-modal-overlay';
                overlay.innerHTML = `
                    <div class="custom-modal" style="max-width: 550px;">
                        <div class="custom-modal-header">
                            <i class="fas fa-plus-circle" style="color: var(--success);"></i>
                            <h3>建立新專案</h3>
                        </div>
                        <div class="custom-modal-body">
                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; color: var(--light);">專案名稱</label>
                                <input type="text" id="projectName" placeholder="輸入專案名稱" style="width: 100%; padding: 12px; background: rgba(0,0,0,0.5); border: 2px solid var(--primary); color: var(--light); border-radius: 8px; font-size: 1rem;">
                            </div>
                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; color: var(--light);">取樣率</label>
                                <select id="sampleRate" style="width: 100%; padding: 12px; background: rgba(0,0,0,0.5); border: 2px solid var(--primary); color: var(--light); border-radius: 8px; font-size: 1rem;">
                                    <option value="44100">44.1 kHz (CD 品質)</option>
                                    <option value="48000" selected>48 kHz (專業標準)</option>
                                    <option value="96000">96 kHz (高解析度)</option>
                                    <option value="192000">192 kHz (錄音室品質)</option>
                                </select>
                            </div>
                            <div style="margin-bottom: 20px;">
                                <label style="display: block; margin-bottom: 8px; color: var(--light);">位元深度</label>
                                <select id="bitDepth" style="width: 100%; padding: 12px; background: rgba(0,0,0,0.5); border: 2px solid var(--primary); color: var(--light); border-radius: 8px; font-size: 1rem;">
                                    <option value="16">16 bit</option>
                                    <option value="24" selected>24 bit</option>
                                    <option value="32">32 bit (浮點)</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; color: var(--light);">專案模板</label>
                                <select id="projectTemplate" style="width: 100%; padding: 12px; background: rgba(0,0,0,0.5); border: 2px solid var(--primary); color: var(--light); border-radius: 8px; font-size: 1rem;">
                                    <option value="empty">空白專案</option>
                                    <option value="podcast">播客標準模板</option>
                                    <option value="interview">訪談節目模板</option>
                                    <option value="music">音樂節目模板</option>
                                    <option value="live">直播節目模板</option>
                                </select>
                            </div>
                        </div>
                        <div class="custom-modal-footer">
                            <button class="modal-btn modal-btn-cancel">取消</button>
                            <button class="modal-btn modal-btn-success">建立專案</button>
                        </div>
                    </div>
                `;

                document.body.appendChild(overlay);
                requestAnimationFrame(() => overlay.classList.add('show'));

                const closeModal = () => {
                    overlay.classList.remove('show');
                    setTimeout(() => overlay.remove(), 300);
                };

                overlay.querySelector('.modal-btn-cancel').addEventListener('click', closeModal);
                overlay.querySelector('.modal-btn-success').addEventListener('click', () => {
                    const projectName = overlay.querySelector('#projectName').value || '未命名專案';
                    const sampleRate = overlay.querySelector('#sampleRate').value;
                    const bitDepth = overlay.querySelector('#bitDepth').value;
                    const template = overlay.querySelector('#projectTemplate').value;

                    this.showStatus(`專案「${projectName}」已建立 (${sampleRate/1000}kHz / ${bitDepth}bit)`);
                    closeModal();
                    this.updateProgress(20, 1);
                });
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) closeModal();
                });
            }

            openExistingProject() {
                const overlay = document.createElement('div');
                overlay.className = 'custom-modal-overlay';
                overlay.innerHTML = `
                    <div class="custom-modal" style="max-width: 600px;">
                        <div class="custom-modal-header">
                            <i class="fas fa-folder-open" style="color: var(--warning);"></i>
                            <h3>開啟專案</h3>
                        </div>
                        <div class="custom-modal-body">
                            <p style="margin-bottom: 20px;">選擇要開啟的最近專案：</p>
                            <div style="max-height: 300px; overflow-y: auto;">
                                <div class="project-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border: 2px solid rgba(0,243,255,0.2); margin-bottom: 10px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.borderColor='var(--primary)'" onmouseout="this.style.borderColor='rgba(0,243,255,0.2)'">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="color: var(--light); font-weight: 600; margin-bottom: 5px;">週末談話節目 EP.15</div>
                                            <div style="color: var(--gray); font-size: 0.9rem;">最後修改: 2024-01-15 14:30</div>
                                        </div>
                                        <i class="fas fa-chevron-right" style="color: var(--primary);"></i>
                                    </div>
                                </div>
                                <div class="project-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border: 2px solid rgba(0,243,255,0.2); margin-bottom: 10px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.borderColor='var(--primary)'" onmouseout="this.style.borderColor='rgba(0,243,255,0.2)'">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="color: var(--light); font-weight: 600; margin-bottom: 5px;">專家訪談系列</div>
                                            <div style="color: var(--gray); font-size: 0.9rem;">最後修改: 2024-01-14 09:15</div>
                                        </div>
                                        <i class="fas fa-chevron-right" style="color: var(--primary);"></i>
                                    </div>
                                </div>
                                <div class="project-item" style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; border: 2px solid rgba(0,243,255,0.2); margin-bottom: 10px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.borderColor='var(--primary)'" onmouseout="this.style.borderColor='rgba(0,243,255,0.2)'">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="color: var(--light); font-weight: 600; margin-bottom: 5px;">音樂賞析特輯</div>
                                            <div style="color: var(--gray); font-size: 0.9rem;">最後修改: 2024-01-12 18:45</div>
                                        </div>
                                        <i class="fas fa-chevron-right" style="color: var(--primary);"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="custom-modal-footer">
                            <button class="modal-btn modal-btn-cancel">取消</button>
                            <button class="modal-btn" style="background: linear-gradient(135deg, var(--primary), var(--tv-blue)); border: none; color: var(--dark);">瀏覽更多...</button>
                        </div>
                    </div>
                `;

                document.body.appendChild(overlay);
                requestAnimationFrame(() => overlay.classList.add('show'));

                const closeModal = () => {
                    overlay.classList.remove('show');
                    setTimeout(() => overlay.remove(), 300);
                };

                overlay.querySelector('.modal-btn-cancel').addEventListener('click', closeModal);

                // 專案項目���擊事件
                overlay.querySelectorAll('.project-item').forEach(item => {
                    item.addEventListener('click', () => {
                        const projectName = item.querySelector('div div').textContent;
                        this.showStatus(`正在開啟專案「${projectName}」...`);
                        closeModal();
                        this.updateProgress(30, 2);
                    });
                });

                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) closeModal();
                });
            }

            zoomTimeline(factor) {
                this.timelineZoom = (this.timelineZoom || 1) * factor;
                this.timelineZoom = Math.max(0.5, Math.min(3, this.timelineZoom));
                this.showStatus(`時間軸縮放: ${Math.round(this.timelineZoom * 100)}%`);

                // 視覺化縮放效果
                const timeline = this.elements.timelineContainer;
                if (timeline) {
                    timeline.style.transform = `scaleX(${this.timelineZoom})`;
                    timeline.style.transformOrigin = 'left center';
                }
            }

            toggleSnapToGrid() {
                this.snapToGrid = !this.snapToGrid;
                const btn = this.elements.toggleSnap;
                if (btn) {
                    btn.classList.toggle('active', this.snapToGrid);
                    btn.style.background = this.snapToGrid ? 'rgba(0, 243, 255, 0.2)' : '';
                }
                this.showStatus(`網格對齊: ${this.snapToGrid ? '已啟用' : '已停用'}`);
            }

            emergencyStop() {
                this.showConfirmDialog(
                    '緊急停止確認',
                    '確定要執行緊急停止嗎？所有進行中的錄音與直播將會立即停止。',
                    () => {
                        this.stopAllActivities();
                        this.showStatus('緊急停止已執行，所有活動已終止。');
                    },
                    'danger'
                );
            }
            
            stopAllActivities() {
                if (this.state.isRecording) {
                    this.stopRecording();
                }
                
                if (this.state.isStreaming) {
                    this.toggleLiveStream();
                }
                
                if (this.audioVisualizationInterval) {
                    clearInterval(this.audioVisualizationInterval);
                }
                
                if (this.liveSimulationInterval) {
                    clearInterval(this.liveSimulationInterval);
                }
            }
            
            quickSave() {
                this.showStatus('專案已快速儲存，包含所有設定、錄音檔案與編輯進度。');
                
                // 模擬儲存動畫
                const saveButton = this.elements.quickSave;
                const originalHTML = saveButton.innerHTML;
                saveButton.innerHTML = '<i class="fas fa-check"></i> 已儲存';
                saveButton.style.background = 'linear-gradient(135deg, var(--success), var(--tv-green))';
                
                setTimeout(() => {
                    saveButton.innerHTML = originalHTML;
                    saveButton.style.background = '';
                }, 2000);
            }
            
            updateProgress(percent, stage) {
                this.state.currentProgress = percent;
                this.state.currentStage = stage;
                
                // 更新進度條
                this.elements.progressFill.style.width = `${percent}%`;
                this.elements.progressPercent.textContent = percent;
                
                // 更新階段文字
                const stageNames = ['前期準備', '設備設定', '直播錄製', '後期製作', '發佈推廣'];
                this.elements.currentStage.textContent = stageNames[stage - 1] || '準備中';
                
                // 更新階段指示器
                this.elements.stageIndicators.forEach((indicator, index) => {
                    indicator.classList.remove('active', 'completed');
                    
                    if (index + 1 < stage) {
                        indicator.classList.add('completed');
                    } else if (index + 1 === stage) {
                        indicator.classList.add('active');
                    }
                });
                
                // 更新階段標籤
                this.elements.stageLabels.forEach((label, index) => {
                    label.classList.remove('active');
                    if (index + 1 === stage) {
                        label.classList.add('active');
                    }
                });
            }
            
            updateNavPath(page) {
                const navPath = this.elements.navPath;
                navPath.innerHTML = `
                    <div class="nav-path-item" onclick="simulator.switchMode('main')" style="cursor: pointer;">
                        <i class="fas fa-home"></i>
                        <span>主控制台</span>
                    </div>
                    <div class="nav-path-separator">/</div>
                    <div class="nav-path-item active">
                        <i class="fas fa-${page === '主控制台' ? 'home' : page === '電視台模式' ? 'tv' : page === '網紅模式' ? 'star' : 'podcast'}"></i>
                        <span>${page}</span>
                    </div>
                `;
            }
            
            showStatus(message) {
                this.elements.statusMessage.textContent = message;
                this.elements.simulatorStatus.classList.add('show');

                // 5秒後自動隱藏
                clearTimeout(this.statusTimeout);
                this.statusTimeout = setTimeout(() => {
                    this.elements.simulatorStatus.classList.remove('show');
                }, 5000);
            }

            showConfirmDialog(title, message, onConfirm, type = 'warning') {
                // 創建對話框
                const overlay = document.createElement('div');
                overlay.className = 'custom-modal-overlay';
                overlay.innerHTML = `
                    <div class="custom-modal">
                        <div class="custom-modal-header">
                            <i class="fas fa-${type === 'danger' ? 'exclamation-triangle' : 'question-circle'}"></i>
                            <h3>${title}</h3>
                        </div>
                        <div class="custom-modal-body">
                            ${message}
                        </div>
                        <div class="custom-modal-footer">
                            <button class="modal-btn modal-btn-cancel">取消</button>
                            <button class="modal-btn ${type === 'danger' ? 'modal-btn-confirm' : 'modal-btn-success'}">確認</button>
                        </div>
                    </div>
                `;

                document.body.appendChild(overlay);

                // 顯示動畫
                requestAnimationFrame(() => {
                    overlay.classList.add('show');
                });

                // 綁定按鈕事件
                const cancelBtn = overlay.querySelector('.modal-btn-cancel');
                const confirmBtn = overlay.querySelector('.modal-btn-confirm, .modal-btn-success');

                const closeModal = () => {
                    overlay.classList.remove('show');
                    setTimeout(() => overlay.remove(), 300);
                };

                cancelBtn.addEventListener('click', closeModal);
                confirmBtn.addEventListener('click', () => {
                    closeModal();
                    if (onConfirm) onConfirm();
                });

                // 點擊遮罩關閉
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) closeModal();
                });
            }

            showAlertDialog(title, message, type = 'info') {
                const overlay = document.createElement('div');
                overlay.className = 'custom-modal-overlay';
                overlay.innerHTML = `
                    <div class="custom-modal">
                        <div class="custom-modal-header">
                            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'times-circle' : 'info-circle'}" style="color: var(--${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'info'});"></i>
                            <h3>${title}</h3>
                        </div>
                        <div class="custom-modal-body">
                            ${message}
                        </div>
                        <div class="custom-modal-footer">
                            <button class="modal-btn modal-btn-success">確定</button>
                        </div>
                    </div>
                `;

                document.body.appendChild(overlay);

                requestAnimationFrame(() => {
                    overlay.classList.add('show');
                });

                const closeBtn = overlay.querySelector('.modal-btn-success');
                const closeModal = () => {
                    overlay.classList.remove('show');
                    setTimeout(() => overlay.remove(), 300);
                };

                closeBtn.addEventListener('click', closeModal);
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) closeModal();
                });
            }

            showToolPage(toolName, toolText) {
                const overlay = document.createElement('div');
                overlay.className = 'custom-modal-overlay';
                overlay.innerHTML = `
                    <div class="custom-modal" style="max-width:700px;max-height:85vh;">
                        <div class="custom-modal-header">
                            <i class="fas fa-tools" style="color:var(--primary);"></i>
                            <h3>${toolText}</h3>
                        </div>
                        <div class="custom-modal-body" style="max-height:60vh;overflow-y:auto;">
                            <div style="text-align:center;padding:30px 0;">
                                <div style="width:80px;height:80px;margin:0 auto 20px;background:linear-gradient(135deg,var(--primary),var(--secondary));border-radius:20px;display:flex;align-items:center;justify-content:center;">
                                    <i class="fas fa-rocket" style="font-size:2.5rem;color:white;"></i>
                                </div>
                                <h4 style="margin-bottom:10px;color:var(--text);">${toolText}</h4>
                                <p style="color:var(--gray);margin-bottom:20px;">此工具正在準備中，即將為您提供專業級功能體驗。</p>
                                <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:15px;text-align:left;padding:20px;background:rgba(0,0,0,0.2);border-radius:12px;">
                                    <div style="padding:15px;background:rgba(255,255,255,0.05);border-radius:8px;">
                                        <i class="fas fa-check-circle" style="color:var(--success);margin-right:8px;"></i>
                                        <span>專業級處理</span>
                                    </div>
                                    <div style="padding:15px;background:rgba(255,255,255,0.05);border-radius:8px;">
                                        <i class="fas fa-check-circle" style="color:var(--success);margin-right:8px;"></i>
                                        <span>即時預覽</span>
                                    </div>
                                    <div style="padding:15px;background:rgba(255,255,255,0.05);border-radius:8px;">
                                        <i class="fas fa-check-circle" style="color:var(--success);margin-right:8px;"></i>
                                        <span>多格式支援</span>
                                    </div>
                                    <div style="padding:15px;background:rgba(255,255,255,0.05);border-radius:8px;">
                                        <i class="fas fa-check-circle" style="color:var(--success);margin-right:8px;"></i>
                                        <span>快捷鍵操作</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="custom-modal-footer">
                            <button class="modal-btn modal-btn-cancel">返回</button>
                            <button class="modal-btn modal-btn-success">開始使用</button>
                        </div>
                    </div>
                `;

                document.body.appendChild(overlay);
                requestAnimationFrame(() => overlay.classList.add('show'));

                const closeModal = () => {
                    overlay.classList.remove('show');
                    setTimeout(() => overlay.remove(), 300);
                };

                overlay.querySelector('.modal-btn-cancel').addEventListener('click', closeModal);
                overlay.querySelector('.modal-btn-success').addEventListener('click', () => {
                    closeModal();
                    this.showStatus(`${toolText} 已啟動`);
                });
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) closeModal();
                });
            }

            handleResize() {
                // 重新生成波形圖以適應新尺寸
                this.tracks.forEach(track => {
                    this.generateWaveform(track.id);
                });
            }
            
            formatTime(ms) {
                const seconds = Math.floor(ms / 1000);
                const minutes = Math.floor(seconds / 60);
                const hours = Math.floor(minutes / 60);
                
                return `${hours.toString().padStart(2, '0')}:${(minutes % 60).toString().padStart(2, '0')}:${(seconds % 60).toString().padStart(2, '0')}`;
            }
        }

        // 初始化模擬器
        document.addEventListener('DOMContentLoaded', () => {
            window.simulator = new UltimatePodcastSimulator();

            // 深色模式檢測（已經是深色主題，保持一致）
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            }
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                if (event.matches) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            });

            // 鍵盤快捷鍵支援
            document.addEventListener('keydown', (e) => {
                // Ctrl + R: 開始/停止錄音
                if (e.ctrlKey && e.key === 'r') {
                    e.preventDefault();
                    if (window.simulator && window.simulator.elements.startRecording) {
                        window.simulator.toggleRecording();
                    }
                }
                // Ctrl + L: 開始/停止直播
                if (e.ctrlKey && e.key === 'l') {
                    e.preventDefault();
                    if (window.simulator && window.simulator.elements.startLive) {
                        window.simulator.toggleLiveStream();
                    }
                }
                // Ctrl + S: 快速儲存
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    if (window.simulator) {
                        window.simulator.quickSave();
                    }
                }
                // Escape: 關閉對話框/面板
                if (e.key === 'Escape') {
                    const modal = document.querySelector('.custom-modal-overlay.show');
                    const panel = document.querySelector('.tool-detail-panel.show');
                    if (modal) {
                        modal.classList.remove('show');
                        setTimeout(() => modal.remove(), 300);
                    }
                    if (panel) {
                        panel.classList.remove('show');
                        setTimeout(() => panel.remove(), 400);
                    }
                }
            });

            // ========== 音檔庫功能 ==========
            // 播放速度控制
            const speedBtns = document.querySelectorAll('.speed-btn');
            const speedSlider = document.getElementById('speedSlider');
            const speedValue = document.getElementById('speedValue');

            speedBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    speedBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const speed = parseFloat(btn.dataset.speed);
                    if (speedSlider) speedSlider.value = speed;
                    if (speedValue) speedValue.textContent = speed.toFixed(2) + 'x';
                    window.simulator?.showStatus(`播放速度已調整為 ${speed}x`);
                });
            });

            if (speedSlider) {
                speedSlider.addEventListener('input', () => {
                    const speed = parseFloat(speedSlider.value);
                    if (speedValue) speedValue.textContent = speed.toFixed(2) + 'x';
                    speedBtns.forEach(b => b.classList.remove('active'));
                });
            }

            // 音量控制
            const volumeSlider = document.getElementById('volumeSlider');
            const volumeValue = document.getElementById('volumeValue');
            if (volumeSlider) {
                volumeSlider.addEventListener('input', () => {
                    if (volumeValue) volumeValue.textContent = volumeSlider.value + '%';
                });
            }

            // 播放控制按鈕
            const togglePlayback = document.getElementById('togglePlayback');
            if (togglePlayback) {
                togglePlayback.addEventListener('click', () => {
                    const icon = togglePlayback.querySelector('i');
                    if (icon.classList.contains('fa-play')) {
                        icon.classList.remove('fa-play');
                        icon.classList.add('fa-pause');
                        window.simulator?.showStatus('開始播放音檔');
                    } else {
                        icon.classList.remove('fa-pause');
                        icon.classList.add('fa-play');
                        window.simulator?.showStatus('暫停播放');
                    }
                });
            }

            // 快速編輯按鈕
            document.querySelectorAll('.quick-edit-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const action = btn.textContent.trim();
                    window.simulator?.showStatus(`正在執行: ${action}`);
                    btn.style.transform = 'scale(0.95)';
                    setTimeout(() => btn.style.transform = '', 150);
                });
            });

            // 音檔項目播放按鈕
            document.querySelectorAll('.audio-file-item .play-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const item = btn.closest('.audio-file-item');
                    const fileName = item?.querySelector('.file-name')?.textContent;
                    const nowPlayingName = document.getElementById('nowPlayingName');
                    if (nowPlayingName && fileName) {
                        nowPlayingName.textContent = fileName;
                    }
                    window.simulator?.showStatus(`正在播放: ${fileName}`);
                });
            });

            // ========== 直播準備功能 ==========
            // 幕前/幕後切換
            const backstageBtn = document.getElementById('backstageBtn');
            const frontstageBtn = document.getElementById('frontstageBtn');
            const stageStatus = document.getElementById('stageStatus');
            const stagePreview = document.getElementById('stagePreview');
            const switchStageBtn = document.getElementById('switchStage');

            function updateStageUI(stage) {
                if (stage === 'backstage') {
                    backstageBtn?.classList.add('active');
                    frontstageBtn?.classList.remove('active');
                    if (stageStatus) {
                        stageStatus.innerHTML = `<div class="stage-indicator backstage"><i class="fas fa-eye-slash"></i><span>當前狀態：幕後模式 (觀眾不可見)</span></div>`;
                    }
                    if (stagePreview) {
                        stagePreview.innerHTML = `<div class="backstage-overlay"><i class="fas fa-pause-circle"></i><span>直播準備中</span></div>`;
                    }
                    window.simulator?.showStatus('已切換至幕後模式 - 觀眾不可見');
                } else {
                    frontstageBtn?.classList.add('active');
                    backstageBtn?.classList.remove('active');
                    if (stageStatus) {
                        stageStatus.innerHTML = `<div class="stage-indicator frontstage"><i class="fas fa-broadcast-tower"></i><span>當前狀態：幕前模式 (正在直播)</span></div>`;
                    }
                    if (stagePreview) {
                        stagePreview.innerHTML = `<div style="width:100%;height:100%;background:linear-gradient(135deg,#1a1a2e,#16213e);display:flex;align-items:center;justify-content:center;color:#2ed573;font-weight:bold;"><i class="fas fa-broadcast-tower" style="margin-right:10px;"></i> 直播中</div>`;
                    }
                    window.simulator?.showStatus('已切換至幕前模式 - 正在直播');
                }
            }

            backstageBtn?.addEventListener('click', () => updateStageUI('backstage'));
            frontstageBtn?.addEventListener('click', () => updateStageUI('frontstage'));
            switchStageBtn?.addEventListener('click', () => {
                const isBackstage = backstageBtn?.classList.contains('active');
                updateStageUI(isBackstage ? 'frontstage' : 'backstage');
            });

            // 倒數計時器
            let countdownInterval = null;
            let countdownSeconds = 300;
            const countdownDisplay = document.querySelector('.countdown-time');
            const presetBtns = document.querySelectorAll('.preset-btn');

            function updateCountdownDisplay() {
                const mins = Math.floor(countdownSeconds / 60);
                const secs = countdownSeconds % 60;
                if (countdownDisplay) {
                    countdownDisplay.textContent = `00:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                }
            }

            presetBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    presetBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    countdownSeconds = parseInt(btn.dataset.time);
                    updateCountdownDisplay();
                });
            });

            document.getElementById('startCountdown')?.addEventListener('click', () => {
                if (countdownInterval) return;
                countdownInterval = setInterval(() => {
                    countdownSeconds--;
                    updateCountdownDisplay();
                    if (countdownSeconds <= 0) {
                        clearInterval(countdownInterval);
                        countdownInterval = null;
                        window.simulator?.showStatus('倒數結束！準備開始直播');
                        if (document.getElementById('autoStartLive')?.checked) {
                            updateStageUI('frontstage');
                        }
                    }
                }, 1000);
                window.simulator?.showStatus('倒數計時開始');
            });

            document.getElementById('pauseCountdown')?.addEventListener('click', () => {
                if (countdownInterval) {
                    clearInterval(countdownInterval);
                    countdownInterval = null;
                    window.simulator?.showStatus('倒數計時暫停');
                }
            });

            document.getElementById('resetCountdown')?.addEventListener('click', () => {
                clearInterval(countdownInterval);
                countdownInterval = null;
                const activePreset = document.querySelector('.preset-btn.active');
                countdownSeconds = activePreset ? parseInt(activePreset.dataset.time) : 300;
                updateCountdownDisplay();
                window.simulator?.showStatus('倒數計時已重設');
            });

            // 直播清單
            const checklistItems = document.querySelectorAll('.checklist-item input[type="checkbox"]');
            const checklistProgress = document.getElementById('checklistProgress');

            function updateChecklistProgress() {
                const total = checklistItems.length;
                const checked = document.querySelectorAll('.checklist-item input[type="checkbox"]:checked').length;
                if (checklistProgress) {
                    checklistProgress.textContent = `${checked}/${total} 完成`;
                }
            }

            checklistItems.forEach(item => {
                item.addEventListener('change', () => {
                    const parent = item.closest('.checklist-item');
                    if (item.checked) {
                        parent?.classList.add('checked');
                    } else {
                        parent?.classList.remove('checked');
                    }
                    updateChecklistProgress();
                });
            });

            document.getElementById('completeAllChecks')?.addEventListener('click', () => {
                checklistItems.forEach(item => {
                    item.checked = true;
                    item.closest('.checklist-item')?.classList.add('checked');
                });
                updateChecklistProgress();
                window.simulator?.showStatus('所有檢查項目已完成！');
            });

            document.getElementById('resetChecklist')?.addEventListener('click', () => {
                checklistItems.forEach(item => {
                    item.checked = false;
                    item.closest('.checklist-item')?.classList.remove('checked');
                });
                updateChecklistProgress();
                window.simulator?.showStatus('清單已重設');
            });

            // 設備檢測
            document.getElementById('recheckEquipment')?.addEventListener('click', () => {
                window.simulator?.showStatus('正在重新檢測設備...');
                setTimeout(() => {
                    window.simulator?.showStatus('設備檢測完成 - 所有設備正常');
                }, 1500);
            });

            // 提詞器控制
            const teleprompterFontSize = document.getElementById('teleprompterFontSize');
            const fontSizeValue = document.getElementById('fontSizeValue');
            const scriptContent = document.querySelector('.script-content');

            if (teleprompterFontSize) {
                teleprompterFontSize.addEventListener('input', () => {
                    const size = teleprompterFontSize.value;
                    if (fontSizeValue) fontSizeValue.textContent = size + 'px';
                    if (scriptContent) scriptContent.style.fontSize = size + 'px';
                });
            }

            // 格式轉換
            document.getElementById('convertFile')?.addEventListener('click', () => {
                const format = document.getElementById('outputFormat')?.value || 'mp3';
                window.simulator?.showStatus(`正在轉換為 ${format.toUpperCase()} 格式...`);
                setTimeout(() => {
                    window.simulator?.showStatus('格式轉換完成！');
                }, 2000);
            });

            // 新增錄音按鈕
            document.getElementById('newRecordingBtn')?.addEventListener('click', () => {
                window.simulator?.switchMode('recording');
            });

            // 開始排練按鈕
            document.getElementById('startRehearsalBtn')?.addEventListener('click', () => {
                window.simulator?.showStatus('排練模式已啟動 - 所有功能可用但不會實際直播');
            });

            // 完整檢測按鈕
            document.getElementById('runFullCheckBtn')?.addEventListener('click', () => {
                window.simulator?.showStatus('正在執行完整系統檢測...');
                setTimeout(() => {
                    window.simulator?.showStatus('完整檢測完成 - 系統就緒');
                }, 2000);
            });

            // ========== 快捷模式面板功能 ==========
            const quickModeMenu = document.querySelector('.quick-mode-menu');
            const quickModeToggle = document.getElementById('quickModeToggle');

            // 快捷模式面板開關
            quickModeToggle?.addEventListener('click', () => {
                quickModeMenu?.classList.toggle('active');
                quickModeToggle?.classList.toggle('active');
            });

            // 快捷模式按鈕事件
            document.querySelectorAll('.quick-mode-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const mode = btn.dataset.mode;
                    if (mode && window.simulator) {
                        window.simulator.switchMode(mode);
                        quickModeMenu?.classList.remove('active');
                        quickModeToggle?.classList.remove('active');
                    }
                });
            });

            // ========== 快捷工具列功能 ==========
            const quickRecord = document.getElementById('quickRecord');
            const quickLive = document.getElementById('quickLive');
            const quickPlay = document.getElementById('quickPlay');
            const quickSaveBtn = document.querySelector('#quickToolbar #quickSave');
            const quickTime = document.getElementById('quickTime');
            const quickMeterL = document.getElementById('quickMeterL');
            const quickMeterR = document.getElementById('quickMeterR');

            // 快捷錄音按鈕
            quickRecord?.addEventListener('click', () => {
                if (window.simulator) {
                    window.simulator.toggleRecording();
                    quickRecord.classList.toggle('recording', window.simulator.state.isRecording);
                }
            });

            // 快捷直播按鈕
            quickLive?.addEventListener('click', () => {
                if (window.simulator) {
                    window.simulator.toggleLiveStream();
                    quickLive.classList.toggle('streaming', window.simulator.state.isStreaming);
                }
            });

            // 快捷播放按鈕
            let isPlaying = false;
            quickPlay?.addEventListener('click', () => {
                isPlaying = !isPlaying;
                const icon = quickPlay.querySelector('i');
                if (isPlaying) {
                    icon?.classList.remove('fa-play');
                    icon?.classList.add('fa-pause');
                    quickPlay.classList.add('playing');
                    window.simulator?.showStatus('開始播放');
                } else {
                    icon?.classList.remove('fa-pause');
                    icon?.classList.add('fa-play');
                    quickPlay.classList.remove('playing');
                    window.simulator?.showStatus('暫停播放');
                }
            });

            // 快捷儲存按鈕
            quickSaveBtn?.addEventListener('click', () => {
                window.simulator?.quickSave();
            });

            // 模擬快捷電平表動畫
            setInterval(() => {
                if (quickMeterL && quickMeterR) {
                    const isActive = window.simulator?.state.isRecording || window.simulator?.state.isStreaming;
                    const baseLevel = isActive ? 50 : 20;
                    const variation = Math.random() * 30;
                    quickMeterL.style.height = `${baseLevel + variation}%`;
                    quickMeterR.style.height = `${baseLevel + (Math.random() * 30)}%`;
                }
            }, 100);

            // 更新快捷時間顯示
            setInterval(() => {
                if (quickTime && window.simulator?.state.isRecording) {
                    const elapsed = Date.now() - window.simulator.state.recordingStartTime;
                    const hours = Math.floor(elapsed / 3600000).toString().padStart(2, '0');
                    const minutes = Math.floor((elapsed % 3600000) / 60000).toString().padStart(2, '0');
                    const seconds = Math.floor((elapsed % 60000) / 1000).toString().padStart(2, '0');
                    quickTime.textContent = `${hours}:${minutes}:${seconds}`;
                }
            }, 1000);

            // 空白鍵播放/暫停快捷鍵
            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space' && !e.target.matches('input, textarea, select')) {
                    e.preventDefault();
                    quickPlay?.click();
                }
            });

            // 點擊外部關閉快捷模式���板
            document.addEventListener('click', (e) => {
                if (quickModeMenu?.classList.contains('active') &&
                    !e.target.closest('.quick-mode-menu') &&
                    !e.target.closest('#quickModeToggle')) {
                    quickModeMenu.classList.remove('active');
                    quickModeToggle?.classList.remove('active');
                }
            });

            // ========== 其他按鈕事件 ==========
            // 廣播設定按鈕
            document.getElementById('broadcastSettings')?.addEventListener('click', () => {
                window.simulator?.showStatus('開啟廣播設定面板...');
                window.simulator?.showSettingsPanel();
            });

            // 應用混音設定按鈕
            document.getElementById('applyMixBtn')?.addEventListener('click', () => {
                window.simulator?.showStatus('混音設定已套用！');
            });

            // AI 積分按鈕
            document.getElementById('aiCreditsBtn')?.addEventListener('click', () => {
                window.simulator?.showAlertDialog(
                    'AI 積分餘額',
                    '<div style="text-align:center;"><div style="font-size:2.5rem;font-weight:bold;color:var(--primary);margin-bottom:10px;">1,250</div><div style="color:var(--gray);">可用 AI 積分</div><div style="margin-top:15px;padding:10px;background:rgba(0,0,0,0.3);border-radius:8px;"><small>每次 AI 轉錄消耗 10 積分<br>每次 AI 降噪消耗 15 積分<br>每次音樂生成消耗 50 積分</small></div></div>',
                    'info'
                );
            });

            // 新增清單項目按鈕
            document.getElementById('addCheckItem')?.addEventListener('click', () => {
                const checklist = document.querySelector('.checklist-items');
                if (checklist) {
                    const newItem = document.createElement('div');
                    newItem.className = 'checklist-item';
                    newItem.innerHTML = '<input type="checkbox"><span>新檢查項目</span>';
                    checklist.appendChild(newItem);
                    newItem.querySelector('input').addEventListener('change', function() {
                        if (this.checked) {
                            newItem.classList.add('checked');
                        } else {
                            newItem.classList.remove('checked');
                        }
                    });
                    window.simulator?.showStatus('已新增檢查項目');
                }
            });

            // ========== 剩餘按鈕事件綁定 ==========

            // 編輯頁面按鈕
            document.getElementById('undoBtn')?.addEventListener('click', () => {
                window.simulator?.showStatus('復原上一步操作');
            });

            document.getElementById('redoBtn')?.addEventListener('click', () => {
                window.simulator?.showStatus('重做操作');
            });

            document.getElementById('exportBtn')?.addEventListener('click', () => {
                window.simulator?.showAlertDialog(
                    '匯出專案',
                    '<div style="text-align:left;"><p style="margin-bottom:15px;">選擇匯出格式：</p><div style="display:grid;gap:10px;"><label style="display:flex;align-items:center;gap:8px;padding:10px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;"><input type="radio" name="exportFormat" value="wav" checked> WAV (無損音質)</label><label style="display:flex;align-items:center;gap:8px;padding:10px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;"><input type="radio" name="exportFormat" value="mp3"> MP3 (壓縮格式)</label><label style="display:flex;align-items:center;gap:8px;padding:10px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;"><input type="radio" name="exportFormat" value="flac"> FLAC (無損壓���)</label></div></div>',
                    'info'
                );
            });

            // 設定頁面按鈕
            document.getElementById('resetSettingsBtn')?.addEventListener('click', () => {
                window.simulator?.showConfirmDialog(
                    '重設所有設定',
                    '確定要將所有設定恢復為預設值嗎？此操作無法復原。',
                    () => {
                        window.simulator?.showStatus('所有設定已恢復預設值');
                    }
                );
            });

            document.getElementById('saveSettingsBtn')?.addEventListener('click', () => {
                window.simulator?.showStatus('設定已儲存！');
            });

            // 發佈頁面按鈕
            document.getElementById('scheduleBtn')?.addEventListener('click', () => {
                window.simulator?.showAlertDialog(
                    '排程發佈',
                    '<div style="text-align:left;"><div style="margin-bottom:15px;"><label style="display:block;margin-bottom:5px;color:var(--gray);">發佈日期</label><input type="date" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--surface);color:var(--text);"></div><div style="margin-bottom:15px;"><label style="display:block;margin-bottom:5px;color:var(--gray);">發佈時間</label><input type="time" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--surface);color:var(--text);"></div><div><label style="display:flex;align-items:center;gap:8px;"><input type="checkbox"> 發佈後發送通知給訂閱者</label></div></div>',
                    'info'
                );
            });

            // 協作頁面按鈕
            document.getElementById('inviteTeamBtn')?.addEventListener('click', () => {
                window.simulator?.showAlertDialog(
                    '邀請團隊成員',
                    '<div style="text-align:left;"><div style="margin-bottom:15px;"><label style="display:block;margin-bottom:5px;color:var(--gray);">電子郵件地址</label><input type="email" placeholder="輸入成員電子郵件" style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--surface);color:var(--text);"></div><div style="margin-bottom:15px;"><label style="display:block;margin-bottom:5px;color:var(--gray);">角色權限</label><select style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--surface);color:var(--text);"><option>編輯者</option><option>檢閱者</option><option>觀看者</option></select></div></div>',
                    'info'
                );
            });

            document.getElementById('startMeetingBtn')?.addEventListener('click', () => {
                window.simulator?.showStatus('正在建立會議連結...');
                setTimeout(() => {
                    window.simulator?.showAlertDialog(
                        '會議已建立',
                        '<div style="text-align:center;"><i class="fas fa-video" style="font-size:3rem;color:var(--success);margin-bottom:15px;"></i><p style="margin-bottom:15px;">團隊會議已準備就緒</p><div style="padding:10px;background:rgba(0,0,0,0.2);border-radius:8px;font-family:monospace;">meeting-room-' + Math.random().toString(36).substr(2, 8) + '</div></div>',
                        'success'
                    );
                }, 1000);
            });

            // 音訊庫頁面按鈕
            document.getElementById('importAudioBtn')?.addEventListener('click', () => {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'audio/*';
                input.multiple = true;
                input.onchange = (e) => {
                    const files = e.target.files;
                    if (files.length > 0) {
                        window.simulator?.showStatus(`正在匯入 ${files.length} 個音訊檔案...`);
                        setTimeout(() => {
                            window.simulator?.showStatus(`成功匯入 ${files.length} 個檔案！`);
                        }, 1500);
                    }
                };
                input.click();
            });

            // 混音頁面按鈕
            document.getElementById('mixPresetBtn')?.addEventListener('click', () => {
                window.simulator?.showAlertDialog(
                    '混音預設',
                    '<div style="text-align:left;"><div style="display:grid;gap:10px;"><div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;border:1px solid transparent;" onclick="this.style.borderColor=\'var(--primary)\'"><strong>標準播客</strong><br><small style="color:var(--gray);">平衡的人聲和背景音樂</small></div><div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;border:1px solid transparent;"><strong>訪談節目</strong><br><small style="color:var(--gray);">優化多人對話清晰度</small></div><div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;border:1px solid transparent;"><strong>廣播電台</strong><br><small style="color:var(--gray);">專業廣播級處理</small></div><div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;border:1px solid transparent;"><strong>音樂節目</strong><br><small style="color:var(--gray);">強調音樂細節和動態</small></div></div></div>',
                    'info'
                );
            });

            // 錄音設定按鈕
            document.getElementById('recordingSettingsBtn')?.addEventListener('click', () => {
                window.simulator?.showAlertDialog(
                    '錄音設定',
                    '<div style="text-align:left;"><div style="margin-bottom:15px;"><label style="display:block;margin-bottom:5px;color:var(--gray);">取樣率</label><select style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--surface);color:var(--text);"><option>44100 Hz (CD 品質)</option><option>48000 Hz (專業)</option><option>96000 Hz (高解析)</option></select></div><div style="margin-bottom:15px;"><label style="display:block;margin-bottom:5px;color:var(--gray);">位元深度</label><select style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:var(--surface);color:var(--text);"><option>16-bit</option><option>24-bit</option><option>32-bit float</option></select></div><div><label style="display:flex;align-items:center;gap:8px;"><input type="checkbox" checked> 啟用即時監聽</label></div></div>',
                    'info'
                );
            });

            // ========== 攝像頭與錄影功能 ==========
            let cameraStream = null;
            let videoRecorder = null;
            let videoChunks = [];
            let lastVideoBlob = null;
            let lastVideoUrl = null;

            const cameraPreview = document.getElementById('cameraPreview');
            const recordingPlayback = document.getElementById('recordingPlayback');
            const cameraPlaceholder = document.getElementById('cameraPlaceholder');
            const enableCameraBtn = document.getElementById('enableCameraBtn');
            const startVideoRecBtn = document.getElementById('startVideoRecording');
            const stopVideoRecBtn = document.getElementById('stopVideoRecording');
            const playLastRecBtn = document.getElementById('playLastRecording');
            const downloadVideoBtn = document.getElementById('downloadVideo');

            // 啟用攝像頭
            enableCameraBtn?.addEventListener('click', async () => {
                try {
                    cameraStream = await navigator.mediaDevices.getUserMedia({
                        video: { width: 1280, height: 720, facingMode: 'user' },
                        audio: true
                    });
                    cameraPreview.srcObject = cameraStream;
                    cameraPreview.style.display = 'block';
                    cameraPlaceholder.style.display = 'none';
                    window.simulator?.showStatus('攝像頭已啟用，可以開始錄影');
                } catch (err) {
                    console.error('攝像頭錯誤:', err);
                    window.simulator?.showStatus('無法啟用攝像頭，請檢查權限設定');
                }
            });

            // 開始錄影
            startVideoRecBtn?.addEventListener('click', () => {
                if (!cameraStream) {
                    window.simulator?.showStatus('請先啟用攝像頭');
                    return;
                }
                videoChunks = [];
                videoRecorder = new MediaRecorder(cameraStream, { mimeType: 'video/webm' });
                videoRecorder.ondataavailable = (e) => {
                    if (e.data.size > 0) videoChunks.push(e.data);
                };
                videoRecorder.onstop = () => {
                    lastVideoBlob = new Blob(videoChunks, { type: 'video/webm' });
                    lastVideoUrl = URL.createObjectURL(lastVideoBlob);
                    playLastRecBtn.style.display = 'block';
                    downloadVideoBtn.style.display = 'block';
                    window.simulator?.showStatus('錄影完成！可播放或下載');
                };
                videoRecorder.start();
                startVideoRecBtn.style.display = 'none';
                stopVideoRecBtn.style.display = 'block';
                window.simulator?.showStatus('錄影中...');
            });

            // 停止錄影
            stopVideoRecBtn?.addEventListener('click', () => {
                if (videoRecorder && videoRecorder.state !== 'inactive') {
                    videoRecorder.stop();
                    stopVideoRecBtn.style.display = 'none';
                    startVideoRecBtn.style.display = 'block';
                }
            });

            // 播放錄影
            playLastRecBtn?.addEventListener('click', () => {
                if (lastVideoUrl) {
                    cameraPreview.style.display = 'none';
                    cameraPlaceholder.style.display = 'none';
                    recordingPlayback.src = lastVideoUrl;
                    recordingPlayback.style.display = 'block';
                    recordingPlayback.play();
                    window.simulator?.showStatus('播放錄影中...');
                }
            });

            // 下載錄影
            downloadVideoBtn?.addEventListener('click', () => {
                if (lastVideoUrl) {
                    const a = document.createElement('a');
                    a.href = lastVideoUrl;
                    a.download = `錄影_${new Date().toLocaleString('zh-TW').replace(/[/:]/g, '-')}.webm`;
                    a.click();
                    window.simulator?.showStatus('正在下載錄影檔案...');
                }
            });

            // 錄影播放結束後返回攝像頭
            recordingPlayback?.addEventListener('ended', () => {
                recordingPlayback.style.display = 'none';
                if (cameraStream) {
                    cameraPreview.style.display = 'block';
                } else {
                    cameraPlaceholder.style.display = 'flex';
                }
            });

            // ========== 專業多機位控制台功能 ==========
            let activeCam = 1;
            let currentTransition = 'cut';
            let isFrontstage = true;
            const programOutput = document.getElementById('programOutput');
            const camPreview1 = document.getElementById('camPreview1');

            // 設備來源選擇
            document.querySelectorAll('.equipment-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.equipment-btn').forEach(b => {
                        b.style.borderColor = 'transparent';
                        b.classList.remove('active');
                    });
                    btn.style.borderColor = 'var(--primary)';
                    btn.classList.add('active');
                    const source = btn.dataset.source;
                    window.simulator?.showStatus(`已選擇設備: ${btn.querySelector('span').textContent}`);
                });
            });

            // 機位切換
            document.querySelectorAll('.camera-source').forEach(cam => {
                cam.addEventListener('click', () => {
                    const camNum = cam.dataset.cam;
                    document.querySelectorAll('.camera-source').forEach(c => {
                        c.style.borderColor = 'transparent';
                        const pgmLabel = c.querySelector('.cam-overlay span:last-child');
                        if (pgmLabel && pgmLabel.textContent === 'PGM') pgmLabel.remove();
                    });
                    cam.style.borderColor = 'var(--primary)';
                    const overlay = cam.querySelector('.cam-overlay');
                    if (overlay && !overlay.querySelector('[style*="PGM"]')) {
                        const pgm = document.createElement('span');
                        pgm.style.cssText = 'font-size:0.6rem;background:var(--primary);padding:2px 6px;border-radius:4px;';
                        pgm.textContent = 'PGM';
                        overlay.appendChild(pgm);
                    }
                    activeCam = parseInt(camNum);
                    window.simulator?.showStatus(`切換至機位 ${camNum}`);
                });
            });

            // 轉場效果選擇
            document.querySelectorAll('.transition-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.transition-btn').forEach(b => {
                        b.style.background = 'rgba(255,255,255,0.1)';
                        b.classList.remove('active');
                    });
                    btn.style.background = 'var(--primary)';
                    btn.classList.add('active');
                    currentTransition = btn.dataset.transition;
                    window.simulator?.showStatus(`轉場效果: ${btn.textContent}`);
                });
            });

            // 轉場時間調整
            document.getElementById('transitionDuration')?.addEventListener('input', (e) => {
                document.getElementById('transitionDurationValue').textContent = e.target.value + 'ms';
            });

            // 幕前/幕後切換
            document.getElementById('goFrontstage')?.addEventListener('click', () => {
                isFrontstage = true;
                document.getElementById('goFrontstage').style.background = 'var(--success)';
                document.getElementById('goBackstage').style.background = 'rgba(255,255,255,0.1)';
                document.getElementById('stageStatus').innerHTML = '<i class="fas fa-circle"></i> 觀眾可見 - 直播中';
                document.getElementById('stageStatus').style.background = 'rgba(0,255,0,0.1)';
                document.getElementById('stageStatus').style.color = 'var(--success)';
                document.getElementById('liveIndicator').style.display = 'none';
                window.simulator?.showStatus('已切換至幕前 - 觀眾可見');
            });

            document.getElementById('goBackstage')?.addEventListener('click', () => {
                isFrontstage = false;
                document.getElementById('goBackstage').style.background = 'var(--warning)';
                document.getElementById('goFrontstage').style.background = 'rgba(255,255,255,0.1)';
                document.getElementById('stageStatus').innerHTML = '<i class="fas fa-eye-slash"></i> 幕後準備中';
                document.getElementById('stageStatus').style.background = 'rgba(255,165,0,0.1)';
                document.getElementById('stageStatus').style.color = 'var(--warning)';
                document.getElementById('liveIndicator').style.display = 'block';
                window.simulator?.showStatus('已切換至幕後 - 觀眾看到待機畫面');
            });

            // 圖層覆蓋控制
            document.getElementById('overlayLogo')?.addEventListener('change', (e) => {
                document.getElementById('logoOverlay').style.display = e.target.checked ? 'block' : 'none';
            });
            document.getElementById('overlayLowerThird')?.addEventListener('change', (e) => {
                document.getElementById('lowerThirdOverlay').style.display = e.target.checked ? 'block' : 'none';
            });
            document.getElementById('overlayClock')?.addEventListener('change', (e) => {
                document.getElementById('clockOverlay').style.display = e.target.checked ? 'block' : 'none';
            });
            document.getElementById('overlayViewers')?.addEventListener('change', (e) => {
                document.getElementById('viewerOverlay').style.display = e.target.checked ? 'flex' : 'none';
            });

            // 時鐘更新
            setInterval(() => {
                const now = new Date();
                const timeStr = now.toTimeString().split(' ')[0];
                const clockDisplay = document.getElementById('liveClockDisplay');
                if (clockDisplay) clockDisplay.textContent = timeStr;
            }, 1000);

            // 音訊電平動畫
            setInterval(() => {
                document.querySelectorAll('.audio-bar').forEach(bar => {
                    const height = 30 + Math.random() * 60;
                    bar.style.height = height + '%';
                });
            }, 100);

            // 連接攝像頭到多機位預覽
            if (camPreview1 && cameraStream) {
                camPreview1.srcObject = cameraStream;
            }

            // 全螢幕預覽
            document.getElementById('fullscreenPreview')?.addEventListener('click', () => {
                const screen = document.getElementById('audienceScreen');
                if (screen.requestFullscreen) {
                    screen.requestFullscreen();
                } else if (screen.webkitRequestFullscreen) {
                    screen.webkitRequestFullscreen();
                }
            });

            // 截圖功能
            document.getElementById('takeSnapshot')?.addEventListener('click', () => {
                const video = document.getElementById('programOutput');
                const canvas = document.createElement('canvas');
                canvas.width = video.videoWidth || 1280;
                canvas.height = video.videoHeight || 720;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(video, 0, 0);
                canvas.toBlob(blob => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `截圖_${new Date().toLocaleString('zh-TW').replace(/[/:]/g, '-')}.png`;
                    a.click();
                    window.simulator?.showStatus('截圖已儲存');
                });
            });

            // 新增來源按鈕
            document.getElementById('addCameraSource')?.addEventListener('click', () => {
                window.simulator?.showAlertDialog(
                    '新增訊號來源',
                    '<div style="text-align:left;"><div style="display:grid;gap:10px;"><div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:10px;"><i class="fas fa-video" style="font-size:1.5rem;color:var(--primary);"></i><div><strong>網路攝影機</strong><br><small style="color:var(--gray);">USB/內建攝影機</small></div></div><div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:10px;"><i class="fas fa-desktop" style="font-size:1.5rem;color:var(--info);"></i><div><strong>螢幕擷取</strong><br><small style="color:var(--gray);">分享螢幕或視窗</small></div></div><div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:10px;"><i class="fas fa-image" style="font-size:1.5rem;color:var(--success);"></i><div><strong>圖片/影片</strong><br><small style="color:var(--gray);">靜態圖片或預錄影片</small></div></div><div style="padding:12px;background:rgba(0,0,0,0.2);border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:10px;"><i class="fas fa-link" style="font-size:1.5rem;color:var(--warning);"></i><div><strong>NDI/RTMP</strong><br><small style="color:var(--gray);">網路串流輸入</small></div></div></div></div>',
                    'info'
                );
            });

            // 連接攝像頭到 Program Output
            enableCameraBtn?.addEventListener('click', async () => {
                try {
                    if (!cameraStream) {
                        cameraStream = await navigator.mediaDevices.getUserMedia({
                            video: { width: 1280, height: 720, facingMode: 'user' },
                            audio: true
                        });
                    }
                    if (camPreview1) camPreview1.srcObject = cameraStream;
                    if (programOutput) programOutput.srcObject = cameraStream;
                } catch (err) {
                    console.error('攝像頭錯誤:', err);
                }
            });

            // ========== 工具列表項目事件 ==========
            document.querySelectorAll('[data-tool]').forEach(item => {
                item.addEventListener('click', () => {
                    const toolName = item.dataset.tool;
                    const toolText = item.textContent.trim().replace(/\s+/g, ' ');
                    window.simulator?.showStatus(`正在載入: ${toolText}`);
                    setTimeout(() => {
                        window.simulator?.showToolPage(toolName, toolText);
                    }, 300);
                });
            });

            // ========== 類別按鈕事件 ==========
            document.querySelectorAll('.category-btn[data-action]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const action = btn.dataset.action;
                    const category = btn.dataset.category;
                    if (action === 'info') {
                        const categoryNames = {
                            'broadcast': '直播串流工具',
                            'recording': '錄音工具',
                            'mixing': '混音工具',
                            'editing': '編輯工具',
                            'settings': '系統設定',
                            'publish': '發佈工具',
                            'ai-tools': 'AI 工具',
                            'collaboration': '協作工具',
                            'audio-library': '音訊庫',
                            'live-prep': '直播準備'
                        };
                        window.simulator?.showAlertDialog(
                            categoryNames[category] || '工具說明',
                            '<div style="text-align:left;"><p>此類別包含多種專業工具，可幫助您完成播客製作的各個環節。</p><ul style="margin-top:10px;padding-left:20px;"><li>點擊列表中的工具開始使用</li><li>每個工具都有詳細的操作指南</li><li>支援快捷鍵操作提升效率</li></ul></div>',
                            'info'
                        );
                    } else if (action === 'enter') {
                        window.simulator?.showStatus(`進入 ${category} 工具集`);
                    }
                });
            });

            // ========== 工具操作按鈕事件 ==========
            document.querySelectorAll('.tool-action-btn[data-action]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const action = btn.dataset.action;
                    if (action === 'launch') {
                        window.simulator?.showStatus('正在啟動工具...');
                    } else if (action === 'tutorial') {
                        window.simulator?.showAlertDialog(
                            '教學影片',
                            '<div style="text-align:center;"><i class="fas fa-play-circle" style="font-size:4rem;color:var(--primary);margin-bottom:15px;"></i><p>教學影片功能即將推出</p><p style="color:var(--gray);margin-top:10px;">敬請期待完整的操作指南</p></div>',
                            'info'
                        );
                    }
                });
            });

            // ========== 軌道按鈕事件 ==========
            document.querySelectorAll('.track-btn[data-action]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const action = btn.dataset.action;
                    const trackId = btn.dataset.track;
                    btn.classList.toggle('active');
                    if (action === 'mute') {
                        window.simulator?.showStatus(btn.classList.contains('active') ? `軌道 ${trackId} 已靜音` : `軌道 ${trackId} 取消靜音`);
                    } else if (action === 'solo') {
                        window.simulator?.showStatus(btn.classList.contains('active') ? `軌道 ${trackId} 獨奏模式` : `軌道 ${trackId} 取消獨奏`);
                    } else if (action === 'record') {
                        window.simulator?.showStatus(btn.classList.contains('active') ? `軌道 ${trackId} 錄音待命` : `軌道 ${trackId} 取消錄音待命`);
                    }
                });
            });

            // Ctrl+1-9 快捷鍵切換模式
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.key >= '1' && e.key <= '9') {
                    e.preventDefault();
                    const modes = ['main', 'tv', 'broadcast', 'recording', 'mixing', 'editing', 'ai-tools', 'publish', 'collaboration'];
                    const index = parseInt(e.key) - 1;
                    if (modes[index] && window.simulator) {
                        window.simulator.switchMode(modes[index]);
                    }
                }
            });

            // ========== 對講機通訊系統 ==========
            let walkieConnected = false;
            let activeChannel = 'director';
            let pttActive = false;
            let walkieAudioRecorder = null;
            let walkieAudioStream = null;

            // 連接對講機
            document.getElementById('walkieTalkieConnect')?.addEventListener('click', async () => {
                const btn = document.getElementById('walkieTalkieConnect');
                const status = document.getElementById('walkieStatus');
                if (!walkieConnected) {
                    try {
                        walkieAudioStream = await navigator.mediaDevices.getUserMedia({ audio: true });
                        walkieConnected = true;
                        btn.innerHTML = '<i class="fas fa-unlink"></i> 斷開';
                        btn.style.background = 'var(--danger)';
                        status.innerHTML = '<div style="width:12px;height:12px;background:var(--success);border-radius:50%;animation:pulse 1.5s infinite;"></div><span>已連接 - 導演頻道 (Director CH)</span>';
                        window.simulator?.showStatus('對講機已連接！');
                    } catch (err) {
                        window.simulator?.showStatus('無法連接麥克風，請檢查權限');
                    }
                } else {
                    if (walkieAudioStream) {
                        walkieAudioStream.getTracks().forEach(t => t.stop());
                        walkieAudioStream = null;
                    }
                    walkieConnected = false;
                    btn.innerHTML = '<i class="fas fa-link"></i> 連接';
                    btn.style.background = 'var(--success)';
                    status.innerHTML = '<div style="width:12px;height:12px;background:var(--gray);border-radius:50%;"></div><span>已斷開連接</span>';
                    window.simulator?.showStatus('對講機已斷開');
                }
            });

            // 頻道切換
            const channelNames = {
                'director': '導演頻道 (Director CH)',
                'camera': '攝影頻道 (Camera CH)',
                'audio': '音控頻道 (Audio CH)',
                'stage': '燈光頻道 (Lighting CH)'
            };
            document.querySelectorAll('.channel-btn[data-channel]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.channel-btn[data-channel]').forEach(b => {
                        b.style.borderColor = 'transparent';
                        b.style.transform = 'scale(1)';
                    });
                    btn.style.borderColor = 'white';
                    btn.style.transform = 'scale(1.05)';
                    activeChannel = btn.dataset.channel;
                    const status = document.getElementById('walkieStatus');
                    if (walkieConnected && status) {
                        status.innerHTML = '<div style="width:12px;height:12px;background:var(--success);border-radius:50%;animation:pulse 1.5s infinite;"></div><span>已連接 - ' + channelNames[activeChannel] + '</span>';
                    }
                    window.simulator?.showStatus('切換至' + channelNames[activeChannel]);
                });
            });

            // PTT 按住說話
            const pttButton = document.getElementById('pttButton');
            pttButton?.addEventListener('mousedown', () => {
                if (!walkieConnected) {
                    window.simulator?.showStatus('請先連接對講機');
                    return;
                }
                pttActive = true;
                pttButton.style.background = 'linear-gradient(135deg,#e74c3c,#c0392b)';
                pttButton.innerHTML = '<i class="fas fa-microphone-alt"></i> 發話中...';
                document.getElementById('walkieStatus').innerHTML = '<div style="width:12px;height:12px;background:#e74c3c;border-radius:50%;animation:pulse 0.3s infinite;"></div><span style="color:#e74c3c;font-weight:bold;">正在發話至 ' + channelNames[activeChannel] + '</span>';
                window.simulator?.showStatus('發話中...');
            });
            pttButton?.addEventListener('mouseup', () => {
                if (pttActive) {
                    pttActive = false;
                    pttButton.style.background = 'linear-gradient(135deg,#27ae60,#2ecc71)';
                    pttButton.innerHTML = '<i class="fas fa-microphone"></i> 按住說話 (PTT)';
                    document.getElementById('walkieStatus').innerHTML = '<div style="width:12px;height:12px;background:var(--success);border-radius:50%;animation:pulse 1.5s infinite;"></div><span>已連接 - ' + channelNames[activeChannel] + '</span>';
                    window.simulator?.showStatus('發話結束');
                }
            });
            pttButton?.addEventListener('mouseleave', () => {
                if (pttActive) {
                    pttActive = false;
                    pttButton.style.background = 'linear-gradient(135deg,#27ae60,#2ecc71)';
                    pttButton.innerHTML = '<i class="fas fa-microphone"></i> 按住說話 (PTT)';
                    document.getElementById('walkieStatus').innerHTML = '<div style="width:12px;height:12px;background:var(--success);border-radius:50%;animation:pulse 1.5s infinite;"></div><span>已連接 - ' + channelNames[activeChannel] + '</span>';
                }
            });

            // AI 語音功能 (使用 Web Speech API)
            document.getElementById('aiVoiceBtn')?.addEventListener('click', () => {
                const aiMessages = {
                    'director': [
                        { en: 'All stations, standby for live broadcast in 30 seconds.', zh: '各位注意，直播將於30秒後開始。' },
                        { en: 'Camera 1, push in slowly. Camera 2, prepare for wide shot.', zh: '一號機位，慢慢推進。二號機位，準備拍攝全景。' },
                        { en: 'Audio team, check levels. We are going live in 10 seconds.', zh: '音控組，檢查音量電平。10秒後直播開始。' },
                        { en: 'Cut to Camera 2 on my mark. 3, 2, 1, cut!', zh: '準備切換至二號機位。3、2、1，切！' }
                    ],
                    'camera': [
                        { en: 'Camera 1 is ready. Focus locked on the host.', zh: '一號機就緒，焦點鎖定主持人。' },
                        { en: 'Moving to position B for the next segment.', zh: '移動至B位置準備下一個環節。' },
                        { en: 'Battery at 45 percent. Need replacement in 20 minutes.', zh: '電池剩餘45%，20分鐘後需要更換。' }
                    ],
                    'audio': [
                        { en: 'Audio levels nominal. All microphones are hot.', zh: '音頻電平正常，所有麥克風已開啟。' },
                        { en: 'Detecting some feedback on channel 3. Adjusting now.', zh: '頻道3檢測到回授，正在調整。' },
                        { en: 'Background music cued and ready.', zh: '背景音樂已預備就緒。' }
                    ],
                    'stage': [
                        { en: 'Lights are set. Standing by for cue.', zh: '燈光已設定完成，等待指令。' },
                        { en: 'Spotlight 3 needs adjustment. Fixing now.', zh: '第三號射燈需要調整，正在處理。' },
                        { en: 'Rainbow effect ready for the intro sequence.', zh: '幻彩效果已準備好用於開場。' }
                    ]
                };
                const messages = aiMessages[activeChannel] || aiMessages['director'];
                const msg = messages[Math.floor(Math.random() * messages.length)];

                // 顯示對話氣泡
                const langOptions = ['en', 'zh'];
                const selectedLang = langOptions[Math.floor(Math.random() * 2)];
                const textToSpeak = selectedLang === 'en' ? msg.en : msg.zh;

                // 更新狀態顯示
                const status = document.getElementById('walkieStatus');
                status.innerHTML = '<div style="width:12px;height:12px;background:var(--primary);border-radius:50%;animation:pulse 0.5s infinite;"></div><span style="color:var(--primary);">AI 語音：' + textToSpeak + '</span>';

                // 使用 Web Speech API 語音合成
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(textToSpeak);
                    utterance.lang = selectedLang === 'en' ? 'en-US' : 'zh-HK';
                    utterance.rate = 1.0;
                    utterance.pitch = 1.0;

                    // 選擇合適的語音
                    const voices = speechSynthesis.getVoices();
                    if (selectedLang === 'zh') {
                        const cantoVoice = voices.find(v => v.lang.includes('zh-HK') || v.lang.includes('zh-TW') || v.lang.includes('zh'));
                        if (cantoVoice) utterance.voice = cantoVoice;
                    } else {
                        const enVoice = voices.find(v => v.lang.includes('en'));
                        if (enVoice) utterance.voice = enVoice;
                    }

                    utterance.onend = () => {
                        status.innerHTML = '<div style="width:12px;height:12px;background:var(--success);border-radius:50%;animation:pulse 1.5s infinite;"></div><span>已連接 - ' + channelNames[activeChannel] + '</span>';
                    };

                    speechSynthesis.speak(utterance);
                    window.simulator?.showStatus('AI 語音播報中...');
                } else {
                    window.simulator?.showStatus('瀏覽器不支援語音合成');
                }
            });

            // 預載語音
            if ('speechSynthesis' in window) {
                speechSynthesis.getVoices();
                speechSynthesis.onvoiceschanged = () => speechSynthesis.getVoices();
            }

            // ========== 舞台燈光控制系統 ==========
            let currentLightEffect = 'spotlight';
            let currentLightColor = '#ff0000';
            let lightBrightness = 80;
            let lightEffectInterval = null;
            let isBlackout = false;
            let isMasterOn = true;

            const spotlights = document.querySelectorAll('.spotlight');
            const stageLightPreview = document.getElementById('stageLightPreview');

            // 更新燈光顏色
            function updateSpotlightColors(color, opacity = 0.8) {
                spotlights.forEach(light => {
                    const adjustedOpacity = (lightBrightness / 100) * opacity;
                    light.style.background = `radial-gradient(ellipse at top, ${color}${Math.round(adjustedOpacity * 255).toString(16).padStart(2, '0')}, transparent 70%)`;
                });
            }

            // 停止所有燈光效果
            function stopLightEffect() {
                if (lightEffectInterval) {
                    clearInterval(lightEffectInterval);
                    lightEffectInterval = null;
                }
                spotlights.forEach(light => {
                    light.style.animation = '';
                    light.style.opacity = '1';
                });
            }

            // 燈光效果
            const lightEffects = {
                spotlight: () => {
                    stopLightEffect();
                    updateSpotlightColors(currentLightColor);
                },
                rainbow: () => {
                    stopLightEffect();
                    const colors = ['#ff0000', '#ff7700', '#ffff00', '#00ff00', '#0077ff', '#7700ff'];
                    let colorIndex = 0;
                    lightEffectInterval = setInterval(() => {
                        spotlights.forEach((light, i) => {
                            const c = colors[(colorIndex + i) % colors.length];
                            const opacity = lightBrightness / 100;
                            light.style.background = `radial-gradient(ellipse at top, ${c}${Math.round(opacity * 200).toString(16).padStart(2, '0')}, transparent 70%)`;
                        });
                        colorIndex = (colorIndex + 1) % colors.length;
                    }, 500);
                },
                strobe: () => {
                    stopLightEffect();
                    let on = true;
                    lightEffectInterval = setInterval(() => {
                        spotlights.forEach(light => {
                            light.style.opacity = on ? '1' : '0';
                        });
                        on = !on;
                    }, 100);
                },
                fade: () => {
                    stopLightEffect();
                    let opacity = 0;
                    let direction = 1;
                    lightEffectInterval = setInterval(() => {
                        opacity += direction * 0.05;
                        if (opacity >= 1) direction = -1;
                        if (opacity <= 0) direction = 1;
                        spotlights.forEach(light => {
                            light.style.opacity = opacity.toString();
                        });
                    }, 50);
                },
                chase: () => {
                    stopLightEffect();
                    let activeIndex = 0;
                    lightEffectInterval = setInterval(() => {
                        spotlights.forEach((light, i) => {
                            light.style.opacity = i === activeIndex ? '1' : '0.2';
                        });
                        activeIndex = (activeIndex + 1) % spotlights.length;
                    }, 200);
                },
                pulse: () => {
                    stopLightEffect();
                    spotlights.forEach(light => {
                        light.style.animation = 'pulse 1s infinite';
                    });
                }
            };

            // 燈光效果按鈕
            document.querySelectorAll('.light-ctrl-btn[data-effect]').forEach(btn => {
                btn.addEventListener('click', () => {
                    if (isBlackout) return;
                    document.querySelectorAll('.light-ctrl-btn').forEach(b => {
                        b.style.borderColor = 'transparent';
                        b.classList.remove('active');
                    });
                    btn.style.borderColor = 'var(--primary)';
                    btn.classList.add('active');
                    currentLightEffect = btn.dataset.effect;
                    if (lightEffects[currentLightEffect]) {
                        lightEffects[currentLightEffect]();
                    }
                    window.simulator?.showStatus('燈光效果: ' + btn.textContent.trim());
                });
            });

            // 顏色預設
            document.querySelectorAll('.color-preset[data-color]').forEach(preset => {
                preset.addEventListener('click', () => {
                    if (isBlackout) return;
                    document.querySelectorAll('.color-preset').forEach(p => {
                        p.style.borderColor = 'transparent';
                    });
                    preset.style.borderColor = 'white';
                    currentLightColor = preset.dataset.color;
                    updateSpotlightColors(currentLightColor);
                    window.simulator?.showStatus('燈光顏色已更新');
                });
            });

            // 自訂顏色
            document.getElementById('customLightColor')?.addEventListener('input', (e) => {
                if (isBlackout) return;
                currentLightColor = e.target.value;
                document.querySelectorAll('.color-preset').forEach(p => {
                    p.style.borderColor = 'transparent';
                });
                updateSpotlightColors(currentLightColor);
            });

            // 亮度控制
            document.getElementById('lightBrightness')?.addEventListener('input', (e) => {
                if (isBlackout) return;
                lightBrightness = parseInt(e.target.value);
                document.getElementById('brightnessValue').textContent = lightBrightness + '%';
                updateSpotlightColors(currentLightColor);
            });

            // 主燈控制
            document.getElementById('masterLightOn')?.addEventListener('click', () => {
                const btn = document.getElementById('masterLightOn');
                isMasterOn = !isMasterOn;
                if (isMasterOn) {
                    btn.style.background = 'var(--warning)';
                    btn.innerHTML = '<i class="fas fa-power-off"></i> 主燈';
                    stageLightPreview.style.opacity = '1';
                    if (lightEffects[currentLightEffect]) {
                        lightEffects[currentLightEffect]();
                    }
                    window.simulator?.showStatus('主燈已開啟');
                } else {
                    stopLightEffect();
                    btn.style.background = 'var(--gray)';
                    btn.innerHTML = '<i class="fas fa-power-off"></i> 主燈 (關)';
                    stageLightPreview.style.opacity = '0.3';
                    window.simulator?.showStatus('主燈已關閉');
                }
            });

            // Blackout 控制
            document.getElementById('blackoutBtn')?.addEventListener('click', () => {
                const btn = document.getElementById('blackoutBtn');
                isBlackout = !isBlackout;
                if (isBlackout) {
                    stopLightEffect();
                    btn.style.background = 'var(--danger)';
                    btn.innerHTML = '<i class="fas fa-moon"></i> BLACKOUT';
                    spotlights.forEach(light => {
                        light.style.opacity = '0';
                    });
                    stageLightPreview.style.background = '#000';
                    window.simulator?.showStatus('BLACKOUT - 所有燈光已關閉');
                } else {
                    btn.style.background = '';
                    btn.innerHTML = '<i class="fas fa-moon"></i> Blackout';
                    stageLightPreview.style.background = 'linear-gradient(180deg,#000,#1a1a2e)';
                    spotlights.forEach(light => {
                        light.style.opacity = '1';
                    });
                    if (lightEffects[currentLightEffect]) {
                        lightEffects[currentLightEffect]();
                    }
                    window.simulator?.showStatus('燈光已恢復');
                }
            });

            // 初始化燈光
            updateSpotlightColors(currentLightColor);

            // ========== 增強模擬預覽面板功能 ==========
            const simPreview = {
                isRunning: false,
                startTime: null,
                timerInterval: null,
                animationInterval: null,
                viewers: 0,
                targetBitrate: 6000,
                currentBitrate: 0,
                peakL: 0,
                peakR: 0,

                init() {
                    this.initSpectrum();
                    this.bindEvents();
                },

                initSpectrum() {
                    const spectrum = document.getElementById('spectrumAnalyzer');
                    if (!spectrum) return;
                    spectrum.innerHTML = '';
                    for (let i = 0; i < 32; i++) {
                        const bar = document.createElement('div');
                        bar.className = 'spectrum-bar';
                        bar.style.height = '5px';
                        spectrum.appendChild(bar);
                    }
                },

                bindEvents() {
                    // 位元率滑桿
                    const bitrateSlider = document.getElementById('bitrateSlider');
                    const bitrateValue = document.getElementById('bitrateSliderValue');
                    if (bitrateSlider && bitrateValue) {
                        bitrateSlider.addEventListener('input', () => {
                            bitrateValue.textContent = bitrateSlider.value;
                            this.targetBitrate = parseInt(bitrateSlider.value);
                        });
                    }

                    // 音訊增益滑桿
                    const audioGainSlider = document.getElementById('audioGainSlider');
                    const audioGainValue = document.getElementById('audioGainValue');
                    if (audioGainSlider && audioGainValue) {
                        audioGainSlider.addEventListener('input', () => {
                            audioGainValue.textContent = audioGainSlider.value + '%';
                        });
                    }

                    // 畫質按鈕
                    document.querySelectorAll('[data-quality]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            document.querySelectorAll('[data-quality]').forEach(b => b.classList.remove('active'));
                            btn.classList.add('active');
                            const quality = btn.dataset.quality;
                            this.addLog(`畫質設定已切換為 ${quality}`, 'info');

                            // 根據畫質自動調整建議位元率
                            const suggestedBitrate = { '720p': 4000, '1080p': 6000, '4k': 10000 };
                            if (bitrateSlider && suggestedBitrate[quality]) {
                                bitrateSlider.value = suggestedBitrate[quality];
                                if (bitrateValue) bitrateValue.textContent = suggestedBitrate[quality];
                                this.targetBitrate = suggestedBitrate[quality];
                            }
                        });
                    });

                    // 平台按鈕
                    document.querySelectorAll('[data-platform]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            btn.classList.toggle('active');
                            const platform = btn.dataset.platform;
                            const isActive = btn.classList.contains('active');
                            this.addLog(`${platform.toUpperCase()} 串流${isActive ? '已啟用' : '已停用'}`, isActive ? 'success' : 'info');
                        });
                    });

                    // 開始模擬按鈕
                    const startBtn = document.getElementById('startSimulationBtn');
                    if (startBtn) {
                        startBtn.addEventListener('click', () => {
                            if (this.isRunning) {
                                this.stopSimulation();
                            } else {
                                this.startSimulation();
                            }
                        });
                    }
                },

                startSimulation() {
                    const titleInput = document.getElementById('streamTitleInput');
                    const title = titleInput?.value || '未命名直播';

                    this.isRunning = true;
                    this.startTime = Date.now();
                    this.viewers = 0;
                    this.currentBitrate = 0;

                    // 更新 UI 狀態
                    const startBtn = document.getElementById('startSimulationBtn');
                    if (startBtn) {
                        startBtn.innerHTML = '<i class="fas fa-stop"></i><span>停止模擬</span>';
                        startBtn.classList.add('running');
                    }

                    const statusIndicator = document.getElementById('broadcastStatusIndicator');
                    if (statusIndicator) {
                        statusIndicator.innerHTML = '<span>直播中</span>';
                        statusIndicator.classList.add('active');
                    }

                    this.addLog(`開始模擬串流: "${title}"`, 'success');
                    this.addLog('連接串流伺服器...', 'info');

                    setTimeout(() => {
                        this.addLog('串流連接成功', 'success');
                        this.addLog('開始編碼與傳輸...', 'info');
                    }, 800);

                    // 啟動計時器
                    this.timerInterval = setInterval(() => this.updateTimer(), 1000);

                    // 啟動動畫
                    this.animationInterval = setInterval(() => this.updateAnimation(), 100);

                    window.simulator?.showStatus('模擬串流已開始');
                },

                stopSimulation() {
                    this.isRunning = false;

                    // 更新 UI 狀態
                    const startBtn = document.getElementById('startSimulationBtn');
                    if (startBtn) {
                        startBtn.innerHTML = '<i class="fas fa-play"></i><span>開始模擬串流</span>';
                        startBtn.classList.remove('running');
                    }

                    const statusIndicator = document.getElementById('broadcastStatusIndicator');
                    if (statusIndicator) {
                        statusIndicator.innerHTML = '<span>待機中</span>';
                        statusIndicator.classList.remove('active');
                    }

                    // 停止計時器
                    if (this.timerInterval) {
                        clearInterval(this.timerInterval);
                        this.timerInterval = null;
                    }
                    if (this.animationInterval) {
                        clearInterval(this.animationInterval);
                        this.animationInterval = null;
                    }

                    const elapsed = this.startTime ? Math.floor((Date.now() - this.startTime) / 1000) : 0;
                    this.addLog(`串流已結束，總時長: ${this.formatTime(elapsed * 1000)}`, 'success');
                    this.addLog(`最終觀眾數: ${this.viewers}`, 'info');

                    // 重置電平儀表
                    this.resetMeters();

                    window.simulator?.showStatus('模擬串流已停止');
                },

                updateTimer() {
                    if (!this.isRunning || !this.startTime) return;
                    const elapsed = Date.now() - this.startTime;
                    const timer = document.getElementById('simulationTimer');
                    if (timer) {
                        timer.textContent = this.formatTime(elapsed);
                    }
                },

                updateAnimation() {
                    if (!this.isRunning) return;

                    // 更新頻譜
                    const spectrum = document.getElementById('spectrumAnalyzer');
                    if (spectrum) {
                        const bars = spectrum.querySelectorAll('.spectrum-bar');
                        bars.forEach((bar, i) => {
                            const base = 20 + Math.sin(Date.now() / 200 + i * 0.3) * 15;
                            const random = Math.random() * 40;
                            bar.style.height = `${base + random}px`;
                        });
                    }

                    // 更新電平儀表
                    const gainValue = parseInt(document.getElementById('audioGainSlider')?.value || 75);
                    const levelL = (40 + Math.random() * 35) * (gainValue / 100);
                    const levelR = (40 + Math.random() * 35) * (gainValue / 100);

                    this.peakL = Math.max(this.peakL * 0.95, levelL);
                    this.peakR = Math.max(this.peakR * 0.95, levelR);

                    const meterL = document.getElementById('levelMeterL');
                    const meterR = document.getElementById('levelMeterR');
                    const peakLEl = document.getElementById('peakL');
                    const peakREl = document.getElementById('peakR');
                    const valueL = document.getElementById('levelValueL');
                    const valueR = document.getElementById('levelValueR');

                    if (meterL) meterL.style.width = `${levelL}%`;
                    if (meterR) meterR.style.width = `${levelR}%`;
                    if (peakLEl) peakLEl.style.left = `${this.peakL}%`;
                    if (peakREl) peakREl.style.left = `${this.peakR}%`;
                    if (valueL) valueL.textContent = `${(-60 + levelL * 0.6).toFixed(1)} dB`;
                    if (valueR) valueR.textContent = `${(-60 + levelR * 0.6).toFixed(1)} dB`;

                    // 更新即時數據
                    this.currentBitrate += (this.targetBitrate - this.currentBitrate) * 0.1;
                    const jitter = (Math.random() - 0.5) * 200;
                    const displayBitrate = Math.round(this.currentBitrate + jitter);

                    const bitrateEl = document.getElementById('realtimeBitrate');
                    if (bitrateEl) bitrateEl.textContent = `${displayBitrate} kbps`;

                    // 丟幀率
                    const dropFrame = (Math.random() * 0.5).toFixed(2);
                    const dropFrameEl = document.getElementById('realtimeDropFrame');
                    if (dropFrameEl) {
                        dropFrameEl.textContent = `${dropFrame}%`;
                        dropFrameEl.className = 'data-item-value ' + (parseFloat(dropFrame) < 0.3 ? 'success' : 'warning');
                    }

                    // 觀眾人數 (漸進增加)
                    if (Math.random() < 0.3) {
                        this.viewers += Math.floor(Math.random() * 5);
                    }
                    const viewersEl = document.getElementById('realtimeViewers');
                    if (viewersEl) viewersEl.textContent = this.viewers.toLocaleString();

                    // 延遲
                    const latency = Math.floor(50 + Math.random() * 100);
                    const latencyEl = document.getElementById('realtimeLatency');
                    if (latencyEl) {
                        latencyEl.textContent = `${latency} ms`;
                        latencyEl.className = 'data-item-value ' + (latency < 100 ? 'success' : latency < 200 ? 'warning' : 'danger');
                    }
                },

                resetMeters() {
                    const meterL = document.getElementById('levelMeterL');
                    const meterR = document.getElementById('levelMeterR');
                    const peakLEl = document.getElementById('peakL');
                    const peakREl = document.getElementById('peakR');
                    const valueL = document.getElementById('levelValueL');
                    const valueR = document.getElementById('levelValueR');

                    if (meterL) meterL.style.width = '0%';
                    if (meterR) meterR.style.width = '0%';
                    if (peakLEl) peakLEl.style.left = '0%';
                    if (peakREl) peakREl.style.left = '0%';
                    if (valueL) valueL.textContent = '-∞ dB';
                    if (valueR) valueR.textContent = '-∞ dB';

                    this.peakL = 0;
                    this.peakR = 0;

                    // 重置頻譜
                    const spectrum = document.getElementById('spectrumAnalyzer');
                    if (spectrum) {
                        spectrum.querySelectorAll('.spectrum-bar').forEach(bar => {
                            bar.style.height = '5px';
                        });
                    }
                },

                addLog(message, type = 'info') {
                    const log = document.getElementById('simulationLog');
                    if (!log) return;

                    const now = new Date();
                    const timeStr = now.toTimeString().slice(0, 8);

                    const entry = document.createElement('div');
                    entry.className = 'log-entry';
                    entry.innerHTML = `
                        <span class="log-time">${timeStr}</span>
                        <span class="log-message ${type}">${message}</span>
                    `;

                    log.appendChild(entry);
                    log.scrollTop = log.scrollHeight;

                    // 限制日誌條目數量
                    while (log.children.length > 50) {
                        log.removeChild(log.firstChild);
                    }
                },

                formatTime(ms) {
                    const seconds = Math.floor(ms / 1000);
                    const minutes = Math.floor(seconds / 60);
                    const hours = Math.floor(minutes / 60);
                    return `${hours.toString().padStart(2, '0')}:${(minutes % 60).toString().padStart(2, '0')}:${(seconds % 60).toString().padStart(2, '0')}`;
                }
            };

            // 初始化模擬預覽
            simPreview.init();
        });
    </script>

</body></html>